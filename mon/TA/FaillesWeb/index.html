<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>MONs de Thibault</title>

    <link href="/do-it/assets/node_modules/prismjs/themes/prism-solarizedlight.min.css" rel="stylesheet">
    <link href="/do-it/assets/node_modules/prismjs/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet">

    <link href="/do-it/assets/stylesheets/main.css" rel="stylesheet">
  </head>
  <body>
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [
            [
              '$', '$'
            ],
            [
              '\\(', '\\)'
            ]
          ]
        },
        svg: {
          fontCache: 'global'
        }
      };
    </script>
    

    <header class="border-b-2 border-gray-200 mb-4">
      <div class="max-w-[1000px] mx-auto px-4">
        <div class="min-h-[50px] flex justify-between items-center">
          <a class="mx-2" href="/do-it/">Home</a>
          <a class="mx-2" href="/do-it/about">About</a>
        </div>
      </div>
    </header>

    <main class="max-w-[1000px] mx-auto px-4">

      
<article>
  <h1 class="mb-1">MONs de Thibault</h1>
  <div class="mb-4">
    
      <div class=" px-4 flex items-center">
        
          <div class="font-bold">Tags : </div>
        
        <ul class="flex not-prose list-none my-0 last:after:content-['•'] last:after:px-1 mx-0 px-1">
          
            <li class="before:content-['•'] before:px-1">failles web</li>
          
            <li class="before:content-['•'] before:px-1">failles</li>
          
            <li class="before:content-['•'] before:px-1">sécurité informatique</li>
          
        </ul>
      </div>
    

    
      <div class=" px-4 flex items-center">
        
          <div class="font-bold">Auteur : </div>
        
        <ul class="flex not-prose list-none my-0 last:after:content-['•'] last:after:px-1 mx-0 px-1">
          
            <li class="before:content-['•'] before:px-1">Thibault Adelain</li>
          
        </ul>
      </div>
    
  </div>

  

  <!-- début résumé -->
<ul>
<li>Failles web</li>
</ul>
<!-- fin résumé -->
<h2>Failles Web</h2>
<p>Dans ce MON, nous allons essayer de comprendre différentes vulnérabilités qui peuvent toucher un site web. Le but ici n'est pas d'être exhaustif en listant toutes les failles possibles, mais seulement de nous intéresser aux failles récurrentes. Celles-ci, lorsqu'elles sont prises en compte, permettent d'éviter la plupart des attaques <strong>web</strong> (nous ne verrons pas les failles réseaux, systèmes... Ces failles sont néanmoins très exploitées, et donc les connaître est aussi nécessaire pour déployer son site web).</p>
<p>Toutes les techniques présentées ici ont pour but de mieux comprendre les failles exploitées par les hackers, et ainsi de vous prémunir contre les attaques. Vous ne devez en aucun cas les essayer sur un site qui n'est pas le vôtre !</p>
<h2>Typologie des attaques</h2>
<p>Différentes attaques sont exploitées par les hackers. Les principales à noter sont :</p>
<ul>
<li><a href="https://fr.wikipedia.org/wiki/Cross-site_scripting"><em>Cross-Site Scripting</em> (XSS).</a> Le but est d'injecter du script sur un site web. Ces scripts peuvent être éxécutés par le serveur ou par le client. Côté utilisateur, on peut par exemple penser à un site de blog, où les utlisateurs peuvent poster des messages. Un hacker malveillant pourra poster un message alléchant avec un lien, et lorsque vous vous rendez sur le lien, le hacker pourra récupérer vos données de session, par exemple vos cookies. Il pourra ainsi avoir accès à votre compte.</li>
<li><a href="https://fr.wikipedia.org/wiki/Cross-site_request_forgery"><em>Cross-Site Request Forgery.</em></a></li>
<li><a href="https://en.wikipedia.org/wiki/Server-side_request_forgery"><em>Server-Side Request Forgery.</em></a></li>
<li><a href="https://fr.wikipedia.org/wiki/Injection_SQL">L'injection SQL.</a> Cette attaque permet de passer les moyens d'identification et d'accéder à la base de données du site web, avec plus ou moins de droits. Elle peut aussi servir à voler la session des utilisateurs.</li>
<li><a href="https://fr.wikipedia.org/wiki/Remote_File_Inclusion"><em>Local/Remote File Inclusion.</em></a> Ici, le hacker va injecter des fichiers sur le serveur web. Ces fichiers peuvent être corrompus et éxécuter un code malveillant.</li>
</ul>
<p>En fait, beaucoup d'attaques sont un mix de ses méthodes. Nous allons en voir quelques-une classiques et essayer de s'en prémunir.</p>
<h2>Méthodologie du hacker</h2>
<p><strong>Collecte d'informations</strong></p>
<p>Avant tout, un hacker part à la collecte d'informations. Les hackers ne sont pas bêtes, ils savent bien que s'ils testent des failles à la chaîne, cela va leur prendre un temps fou, des ressources incroyable, et ils risquent de se faire repérer rapidement.</p>
<p>Ils vont alors d'abord chercher à récolter un maximum d'informations sur le site visé, et souvent de manière tout à fait normale. En fait, le hacker va être attentif aux choses auxquelles les utilisateurs normaux ne vont pas prêter attention. Parmi les questions d'analyse d'un site web, on peut citer :</p>
<ol>
<li><strong>Le site est-il statique ou dynamique ?</strong> Aujourd'hui, les sites statiques se font de plus en plus rares, mais il faut avoir en tête qu'un site statique est difficelement attaquable (attaque web).</li>
<li><strong>Analayse de l'URL : y-a-il des variables passées dans l'URL ?</strong> (ex : forum.php?id=234&amp;user=codej)</li>
<li><strong>Y-a-t-il des formulaires ?</strong> Qui dit formulaire, dit envoie de données de l'utilisateur vers le serveur. Dans certains cas, cela peut mener à une vulnérabilité.</li>
<li><strong>Y-a-t-il des cookies ?</strong> Un cookie est une chaîne de charactères envoyée au client depuis le serveur. Le client enregistre le cookie et à chaque connexion à l'URL (ou au domaine), le cookie est retransmis de l'utilisateur vers le serveur. On peut par exemple avoir des cookies de sessions, qui servent à l'identification des utilisateurs. Chaque utilisateur a son cookie de session, et lorsque le serveur reçoit un cookie de session, il sait précisément à qui il appartient et le serveur accorde l'accès au compte.</li>
<li><strong>Y-a-t-il une base de donnée ?</strong></li>
<li><strong>Quel est le serveur utilisé et quelle est sa version ?</strong> On le dira jamais assez, mais <strong>il faut faire les mises à jour</strong>. Nombre de vulnérabilités sont résolues à chaque mise à jour d'un OS / logiciel. Si un hacker tombe sur un serveur utilisant une version antérieur d'un OS ou logiciel, il pourra exploiter des failles publiées sans problème (il existe même des logiciels testant pour vous les failles <em>released</em>...).</li>
</ol>
<p>Vous pourrez retrouver des détails sur le livre : Sécurité informatique <em>ethical hacking</em> : apprendre l'attaque pour mieux se défendre [2].</p>
<p><strong>Collecte d'informations : dans la pratique</strong></p>
<p>Les outils que l'ont va voir peuvent servir à l'analyse et à l'attaque d'un site web, selon les scripts utilisés.</p>
<p>Tout d'abord, les hackers vont vouloir contrôler toutes les informations qui transitent entre leur machine et le site web. Grâce à un logiciel comme <a href="https://portswigger.net/burp"><em>Burp Suite</em></a>, vous pouvez utiliser ce logiciel comme <em>proxy</em> entre votre navigateur et le site web. Ainsi, vous pouvez modifier les requêtes que vous envoyez (en-têtes, cookies...), cartographier un site web... Les possiblités sont grandes, et vous pouvez grâce à cet outil recueillir des informations beaucoup plus rapidement qu'en les recherchant vous-mêmes.</p>
<p>Ensuite, vous pouvez essayer de cartographier en détail un site grâce à <a href="https://github.com/xmendez/wfuzz"><em>wfuzz</em></a>. C'est un <em>fuzzer</em>, un fusil orienté web. Il prend en entrée un dictionnaire et va envoyer un grand nombre de requêtes au serveur. Vous pouvez par exemple passer en clés du dictionnaire les URL classiques d'un site web (<em>/login, /auth...</em>), et voir la réponse http du serveur (200, 301, 404...). Ce logiciel sert aussi à faire des attaque par <em>brut force</em>.</p>
<p>Et il existe pleins d'autres outils !</p>
<p><strong>Attaque</strong></p>
<p>Après la collecte d'informations vient l'attaque. En fonction des données collectées, les angles d'attaques sont à adapter. Il est possible de :</p>
<ul>
<li><strong>S'il y a des paramètres dans l'URL :</strong> modifier les paramètres dans l'URL. Parmis les exemples évidents : profile.php?id=234 : on peut essayé de modifier l'id et voir s'il possible de se connecter à d'autres comptes utilisateurs. Cet exemple semble trivial mais il arrive que des failles comme celles-ci soit encore présentes. Aussi, on peut trouver des URL comme ça : <a href="http://www.google.fr/search?rlz=1C1GFR343&amp;q=openclassrooms">www.google.fr/search?rlz=1C1GFR343&amp;q=openclassrooms</a> : elle fait appelle à la fonction <em>search</em>. On peut penser à essayer de remplacer la fonction <em>search</em> par d'autres fonctions et voir ce que ça donne. On peut aussi  essayer d'injecter du code dans l'URL.</li>
<li><strong>Si le site propose des formulaires :</strong>
<ul>
<li>Essayer d'injecter du code malveillant dans les formulaires.</li>
<li>Essayer de faire du <em>brut forcing</em> (peu efficace si le site limite les essais, avec par exemple des <a href="https://fr.wikipedia.org/wiki/CAPTCHA"><em>captchas</em></a>)</li>
<li>Essayer des injections SQL. Ex : Lors de la connexion d'un utilisateur, le serveur fait cette requête SQL sur la base de données :  SELECT uid FROM Users WHERE name = '(nom)' AND password = '(mot de passe hashé)'. Si on rempli dans name : <strong>Dupont';--</strong> et n'importe quel mot de passe, on aura interprété par le serveur : SELECT uid FROM Users WHERE name = 'Dupont';--<em><strong>'  AND password = '4e383a1918b432a9bb7702f086c56596e';</strong></em>. La chaîne de charactère en gras sera interprétée comme un commentaire SQL. Donc, on pourra se connecter en tant que Dupont. Il existe pleins d'autres injections SQL. Des logiciels existent pour tester les injections SQL sur des formulaires (par exemple l'<em>addon SQL inject me</em> sur firefox).</li>
</ul>
</li>
<li><strong>Si le serveur utilise un OS / des logiciels non à jour :</strong> exploiter les failles dues aux versions des systèmes utilisées.</li>
<li><strong>Si le site utilise des cookies :</strong>
<ul>
<li>Essayer de récupérer les données de sessions d'un utilisateur. Par exemple, sur un site où les utilisateurs peuvent poster des choses, un utilisateur peut poster un lien malveillant, un fichier corrompu qui executera un script... Tout ça afin de récupérer les cookies d'autres utilisateurs.</li>
<li>Essayer de modifier les cookies envoyés au serveur et voir la réponse. Un cas extrême : un cookie avec <em>admin=0</em> peut donner des idées...</li>
</ul>
</li>
<li>Modifier l'en-tête des requêtes http. Par exemple, on peut se faire passer pour un "site ami" : en effet, certains sites donnent accès à des domaines seulement si on a une certaine provenance. Aussi, on modifier le <em>User-agent</em>.</li>
</ul>
<p>Cette liste d'attaques n'a pas pour but d'être exhaustive, mais nous pouvons en déduire de précieux conseils pour sécuriser nos sites web contre quantité d'attaques.</p>
<h2>Sécuriser son site</h2>
<p>Finalement comment sécuriser son site web :</p>
<ul>
<li><strong>Filtrer toutes les données :</strong> il faut absolument éviter que les utilisateurs puissent poster du code malveillant, un média corrompu, un lien là ou il ne devrait pas être... Pour cela, il faut limiter ce qu'un utilisateur peut faire. On peut penser à utiliser les expressions régulières (ex: date de naissance au format dd-mm-yyyy soit <code>^\d{1,2}/\d{1,2}/\d{4}$</code>)... des fonctions toutes faites existent souvent. On peut limiter un média aux fichiers .png, .jpeg, .jpg... Bref, il faut filtrer tout ce qui vient du client.</li>
<li><strong>Renforcer l'identification du client :</strong> de plus en plus, on voit l'essor de la double identification. Sans aller forcément jusque là, il faut proposer des méthodes d'identification qui soient sécurisées et résilientes. Par exemple, les JWT, les cookies de session bien configurés (https only, non accesible depuis la console JS du navigateur, date d'expiration)... On pensera a ajouter un système pour éviter les attaques par force brute (<em>captcha</em>, interdiction si tentatives d'identification répétées sur le même compte...).</li>
<li><strong>Faire en sorte que le serveur soit le moins bavard possible.</strong> La collecte d'informations est une étape clé dans une attaque. Autant la rendre la plus difficile possible. Beaucoup de serveurs sont très bavards lorqu'on leur fait des requêtes : ils peuvent renvoyer l'OS, la version... Il faut dans la mesure du possible éviter ça.</li>
<li><strong>Mettre à jour son serveur et ses logiciels.</strong> Même si cette recommendation est compliquée à respecter notamment en entreprise, il faut essayer de la satisfaire au maximum.</li>
</ul>
<p>Conclusion : filtrer tout ce qui vient du client et avoir une bonne configuration serveur.</p>
<h2>Sources</h2>
<p>[1] : ANSSI : recommendations pour la mise en place d'un site web : maîtriser les standards de sécurité côté navigateur : <a href="https://www.ssi.gouv.fr/uploads/2013/05/anssi-guide-recommandations_mise_en_oeuvre_site_web_maitriser_standards_securite_cote_navigateur-v2.0.pdf">https://www.ssi.gouv.fr/uploads/2013/05/anssi-guide-recommandations_mise_en_oeuvre_site_web_maitriser_standards_securite_cote_navigateur-v2.0.pdf</a></p>
<p>[2] : Sécurité informatique <em>ethical hacking</em> : apprendre l'attaque pour mieux se défendre (6e édition). ISBN : 10-2409033660</p>


</article>

    </main>

    <footer class="min-h-[50px] border-t-2 border-gray-200 mt-4">
      <div class="max-w-[1000px] mx-auto px-4">
        <div class="min-h-[50px] flex justify-center items-center">
          <p>
            do-it : option de troisième année à l'école centrale Marseille
          </p>
        </div>
      </div>
    </footer>

    <script>
      MathJax
        .startup
        .document
        .getMathItemsWithin(document.body);
    </script>

  </body>
</html>
