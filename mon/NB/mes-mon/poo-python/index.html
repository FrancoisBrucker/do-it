
<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <title>Programmation objet en Python</title>

    <link href=/do-it/assets/node_modules/prismjs/themes/prism-solarizedlight.min.css rel="stylesheet">
    <link href=/do-it/assets/node_modules/prismjs/plugins/line-numbers/prism-line-numbers.min.css rel="stylesheet">

    <link href=/do-it/assets/stylesheets/main.css rel="stylesheet">
  </head>
  <body>
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [
            [
              '$', '$'
            ],
            [
              '\\(', '\\)'
            ]
          ]
        },
        svg: {
          fontCache: 'global'
        }
      };
    </script>
    <script type="text/javascript" id="MathJax-script" 
  src=/do-it/assets/node_modules/mathjax/es5/tex-svg-full.js></script>

    <header class="border-b-2 border-gray-200 mb-4">
      <div class="max-w-[1000px] mx-auto px-4">
        <div class="min-h-[50px] flex justify-between items-center">
          <a class="mx-2" href="/do-it/">Home</a>
          <a class="mx-2" href="/do-it/about">About</a>
        </div>
      </div>
    </header>

    <main class="max-w-[1000px] mx-auto px-4">

      
<article>
  <h1  class="mb-1">Programmation objet en Python</h1>
  <div class="mb-4">
    

    
      <div class=" px-4 flex items-center">
        
          <div class="font-bold">Auteur : </div>
        
        <ul class="flex not-prose list-none my-0 last:after:content-['•'] last:after:px-1 mx-0 px-1">
          
            <li class="before:content-['•'] before:px-1">Nicolas BERT</li>
          
        </ul>
      </div>
    
  </div>

  

  <!-- début résumé -->
<p>POO en Python (Temps 1)</p>
<!-- fin résumé -->
<h2>La programmation orientée objet</h2>
<p>La programmation orientée objet, également abrégée POO, est un paradigme de programmation et une manière de penser différente de celle que l'on connait habituellement qui est la programmation procédurale.</p>
<p>L'idée de la programmation objet est d'encapsuler les données(i.e. les attributs) et les fonctions (i.e. les méthodes) dans des objets et ainsi les rendre disponibles uniquement aux objets qui en ont besoin.</p>
<table>
<thead>
<tr>
<th><strong>Programmation procédurale</strong></th>
<th><strong>Programmation orientée objet</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Le programme est découpé en petites parties appelées <strong>fonctions</strong>.</td>
<td>Le programme est découpé en petites parties appellées <strong>objets</strong></td>
</tr>
<tr>
<td>Il n'y a pas de spécificateur d'accès.</td>
<td>L'accès aux données est réglémenté : public, private, protected ...</td>
</tr>
<tr>
<td>Les fonctions utilisent des <strong>données globales</strong>.</td>
<td>Les objets utilisent ses <strong>propres données</strong>.</td>
</tr>
<tr>
<td>La logique est pensée de <strong>manière globale</strong> et le code est difficilement scalable.</td>
<td>La logique est pensée à <strong>petite échelle</strong> (objet) et le code est facilement scalable.</td>
</tr>
</tbody>
</table>
<div style="display: flex; align-items: center;">
  <div style="width: 50%; display: flex; flex-direction: column; align-items: center;">
    <img src="./../images/procedurale.png" style="border: 0;" />
    <p>La programmation procédrale</p>
  </div>
  <div style="width: 50%; display: flex; flex-direction: column; align-items: center;">
    <img src="./../images/orientee-objet.png" style="border: 0;" />
    <p>La programmation orientée objet</p>
  </div>
</div>
<h3>Ressources</h3>
<p>Ce petit MON se base sur le <a href="https://francoisbrucker.github.io/cours_informatique/cours/algorithme-code-th%C3%A9orie/code/programmation-objet/">cours de François Brucker</a>.</p>
<h2>Un jeu de bataille</h2>
<p>Dans ce cours j'ai réalisé comme il est suggéré dans le cours de François de Brucker à la section 7 un petit jeu en ligne de commande permettant de faire combatter deux personnages. Je fais ici combattre un magicien contre un nain. Vous pourrez retrouver mon code sur <a href="https://github.com/nbert71/POO-Python">GitHub</a>.</p>
<div style="display: grid; place-items: center;">
  <img src="./../images/gandalf-gimli.png" style="width: 50%;" />
</div>
<h3>La classe Character</h3>
<p>J'ai d'abord commencé par créer une classe Character représentant un personnage avec un nom et nombre de points de vie. Je définis également des méthodes pour récupérer le nom ou le nombre de points de vie et les modifier : ce sont respectivement les getters et les setters. Je crée également une fonction visant à afficher les informations du personnage.</p>
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Character</span><span class="token punctuation">:</span>
    
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> hp<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        self<span class="token punctuation">.</span>__hp <span class="token operator">=</span> hp<span class="token punctuation">;</span>

    <span class="token keyword">def</span> <span class="token function">getName</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__name
    
    <span class="token keyword">def</span> <span class="token function">getHp</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__hp

    <span class="token keyword">def</span> <span class="token function">loseHp</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> damage<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__hp <span class="token operator">-=</span> damage
    
    <span class="token keyword">def</span> <span class="token function">gainHp</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> heal<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__hp <span class="token operator">+=</span> heal

    <span class="token keyword">def</span> <span class="token function">display</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">.</span>__name__  <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>getName<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'- HP : '</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>getHp<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   
</code></pre>
<p>La notation <code>__attribut</code> &quot;permet&quot; de gérer des attributs privés mais ce n'est qu'une facette puisqu'en réalité ces attributs ne sont pas privés. On garde tout de même cette syntaxe et les getters/setters pour respecter le principe Open/Closed (cf <a href="https://francoisbrucker.github.io/do-it/mon/TBi/MON/POO/">MON de Tuncay</a>)</p>
<h3>La classe Dwarf</h3>
<p>J'ai ensuite créé la classe Dwarf qui hérite de la classe Character qui représente un nain. Le nain possède une méthode <em>attack</em> qui enlève 20 points de vie à l'adversaire.</p>
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python"><span class="token keyword">from</span> Character <span class="token keyword">import</span> <span class="token operator">*</span>

<span class="token keyword">class</span> <span class="token class-name">Dwarf</span><span class="token punctuation">(</span>Character<span class="token punctuation">)</span><span class="token punctuation">:</span>
    
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> hp<span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>name<span class="token punctuation">,</span> hp<span class="token punctuation">)</span>  <span class="token comment"># on appelle le constructeur de la classe parente</span>
        self<span class="token punctuation">.</span>__damage <span class="token operator">=</span> <span class="token number">20</span>

    <span class="token keyword">def</span> <span class="token function">display</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>display<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment"># on appelle la méthode display de la classe parente</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"- Damage : "</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>__damage<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">attack</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> player<span class="token punctuation">)</span><span class="token punctuation">:</span>
        player<span class="token punctuation">.</span>loseHp<span class="token punctuation">(</span>self<span class="token punctuation">.</span>__damage<span class="token punctuation">)</span>

</code></pre>
<h3>La classe Magician</h3>
<p>J'ai enfin crée la classe Magician qui hérite elle aussi de la classe Character. Le magicien possède en plus une barre de mana qui lui permet de lancer des sorts. Il possède une méthode attack pour attaquer une autre joueur tout en consommant un peu de sa mana, attention cette méthode ne peut se lancer que si le magicien à encore de la mana. Il dispose aussi d'une méthode pour régénérer ses points de vie.</p>
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python"><span class="token keyword">from</span> Character <span class="token keyword">import</span> <span class="token operator">*</span>

<span class="token keyword">def</span> <span class="token function">checkMana</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> cost<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> self<span class="token punctuation">.</span>getMana<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">>=</span> cost<span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">True</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Vous n'avez pas assez de mana pour lancer ce sort !"</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">False</span>

<span class="token keyword">class</span> <span class="token class-name">Magician</span><span class="token punctuation">(</span>Character<span class="token punctuation">)</span><span class="token punctuation">:</span>

    __spellCost <span class="token operator">=</span> <span class="token number">10</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> hp<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>name<span class="token punctuation">,</span> hp<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>__mana <span class="token operator">=</span> <span class="token number">50</span>
        self<span class="token punctuation">.</span>__damage <span class="token operator">=</span> <span class="token number">10</span>

    <span class="token keyword">def</span> <span class="token function">display</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>display<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"- Mana : "</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>getMana<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"- Spell cost : "</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>__spellCost<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"- Damage : "</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>__damage<span class="token punctuation">)</span><span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">getMana</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__mana

    <span class="token keyword">def</span> <span class="token function">attack</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> player<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> checkMana<span class="token punctuation">(</span>self<span class="token punctuation">,</span> self<span class="token punctuation">.</span>__spellCost<span class="token punctuation">)</span><span class="token punctuation">:</span>
            player<span class="token punctuation">.</span>loseHp<span class="token punctuation">(</span>self<span class="token punctuation">.</span>__damage<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>__mana <span class="token operator">-=</span> self<span class="token punctuation">.</span>__spellCost
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Vous gagner 30 points de mana'</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>__mana <span class="token operator">+=</span> <span class="token number">30</span>
        
    <span class="token keyword">def</span> <span class="token function">heal</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> checkMana<span class="token punctuation">(</span>self<span class="token punctuation">,</span> self<span class="token punctuation">.</span>__spellCost<span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>gainHp<span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>__mana <span class="token operator">-=</span> self<span class="token punctuation">.</span>__spellCost
      
</code></pre>
<p>Les relations entre les classes sont résumées dans le diagramme UML suivant.</p>
<div style="display: grid; place-items: center;">
  <img src="./../images/uml-poo.png" style="border: 0;">
</div>
<h2>La mécanique de jeu</h2>
<p>J'ai ensuite programmé la logique de jeu. Tout d'abord le jeu nous demande de créer nos deux personnages et de leur donner un nom chacun. Ensuite tour à tour, chaque personnage joue. Le combat continue tant que les deux personnages sont encore en vie.</p>
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python"><span class="token keyword">def</span> <span class="token function">play</span><span class="token punctuation">(</span>player1<span class="token punctuation">,</span> player2<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">while</span> player1<span class="token punctuation">.</span>getHp<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span> <span class="token keyword">and</span> player2<span class="token punctuation">.</span>getHp<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">:</span>
        turn<span class="token punctuation">(</span>player1<span class="token punctuation">,</span> player2<span class="token punctuation">)</span>
        <span class="token keyword">if</span> player2<span class="token punctuation">.</span>getHp<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">:</span>
            turn<span class="token punctuation">(</span>player2<span class="token punctuation">,</span> player1

    <span class="token keyword">if</span> player1<span class="token punctuation">.</span>getHp<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">:</span>
        winner <span class="token operator">=</span> player2
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        winner <span class="token operator">=</span> player1
    <span class="token keyword">print</span><span class="token punctuation">(</span>winner<span class="token punctuation">.</span>getName<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' a gagné !'</span><span class="token punctuation">)</span>
</code></pre>
<h2>Conclusion</h2>
<p>Durant ce MON j'ai appris comment faire de la programmation orientée objet en python de manière assez simple. Je vois également et cela se ressent à la pratique, que Python n'est pas un langage très adapté pour l'orienté objet. En effet, il n'y a pas de notions de public ou privé, tout est public ce qui va un peu à l'encontre des principes de la POO. De plus, le fait qu'il ne soit pas un langage typé ne facilte pas les choses. J'ai cependant pu expérimenter la POO en Python.</p>


</article>

    </main>

    <footer class="min-h-[50px] border-t-2 border-gray-200 mt-4">
      <div class="max-w-[1000px] mx-auto px-4">
        <div class="min-h-[50px] flex justify-center items-center">
          <p>
            do-it : option de troisième année à l'école centrale Marseille
          </p>
        </div>
      </div>
    </footer>

    <script>
      MathJax
        .startup
        .document
        .getMathItemsWithin(document.body);
    </script>

  </body>
</html>
