<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Création d&#39;un site web avec Eleventy</title>

    <link href="/do-it/assets/node_modules/prismjs/themes/prism-solarizedlight.min.css" rel="stylesheet">
    <link href="/do-it/assets/node_modules/prismjs/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet">

    <link href="/do-it/assets/stylesheets/main.css" rel="stylesheet">
  </head>
  <body>
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [
            [
              '$', '$'
            ],
            [
              '\\(', '\\)'
            ]
          ]
        },
        svg: {
          fontCache: 'global'
        }
      };
    </script>
    

    <header class="border-b-2 border-gray-200 mb-4">
      <div class="max-w-[1000px] mx-auto px-4">
        <div class="min-h-[50px] flex justify-between items-center">
          <a class="mx-2" href="/do-it/">Home</a>
          <a class="mx-2" href="/do-it/about">About</a>
        </div>
      </div>
    </header>

    <main class="max-w-[1000px] mx-auto px-4">

      
<article>
  <h1 class="mb-1">Création d'un site web avec Eleventy</h1>
  <div class="mb-4">
    
      <div class=" px-4 flex items-center">
        
          <div class="font-bold">Tag : </div>
        
        <ul class="flex not-prose list-none my-0 last:after:content-['•'] last:after:px-1 mx-0 px-1">
          
            <li class="before:content-['•'] before:px-1">eleventy</li>
          
        </ul>
      </div>
    

    
      <div class=" px-4 flex items-center">
        
          <div class="font-bold">Auteur : </div>
        
        <ul class="flex not-prose list-none my-0 last:after:content-['•'] last:after:px-1 mx-0 px-1">
          
            <li class="before:content-['•'] before:px-1">Nathan Gissler</li>
          
        </ul>
      </div>
    
  </div>

  

  <!-- début résumé -->
<p>Dans ce MON j'apprends à utiliser Eleventy pour la création de sites web statiques.</p>
<!-- fin résumé -->
<h2>1. Sites statiques et dynamiques</h2>
<h3>Sites statiques</h3>
<p>Les sites statiques ont été les premiers à exister. Toutes les informations et fichiers sont stockés directement sur le serveur et sont transmis au navigateur lorsque l'utilisateur cherche à accéder à telle ou telle partie du site.</p>
<h3>Sites dynamiques</h3>
<p>Les sites dynamiques vont également traiter les données transmises par l'utilisateur (mots-clés d'une recherche, géolocalisation...), contrairement aux sites statiques. Ce traitement se fait par un autre serveur, qui héberge l'application. Ce serveur communique avec un troisième serveur, la base de données, qui contient toutes sortes de données utilisées par le site.</p>
<h3>Les générateurs de sites statiques</h3>
<p>Les générateurs de sites statiques permettent de créer des sites qui restent au final des sites statiques, mais qui sont plus faciles à créer et à maintenir par le développeur que des sites statiques codés de A à Z. Cela passe notamment par des templates qui sont communs à plusieurs pages du site, et qui sont utilisés pour générer ces pages avant la mise en ligne du site.</p>
<p>Ces générateurs simplifient le travail du développeur mais le résultat reste un site statique classique  du point de vue de l'utilisateur car tous les fichiers sont de toute façon générés puis stockés sur le serveur.</p>
<h2>2. Installation d'Eleventy</h2>
<p>Eleventy est un générateur de sites statiques. Il permet de générer plus facilement les pages de sites comme celui-ci grâce à des templates, entre autres fonctionnalités.</p>
<p>L'utilisation d'Eleventy nécessite node.js et npm. On l'installe avec la commande suivante :</p>
<pre><code>npm install -g @11ty/eleventy
</code></pre>
<h2>3. Fonctionnalités</h2>
<h3>Templates</h3>
<p>Eleventy fonctionne avec des "templating engines" qui permettent de modifier certaines données du site à un seul endroit même si elles sont utilisées à plusieurs endroits (par exemple le titre d'une page).</p>
<p>Une des syntaxe qui existe avec Eleventy est la syntaxe liquid, elle est utilisée dans les fichiers HTML et Markdown. On place les données (titre de la page, noms de fichiers, etc.) en en-tête du fichier sous cette forme :</p>
<pre><code>---
title: Giffleball
images:
  - ???.jpg
  - ….jpg
  - parrot.gif
---
</code></pre>
<p>Ces données peuvent ensuite être utilisée au sein du fichier (ici en HTML) de cette manière :</p>
<p><img src="utilisation_titre.png" alt="Utilisation du titre"></p>
<p>Ou encore comme ceci pour la liste d'images :</p>
<p><img src="liste_images.png" alt="Liste d'images"></p>
<p>De cette manière les données doivent seulement être modifiées dans l'en-tête et plus dans chaque élément de la page.</p>
<p><code>url_encode</code> est un filtre d'Eleventy qui permet d'éviter des erreurs avec les caractères spéciaux dans les noms de fichier, c'est un autre avantage des templates.</p>
<p>Remarque : attention quand on parle d'Eleventy sur un site qui fonctionne avec Eleventy, les textes entre doules accolades sont remplacés même si on les met entre `` ou dans un bloc de code (je n'ai pas trouvé d'autre moyen que de mettre des images).</p>
<h3>Filtres</h3>
<p>Les filtres peuvent servir à différentes choses, ils peuvent se créer de cette manière, dans un fichier <code>.eleventy.js</code> :</p>
<pre><code>module.exports = (function(eleventyConfig) {
    eleventyConfig.addFilter("nom_du_filtre", function(argument) {
        /* code */
        return "valeur retournée";
    });
});
</code></pre>
<p>Ils s'utilisent ensuite dans un fichier HTML comme ceci :</p>
<p><img src="utilisation_filtre.png" alt="Utilisation d'un filtre"></p>
<h3>Layouts</h3>
<p>Un layout est un fichier Nunjucks que l'on crée de cette manière : <code>src/_includes/nom_du_layout.njk</code></p>
<p>Ce fichier est constitué comme le fichier HTML d'une page de notre site, excepté que l'on peut par exemple remplacer le titre par :</p>
<p><img src="title.png" alt="Title"></p>
<p>Et le contenu de la page par :</p>
<p><img src="content.png" alt="Content"></p>
<p>Ces informations seront ensuite renseignées dans un fichier Markdown situé dans <code>/src</code> : <code>/src/index.md</code>.</p>
<pre><code>---
layout: nom_du_layout.njk
title: Titre de la page
---

Contenu de la page
</code></pre>
<p>Ce fichier correspond à une page de notre site qui utilise le layout nom_du_layout.njk. Lors de la génération du site, les informations comme le titre ou le contenu seront placés dans le code HTML du fichier Nunjucks pour créer un fichier HTML classique. La force des layouts est bien entendu qu'ils peuvent être utilisés pour de nombreuses pages, telles que des posts de blog, qui se présenteront sous la même forme et pourront être créées très simplement dans un fichier Markdown.</p>
<p>On peut également appliquer un layout à toutes les pages d'un dossier en leur appliquant un tag avec ce type de fichier JSON :</p>
<pre><code>{
"layout": "base.njk",
"tags": "articles"
}
</code></pre>
<h3>Paginations</h3>
<p>Les paginations servent à créer plusieurs page en itérant sur des données (qui peuvent être de plusieurs types).</p>
<p>On peut par exemple créer plusieurs pages du même format en itérant sur un fichier JSON :</p>
<ul>
<li>Fichier JSON contenant les données à utiliser (placé dans <code>_data</code>)</li>
</ul>
<p><img src="fichier_json.png" alt="Fichier JSON"></p>
<ul>
<li>Fichier Nunjucks qui définit le format des fichiers à générer</li>
</ul>
<p><img src="fichier_nunjucks.png" alt="Fichier Nunjucks"></p>
<ul>
<li>Résultat (créé dans un dossier <code>portraits</code> avec les pages correspondant aux autres données du JSON)</li>
</ul>
<p><img src="portrait.png" alt="Page affichée"></p>
<p>On remarque que l'on peut choisir le lien auquel on trouvera les pages générées.</p>
<h2>4. Création d'un site</h2>
<p>On peut commencer par saisir ces commandes dans le dossier du projet :</p>
<pre><code>npm init -y
npm i --save-dev @11ty/eleventy
</code></pre>
<p>Puis placer les lignes suivantes dans le <code>"scripts"</code> du <code>package.json</code> :</p>
<pre><code>"scripts": {
    "start": "eleventy --serve",
    "build": "eleventy"
}
</code></pre>
<p>On crée le .eleventy.js avec le code suivant :</p>
<pre><code>module.exports = function(eleventyConfig) {
    return {
        dir: {
            input: "src",
            output: "public"
        }
    };
};
</code></pre>
<p>On crée le <code>src/_includes</code> qui va contenir les fichiers Nunjucks de templates.</p>
<p>On crée notre <code>index.md</code>, puis un fichier CSS qu'on lie au fichier Nunjucks (comme à un fichier HTML classique).</p>
<p>On ajoute également cette ligne au <code>.eleventy.js</code> :</p>
<pre><code>eleventyConfig.addPassthroughCopy("./src/style.css");
</code></pre>
<p>Le site peut être lancé localement avec la commande <code>npm start</code>.</p>
<p>Je me suis aidé de <a href="https://www.youtube.com/watch?v=BKdQEXqfFA0">cette courte vidéo</a> pour créer un <a href="https://github.com/nathan-gissler/cours-eleventy">petit site</a> (sur GitHub) avec Eleventy. Cela a bien fonctionné, cependant j'ai remarqué que le style de mon fichier CSS ne s'appliquait pas à mes articles (équivalent des posts de la vidéos) alors que le layout s'applique sans problème, et le fichier CSS est lié à ce layout (le fichier <code>base.njk</code>). Ce problème semble être aussi présent dans l'exemple de la vidéo.</p>
<h2>5. Liens</h2>
<p>Pour ce MON j'ai lu <a href="https://www.zachleat.com/web/eleventy-tutorial-level-1/">ce tutoriel</a> à propos des templates liquid et des filtres avec Eleventy. Cependant seules les deux premières parties semblent avoir été écrites, je n'ai pas trouvé la suite censée aborder les templates multiples, layouts et fichiers de données externes.</p>
<p><a href="https://www.tatianamac.com/posts/beginner-eleventy-tutorial-parti/">Ce tutoriel</a> ne semble pas être complet non plus mais j'ai pu me renseigner sur les sites statiques, dynamiques et statiques générés grâce à la première partie.</p>
<p><a href="https://www.11ty.dev/docs/pages-from-data/">Les paginations</a> dans la documentation d'Eleventy.</p>
<p><a href="https://www.youtube.com/watch?v=BKdQEXqfFA0">Une vidéo</a> très courte qui montre les bases de la création d'un site avec Eleventy et de l'utilisation des layouts.</p>
<p>J'ai créé <a href="https://github.com/nathan-gissler/cours-eleventy">ce petit site</a> (sur GitHub) en suivant les instructions de la vidéo pour tester les fonctionnalités par moi-même.</p>


</article>

    </main>

    <footer class="min-h-[50px] border-t-2 border-gray-200 mt-4">
      <div class="max-w-[1000px] mx-auto px-4">
        <div class="min-h-[50px] flex justify-center items-center">
          <p>
            do-it : option de troisième année à l'école centrale Marseille
          </p>
        </div>
      </div>
    </footer>

    <script>
      MathJax
        .startup
        .document
        .getMathItemsWithin(document.body);
    </script>

  </body>
</html>
