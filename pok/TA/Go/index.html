
<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <title>POK Thibault Adelain - Autres - Go</title>

    <link href=/do-it/assets/node_modules/prismjs/themes/prism-solarizedlight.min.css rel="stylesheet">
    <link href=/do-it/assets/node_modules/prismjs/plugins/line-numbers/prism-line-numbers.min.css rel="stylesheet">

    <link href=/do-it/assets/stylesheets/main.css rel="stylesheet">
  </head>
  <body>
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [
            [
              '$', '$'
            ],
            [
              '\\(', '\\)'
            ]
          ]
        },
        svg: {
          fontCache: 'global'
        }
      };
    </script>
    <script type="text/javascript" id="MathJax-script" 
  src=/do-it/assets/node_modules/mathjax/es5/tex-svg-full.js></script>

    <header class="border-b-2 border-gray-200 mb-4">
      <div class="max-w-[1000px] mx-auto px-4">
        <div class="min-h-[50px] flex justify-between items-center">
          <a class="mx-2" href="/do-it/">Home</a>
          <a class="mx-2" href="/do-it/about">About</a>
        </div>
      </div>
    </header>

    <main class="max-w-[1000px] mx-auto px-4">

      
<article>
  <h1  class="mb-1">POK Thibault Adelain - Autres - Go</h1>
  <div class="mb-4">
    

    
      <div class=" px-4 flex items-center">
        
          <div class="font-bold">Auteur : </div>
        
        <ul class="flex not-prose list-none my-0 last:after:content-['•'] last:after:px-1 mx-0 px-1">
          
            <li class="before:content-['•'] before:px-1">Thibault Adelain</li>
          
        </ul>
      </div>
    
  </div>

  

  <h2>Objectifs</h2>
<ul>
<li>Prendre en main le langage Go dont :
<ul>
<li><s>Prise en main</s></li>
<li><s>Premiers programmes</s></li>
<li><s>Tests</s></li>
<li><s>REST API</s></li>
</ul>
</li>
</ul>
<h2>Go</h2>
<p>Le langage <a href="https://go.dev/">Go</a>, également connu sous le nom de Golang, est un langage de programmation open source conçu par Google en 2007. Go est un langage de programmation compilé, qui se concentre sur la simplicité, la sécurité et la rapidité d'exécution des programmes. Par exemple, Go intègre des vérifications de sécurité lors de la compilation, telles que la gestion des pointeurs, pour éviter les erreurs de segmentation et les bugs de mémoire (comme les dépassements piles). Go offre également des fonctionnalités pour la programmation concurrente (vous pouvez écrire des programmes qui exécutent plusieurs tâches simultanément), qui peuvent aider à éviter les conflits d'accès aux données. Go a été conçu pour être facile à apprendre, avec une syntaxe simple et concise. Je n'ai eu aucun mal à à prendre en main Go venant de python.</p>
<p><a href="https://go.dev/doc/faq">D'après les créateurs</a>, Go a été conçu pour combiner la facilité de programmation d'un langage interprété à typage dynamique avec l'efficacité et la sécurité d'un langage compilé à typage statique. Go devait être fiable, rapide à écrire et surtout à exécuter. Voici quelques objectifs que les développeurs ont voulu atteindre :</p>
<ul>
<li>un système de types expressif mais léger</li>
<li>la concurrence et la collecte de déchets</li>
<li>la spécification rigide des dépendances</li>
<li>etc</li>
</ul>
<p>Go est aussi connu pour sa grande efficacité, avec un temps de compilation et d'exécution rapide. Vous pouvez retrouver les cas d'utilisation classiques <a href="https://go.dev/solutions/use-cases">ici</a>.</p>
<h2>Tutos pour débuter</h2>
<p>Tutos sur la <a href="https://go.dev/doc/tutorial/">doc officielle</a> dont :</p>
<ul>
<li><a href="https://go.dev/doc/tutorial/getting-started">Getting started</a></li>
<li><a href="https://go.dev/doc/tutorial/fuzz">Getting started with fuzzing</a></li>
<li><a href="https://go.dev/doc/tutorial/web-service-gin">Developing a RESTful API with Go and Gin</a></li>
<li><a href="https://go.dev/tour/welcome/1">A tour of Go</a></li>
</ul>
<h2>Quelques examples</h2>
<h4>REST API</h4>
<p><a href="https://go.dev/doc/tutorial/web-service-gin">Tuto</a></p>
<p>Le développement web avec Gin ressemble beaucoup à Flask. C'est un framework minimal qui laisse beaucoup de liberté au développeur. Il est donc très facile et rapide de développer une API basique avec gin, mais lorsque le projet grandi, cela demande une certaine méthode/expérience pour organiser le projet pour qu'il reste maintenable.</p>
<p><em>Note: pour un ORM avec Go : voir <a href="https://github.com/go-gorm/gorm">GORM</a>.</em></p>
<p>Exemple :</p>
<pre class="language-go " style="counter-reset: linenumber 0"><code class="language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
 <span class="token string">"github.com/gin-gonic/gin"</span>
 <span class="token string">"net/http"</span>
 <span class="token string">"strconv"</span>
<span class="token punctuation">)</span>

<span class="token keyword">var</span> count_user <span class="token operator">=</span> <span class="token number">0</span>

<span class="token keyword">type</span> User <span class="token keyword">struct</span> <span class="token punctuation">{</span>
 ID     <span class="token builtin">int</span>    <span class="token string">`json:"id"`</span>
 Name   <span class="token builtin">string</span> <span class="token string">`json:"name"`</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> users <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>User<span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">NewUser</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> User <span class="token punctuation">{</span>
 count_user<span class="token operator">++</span>
 <span class="token keyword">return</span> User<span class="token punctuation">{</span>count_user<span class="token punctuation">,</span> name<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

 router <span class="token operator">:=</span> gin<span class="token punctuation">.</span><span class="token function">Default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 router<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">"/users"</span><span class="token punctuation">,</span> getUsers<span class="token punctuation">)</span>
 router<span class="token punctuation">.</span><span class="token function">GET</span><span class="token punctuation">(</span><span class="token string">"/user/:id"</span><span class="token punctuation">,</span> getUserByID<span class="token punctuation">)</span>
 router<span class="token punctuation">.</span><span class="token function">POST</span><span class="token punctuation">(</span><span class="token string">"/createUser"</span><span class="token punctuation">,</span> postUser<span class="token punctuation">)</span>

 router<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"localhost:5080"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">getUsers</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 c<span class="token punctuation">.</span><span class="token function">IndentedJSON</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> users<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">postUser</span><span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">var</span> NewUser User

 err <span class="token operator">:=</span> c<span class="token punctuation">.</span><span class="token function">BindJSON</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>NewUser<span class="token punctuation">)</span>
 <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span>
 <span class="token punctuation">}</span>

 users <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>users<span class="token punctuation">,</span> NewUser<span class="token punctuation">)</span>
 count_user<span class="token operator">++</span>
 c<span class="token punctuation">.</span><span class="token function">IndentedJSON</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> NewUser<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> getUserByID <span class="token punctuation">(</span>c <span class="token operator">*</span>gin<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 id <span class="token operator">:=</span> c<span class="token punctuation">.</span><span class="token function">Param</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span>

 <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> user <span class="token operator">:=</span> <span class="token keyword">range</span> users <span class="token punctuation">{</span>
  <span class="token keyword">if</span> strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>ID<span class="token punctuation">)</span> <span class="token operator">==</span> id <span class="token punctuation">{</span>
   c<span class="token punctuation">.</span><span class="token function">IndentedJSON</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusOK<span class="token punctuation">,</span> user<span class="token punctuation">)</span>
   <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
 c<span class="token punctuation">.</span><span class="token function">IndentedJSON</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusNotFound<span class="token punctuation">,</span> gin<span class="token punctuation">.</span>H<span class="token punctuation">{</span><span class="token string">"message"</span><span class="token punctuation">:</span> <span class="token string">"User not found"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Comme vous pouvez le voir, créer une application web basique se fait en quelques lignes de code.</p>
<h4>Test avec Fuzzing</h4>
<p><a href="https://go.dev/doc/tutorial/fuzz">Tuto</a></p>
<p>Tester son programme est essentiel. Le fuzzing est une méthode permettant de tester son programme avec un grand nombre d'entrée aléatoires. Attention, tester son programme avec un Fuzzer ne dispense pas des tests unitaires. En effet, vous ne pourrez pas contrôler l'entrée et la sortie avec le fuzzing, vous pouvez seulement vérifier des pattern, contrairement aux tests unitaires ou vous pourrez avoir une vision entrée/sortie.</p>
<p>Le fuzzing permet toutefois d'explorer des chemins qui n'ont pas été prévus par le développeur lors de la conception de l'app, et donc de débogguer des programmes / de corriger des vulnérabilités. C'est donc un outil supplémentaire pour tester nos codes.</p>
<p>Je vous laisse suivre le <a href="https://go.dev/doc/tutorial/fuzz">tuto</a> pour plus de détails.</p>
<h4>Programmation objet</h4>
<p>Personnellement, venant du python/C++, j'ai dû m'adapter à une programmation objet complètement différente.</p>
<p>Go et C++ sont deux langages de programmation avec des approches différentes en matière de programmation orientée objet.</p>
<p>La programmation orientée objet en Go est basée sur la définition et l'utilisation de types structurés et d'interfaces. Contrairement à d'autres langages de programmation orientée objet, Go n'a pas de notion de classes.</p>
<p>Un exemple pour comprendre :</p>
<pre class="language-go " style="counter-reset: linenumber 0"><code class="language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">type</span> Animal <span class="token keyword">interface</span> <span class="token punctuation">{</span>
 <span class="token function">isScared</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">bool</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Cat <span class="token keyword">struct</span> <span class="token punctuation">{</span>
 Name <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Dog <span class="token keyword">struct</span> <span class="token punctuation">{</span>
 Name <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c Cat<span class="token punctuation">)</span> <span class="token function">isScared</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>d Dog<span class="token punctuation">)</span> <span class="token function">isScared</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">isScared</span><span class="token punctuation">(</span>a Animal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
 fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">isScared</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

 catty <span class="token operator">:=</span> Cat<span class="token punctuation">{</span><span class="token string">"Catty"</span><span class="token punctuation">}</span>
 doggy <span class="token operator">:=</span> Dog<span class="token punctuation">{</span><span class="token string">"Doggy"</span><span class="token punctuation">}</span>

 <span class="token function">println</span><span class="token punctuation">(</span>doggy<span class="token punctuation">.</span><span class="token function">isScared</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// method of doggy instance of Dog</span>
 <span class="token function">println</span><span class="token punctuation">(</span>catty<span class="token punctuation">.</span><span class="token function">isScared</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// method of catty instance of Cat</span>

 <span class="token function">isScared</span><span class="token punctuation">(</span>catty<span class="token punctuation">)</span> <span class="token comment">// interface Animal</span>
 <span class="token function">isScared</span><span class="token punctuation">(</span>doggy<span class="token punctuation">)</span> <span class="token comment">// interface Animal</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Jusque là, rien de bien différent de la programmation objet classique, à part que l'on définit des types au lieu de classes. Chaque type à une méthode isScared.</p>
<p>Maintenant, voyons le concept d'interface. Les interfaces sont définies comme une collection de méthodes, où chaque méthode spécifie le nom de la fonction et le type de retour attendu.</p>
<p>Dans l'exemple ci-dessus, on a définit une fonction isScared sur l'interface animal pour savoir si l'animal est peureux ou non.</p>
<p><em>Note : Lorsqu'un type implémente toutes les méthodes définies dans une interface, il est considéré comme implémentant cette interface. Cela signifie que le type peut être utilisé de manière interchangeable dans le code qui utilise cette interface. Cette approche permet de créer du code générique qui peut être utilisé avec n'importe quel type qui implémente l'interface.</em></p>
<p>Autre exemple :</p>
<p>Supposons que nous avons une interface Shape qui définit une méthode Area() et une méthode Perimeter() pour calculer l'aire et le périmètre d'une forme. Supossons également que nous avons deux types Rectangle et Circle qui implémentent l'interface Shape.</p>
<pre class="language-go " style="counter-reset: linenumber 0"><code class="language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
 <span class="token string">"fmt"</span>
 <span class="token string">"math"</span>
<span class="token punctuation">)</span>

<span class="token keyword">type</span> Shape <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">Area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">float64</span>
    <span class="token function">Perimeter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">float64</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Rectangle <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    width<span class="token punctuation">,</span> height <span class="token builtin">float64</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>r Rectangle<span class="token punctuation">)</span> <span class="token function">Area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">float64</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> r<span class="token punctuation">.</span>width <span class="token operator">*</span> r<span class="token punctuation">.</span>height
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>r Rectangle<span class="token punctuation">)</span> <span class="token function">Perimeter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">float64</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span>r<span class="token punctuation">.</span>width <span class="token operator">+</span> r<span class="token punctuation">.</span>height<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Circle <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    radius <span class="token builtin">float64</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c Circle<span class="token punctuation">)</span> <span class="token function">Area</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">float64</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> math<span class="token punctuation">.</span>Pi <span class="token operator">*</span> c<span class="token punctuation">.</span>radius <span class="token operator">*</span> c<span class="token punctuation">.</span>radius
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c Circle<span class="token punctuation">)</span> <span class="token function">Perimeter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">float64</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">2</span> <span class="token operator">*</span> math<span class="token punctuation">.</span>Pi <span class="token operator">*</span> c<span class="token punctuation">.</span>radius
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> s Shape
    s <span class="token operator">=</span> Rectangle<span class="token punctuation">{</span>width<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Rectangle Area:"</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span><span class="token function">Area</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Rectangle Perimeter:"</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span><span class="token function">Perimeter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    s <span class="token operator">=</span> Circle<span class="token punctuation">{</span>radius<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">}</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Circle Area:"</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span><span class="token function">Area</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Circle Perimeter:"</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span><span class="token function">Perimeter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Dans cet exemple, nous utilisons une variable de type Shape qui peut stocker des instances des types Rectangle ou Circle. Nous pouvons  appeler les méthodes Area() et Perimeter() sur ces instances.</p>
<p>Aussi, Go ne supporte pas l'overloading. Je vous renvoie à la <a href="https://go.dev/doc/faq#overloading">faq</a> pour savoir pourquoi.</p>
<p>C'est un peu perturbant, mais je suis sûr que l'on peut vite s'y faire.</p>
<p>Go se défend en avançant des avantages par rapport à C++. Par exemple, Go dispose d'un ramasse-miettes automatique (garbage collector) intégré, qui permet de gérer automatiquement la mémoire allouée aux objets, évitant ainsi les fuites de mémoire et les problèmes de corruption de la mémoire qui peuvent survenir en C++.</p>
<h2>Ressenti</h2>
<p>J'ai trouvé que le langage Go était plutôt facile à prendre en main venant de python. De mon point de vue, il a une syntaxe simple et intuitive, et j'ai eu plus de faciliter avec Go qu'avec Rust par exemple. Je pense que pour mes projets futurs qui nécessiteront des performances élevées, je n'hésiterai pas à utiliser Go.</p>


</article>

    </main>

    <footer class="min-h-[50px] border-t-2 border-gray-200 mt-4">
      <div class="max-w-[1000px] mx-auto px-4">
        <div class="min-h-[50px] flex justify-center items-center">
          <p>
            do-it : option de troisième année à l'école centrale Marseille
          </p>
        </div>
      </div>
    </footer>

    <script>
      MathJax
        .startup
        .document
        .getMathItemsWithin(document.body);
    </script>

  </body>
</html>
