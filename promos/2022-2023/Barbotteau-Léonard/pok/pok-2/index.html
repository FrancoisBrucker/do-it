
<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Mon sheet c&#39;est moi : suite et déploiement</title>

        <link href="/do-it/assets/node_modules/prismjs/themes/prism-solarizedlight.min.css" rel="stylesheet">
        <link href="/do-it/assets/node_modules/prismjs/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet">

        <link href="/do-it/assets/stylesheets/main.css" rel="stylesheet">
    </head>
    <body>
        <script>
        window.MathJax = {
            tex: {
            inlineMath: [
                [
                '$', '$'
                ],
                [
                '\\(', '\\)'
                ]
            ]
            },
            svg: {
            fontCache: 'global'
            }
        };
        </script>
        <script type="text/javascript" id="MathJax-script" src="/do-it/assets/node_modules/mathjax/es5/tex-svg-full.js"></script>

        <header class="border-b-2 border-gray-200 mb-4">
        <div class="max-w-[1000px] mx-auto px-4">
            <div class="min-h-[50px] flex justify-between items-center">
                <a class="mx-2" href="/do-it/">Home</a>
                <div class="flex items-center gap-4 sm:gap-6 ">
                    <a class="" href="/do-it/cs">CS</a>
                    <a class="" href="/do-it/pok">POK</a>
                    <a class="" href="/do-it/mon">MON</a>
                    <a class="" href="/do-it/projets">Projets</a>
                    <a class="hidden sm:block" href="/do-it/promos">Promos</a>
                    <a href="/do-it/search">
                        <svg class="h-5 aspect-square" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path>
                        </svg>
                    </a>
                    <a class="hidden sm:block" href="https://github.com/FrancoisBrucker/do-it" target="_blank">
                        <svg class="h-5 aspect-square" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg>
                    </a>
                </div>
            </div>
        </div>
        </header>

        <main class="max-w-[1000px] mx-auto px-4" data-pagefind-body="">
            
<article class="relative">
<h1 class="mb-1">Mon sheet c&#39;est moi : suite et déploiement</h1>
<div class="mb-4">
    
        <div class="px-4 flex flex-wrap items-center">
            
                <div class="font-bold">Tags : </div>
            
            <ul class="flex flex-wrap overflow-auto not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Tags">
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">POK</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">2022-2023</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">temps 2</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">web</li>
                

            </ul>
            
            
            <div class="hidden" data-pagefind-meta="Type">
                
                    
                
                    
                
                    
                
                    
                
            </div>
        </div>
    

    
        <div class="px-4 flex flex-wrap items-center">
            <div class="font-bold">Auteurs : </div>
            <ul class="flex flex-wrap not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Auteurs">
                
                    <li class="bg-blue-200 rounded-full px-2" data-pagefind-filter="Auteurs">Léonard Barbotteau</li>
                
                    <li class="bg-blue-200 rounded-full px-2" data-pagefind-filter="Auteurs">Nathan Gissler</li>
                
            </ul>
        </div>
    

    
</div>



    
<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-purple-500 bg-purple-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-purple-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"></path>
</svg>
<div class="pl-8 mr-8">

<a href="/do-it/promos/">Promotions</a><span class="px-1">/</span><a href="/do-it/promos/2022-2023/">2022-2023</a><span class="px-1">/</span><a href="/do-it/promos/2022-2023/Barbotteau-Léonard/">Léonard Barbotteau</a><span class="px-1">/</span><a href="/do-it/promos/2022-2023/Barbotteau-Léonard/pok/">POK de Léonard</a><span class="px-1">/</span><a href="/do-it/promos/2022-2023/Barbotteau-Léonard/pok/pok-2/">Mon sheet c&#39;est moi : suite et déploiement</a>

</div></div>




<!-- début résumé -->
<p>Mon sheet c'est moi, suite du développement du site et déploiement sur un serveur distant (POK-Temps 2)</p>
<!-- fin résumé -->
<h2>1.1 Objectifs primordiaux du POK</h2>
<ul>
<li>
<p>Déploiement sur le serveur du site développé au temps 1</p>
</li>
<li>
<p>Ecrire le back du site en node. Cette étape nécessitera une documentation approfondie en raison de nos connaissances précaires en la matière</p>
</li>
<li>
<p>Faire une base de données en SQLite</p>
</li>
<li>
<p>Faire le lien entre le back, le site et la base de données</p>
</li>
</ul>
<h2>1.2 Objectifs optionnels du POK</h2>
<p>Ces objectifs seront réalisés si nous avons le temps après avoir fini les objectifs précédents.</p>
<ul>
<li>
<p>Améliorer le front du site, notamment son apparence et réaliser des finitions</p>
</li>
<li>
<p>Rajouter des fonctionnalités à la partition de musique</p>
</li>
</ul>
<h2>2.1 Tâches du premier sprint à réaliser d'ici le mercredi 07/12.</h2>
<ul>
<li>
<p>Déployer le site sur ovh</p>
</li>
<li>
<p>Commencer l'écriture du back après avoir pris en main les outils (node / express a priori)</p>
</li>
<li>
<p>Commencer la base de données (avec SQLite a priori)</p>
</li>
</ul>
<h2>2.2 Réalisations du premier sprint.</h2>
<p>Nous avons pu à l'aide des premières connaissances acquises par nos MON commencé à améliorer le site et le pousser sur un serveur distant. Nous avons comme prévu déployé le site sur le serveur et commencé à travailler avec Express et SQLite, mais le temps nécessaire pour acquérir des connaissances au fur et à mesure a fait que nous n'avons pas encore pu beaucoup avancer.</p>
<h3>Déploiement du site sur le serveur ovh</h3>
<p>Le site est déployé sur l'herbe de Provence de Nathan (Thym), on peut y accéder à cette adresse : <a href="http://thym.ovh1.ec-m.fr/mon-sheet-cest-moi/static/index.html">http://thym.ovh1.ec-m.fr/mon-sheet-cest-moi/static/index.html</a>, sans express pour le moment.</p>
<p>Nous avons rencontré quelques difficultés avec l'installation de xz (qui permet de compresser des archives avec la méthode Lzma), nous avons donc pour l'instant envoyé sur le serveur l'archive contenant le site directement.</p>
<h3>Express</h3>
<p>Nous avons commencé à utiliser Express : gestion des routes et accès au site en local. Les fichiers du site sont mieux structurés (notamment avec le dossier static) et un fichier index.js nous permet de controler le back-end.</p>
<h3>Base de données</h3>
<p>En ce qui concerne la base de données, nous avons un tableau pour les utilisateurs et un tableau pour les partitions enregistrées. Chaque partition appartient à un utilisateur (que l'on retrouve avec son ID) et possède un élément JSON qui correspond aux notes de la partition. Il reste à pouvoir alimenter la base de données en utilisant le back-end.</p>
<h2>Tâches du deuxième sprint</h2>
<ul>
<li>
<p>Faire fonctionner Express sur ovh</p>
</li>
<li>
<p>Faire fonctionner la base de données</p>
</li>
<li>
<p>Gérer l'édition de partition en temps réel avec Meteor</p>
</li>
</ul>
<h2>2.2 Réalisations du second sprint.</h2>
<p>A l'aide de nos MON mais également des cours nous avons pu continuer à travailler et faire avancer le site. Nous avons bien avancé mais ne sommes pas au bout de nos peines, si tant est que nous soyions amenés à poursuivre le projet.</p>
<h3>La base de données</h3>
<p>Nous étions parti pour réaliser la base de données avec le modules sqlite3, cependant sur avis de M.Brucker nous avons décidé de partir sur l'utilisation de sequelize, avec MySQL.
Nous avons mieux organisé les fichiers du site afin de créer des routes claires pour associer le front, le back et la BDD de la meilleure manière possible.
Nous nous sommes inspiré d'une architecture déjà existante, d'un utlisateur github utilisant sequelize et Express, dont le projet est ici : <a href="https://github.com/FaisonsLePoint/api_rest_express">Un exemple Github utilisant Sequelize avec Express</a>.
Nous avons également apprécié les explications de Hugo Guillaume, ingénieur diplomé de Centrale Marseille.
Le site ne fonctionne pas encore à cause d'erreurs sur la base de données lorsque l'on tente d'envoyer des requêtes au back depuis le front, mais on peut voir la lumière au bout du tunnel.</p>
<h3>Meteor</h3>
<p>J'ai trouvé un <a href="https://blog.jscrambler.com/meteor-framework-hardest-part-coming-app-name-2">exemple d'utilisation de Meteor</a> pour créer un éditeur de texte collaboratif. Le cas de l'éditeur de texte est beaucoup plus classique que le nôtre mais j'ai décidé de commencer par reproduire cet exemple pour comprendre le fonctionnement du framework.</p>
<p>Cependant, j'ai été confronté à des difficultés lors de l'installation de Meteor. Une version de Node inférieure à 14 est requise alors que la version 16 est installée chez moi. J'ai donc entrepris d'installer nvm (Node version manager) afin de pouvoir changer de version de Node plus facilement. J'ai réussi à l'installer mais je ne suis pas parvenu à changer la version de Node, ce qui m'a bloqué pour l'utilisation de Meteor.</p>
<h3>Express sur ovh</h3>
<p>En parallèle, j'avais comme objectif de faire fonctionner la gestion des routes sur ovh avec Express (ce qui fonctionnait déjà en local). J'ai également été bloqué, cette fois par le transfert de fichiers sur ovh. Le désarchivage du fichier <code>tar</code> avec la commande <code>tar -xvf mon-sheet-cest-moi.tar</code> ne faisait plus apparaître le dossier désarchivé, que ce soit localement ou sur ovh.</p>


</article>

        </main>


        <footer class="min-h-[50px] border-t-2 border-gray-200 mt-4">
            <div class="max-w-[1000px] mx-auto px-4">
                <div class="min-h-[50px] flex justify-center items-center">
                    <p class="text-center">
                        <span style="font-family: Consolas, sans-serif;">Do_<span style="color: #4a86e8">It</span></span> : Développent et Organisation en IT
                    </p>
                </div>
            </div>
        </footer>

        <script>
        MathJax
            .startup
            .document
            .getMathItemsWithin(document.body);
        </script>

    </body>
</html>
