
<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Unix</title>

        <link href="/do-it/assets/node_modules/prismjs/themes/prism-solarizedlight.min.css" rel="stylesheet">
        <link href="/do-it/assets/node_modules/prismjs/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet">

        <link href="/do-it/assets/stylesheets/main.css" rel="stylesheet">
    </head>
    <body>
        <script>
        window.MathJax = {
            tex: {
            inlineMath: [
                [
                '$', '$'
                ],
                [
                '\\(', '\\)'
                ]
            ]
            },
            svg: {
            fontCache: 'global'
            }
        };
        </script>
        <script type="text/javascript" id="MathJax-script" src="/do-it/assets/node_modules/mathjax/es5/tex-svg-full.js"></script>

        <header class="border-b-2 border-gray-200 mb-4">
        <div class="max-w-[1000px] mx-auto px-4">
            <div class="min-h-[50px] flex justify-between items-center">
                <a class="mx-2" href="/do-it/">Home</a>
                <div class="flex items-center gap-4 sm:gap-6 ">
                    <a class="" href="/do-it/cs">CS</a>
                    <a class="" href="/do-it/pok">POK</a>
                    <a class="" href="/do-it/mon">MON</a>
                    <a class="" href="/do-it/projets">Projets</a>
                    <a class="hidden sm:block" href="/do-it/promos">Promos</a>
                    <a href="/do-it/search">
                        <svg class="h-5 aspect-square" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path>
                        </svg>
                    </a>
                    <a class="hidden sm:block" href="https://github.com/FrancoisBrucker/do-it" target="_blank">
                        <svg class="h-5 aspect-square" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg>
                    </a>
                </div>
            </div>
        </div>
        </header>

        <main class="max-w-[1000px] mx-auto px-4" data-pagefind-body="">
            
<article class="relative">
<h1 class="mb-1">Unix</h1>
<div class="mb-4">
    
        <div class="px-4 flex flex-wrap items-center">
            
                <div class="font-bold">Tags : </div>
            
            <ul class="flex flex-wrap overflow-auto not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Tags">
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">MON</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">2022-2023</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">temps 2</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">unix</li>
                

            </ul>
            
            
            <div class="hidden" data-pagefind-meta="Type">
                
                    
                
                    
                
                    
                
                    
                
            </div>
        </div>
    

    
        <div class="px-4 flex flex-wrap items-center">
            <div class="font-bold">Auteurs : </div>
            <ul class="flex flex-wrap not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Auteurs">
                
                    <li class="bg-blue-200 rounded-full px-2" data-pagefind-filter="Auteurs">Nathan Gissler</li>
                
            </ul>
        </div>
    

    
</div>



    
<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-purple-500 bg-purple-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-purple-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"></path>
</svg>
<div class="pl-8 mr-8">

<a href="/do-it/promos/">Promotions</a><span class="px-1">/</span><a href="/do-it/promos/2022-2023/">2022-2023</a><span class="px-1">/</span><a href="/do-it/promos/2022-2023/Gissler-Nathan/">Nathan Gissler</a><span class="px-1">/</span><a href="/do-it/promos/2022-2023/Gissler-Nathan/mon/">MONs de Nathan GISSLER</a><span class="px-1">/</span><a href="/do-it/promos/2022-2023/Gissler-Nathan/mon/mon-2-2/">Unix</a>

</div></div>




<!-- début résumé -->
<p>Pour ce MON, je vais apprendre à utiliser les commandes Unix utiles.</p>
<!-- fin résumé -->
<h2>Ressources utilisées</h2>
<p>Pour apprendre les commandes shell Unix, j'ai utilisé ce <a href="https://www.tutorialspoint.com/unix/unix-getting-started.htm">tutoriel</a>, accessibles pour les débutants avec Unix.</p>
<p>Les commandes peuvent être testées même si l'on n'est pas sous unix, sur <a href="https://www.tutorialspoint.com/codingground.htm">ce site</a> (inscription gratuite). Cependant, je n'ai pas réussi à créer de compte (l'email ne s'envoyait pas). J'ai donc utilisé <a href="https://bellard.org/jslinux/vm.html?url=alpine-x86.cfg&amp;mem=192">ce site</a> à la place.</p>
<h2>Connexion</h2>
<p>Changer de mot de passe</p>
<p>passwd</p>
<p>Savoir avec quel login on est connecté</p>
<p>whoami</p>
<p>Savoir qui est connecté (plusieurs utilisateurs peuvent être connectés en même temps)</p>
<p>users</p>
<p>ou</p>
<p>who</p>
<p>ou</p>
<p>w</p>
<p>Les deux derniers sont plus détaillés</p>
<p>Déconnexion</p>
<p>logout</p>
<h2>Gestion des fichiers</h2>
<p>Lister les fichiers et dossiers dans le répertoire courant</p>
<p>ls</p>
<p>Ajouter <code>-l</code> pour plus d'informations</p>
<p>Informations par colonne :</p>
<ul>
<li>type de fichier et permissions</li>
<li>nombre de blocs mémoire occupés</li>
<li>propriétaire (créateur) du fichier</li>
<li>groupe auquel ce dernier appartient</li>
<li>taille du fichier en bits</li>
<li>date et heure de dernière modification</li>
<li>nom</li>
</ul>
<h3>Comment lire la première colonne ?</h3>
<p>Le premier caractère indique le type de fichier :</p>
<ul>
<li><code>\-</code> : fichier classique</li>
<li><code>b/c</code> : fichiers spéciaux</li>
<li><code>d</code> : répertoire</li>
<li><code>l</code> : fichier redirigeant vers un autre fichier</li>
<li><code>p/s</code> : autres types de fichiers spéciaux</li>
</ul>
<p>Les 9 autres caractères représentent les permissions associées au fichier, elles sont détaillées plus loin.</p>
<h3>Métacaractères</h3>
<p>Des métacaractères peuvent être utilisés dans les commandes pour remplacer des caractères : <code>?</code> pour exactement un caractère ou <code>*</code> pour n'importe quel nombre de caractères (qui peut être 0).</p>
<p>Exemples :</p>
<p>$ls ch?.doc</p>
<p>Liste les fichiers dont le nom est de la forme <code>ch?.doc</code>, où <code>?</code> représente un seul caractère.</p>
<p>$ls ch*.doc</p>
<p>Liste tous les fichiers dont le nom commence par <code>ch</code> et finit par <code>.doc</code></p>
<h3>Fichiers cachés</h3>
<p>Les fichiers cachés peuvent être listés avec l'option <code>-a</code>.</p>
<p><code>ls -a</code> liste tous les fichiers cachés, dont le nom commence par <code>.</code>, ainsi que le fichier <code>.</code> qui représente le répertoire actuel et le fichier <code>..</code> qui représente le répertoire parent.</p>
<h3>Création et modification de fichiers</h3>
<p>Pour ouvrir un fichier ou le créer s'il n'existe pas :</p>
<p>vi nomdufichier</p>
<p>Une fois le fichier ouvert, on peut utiliser :</p>
<ul>
<li><code>l</code> pour se déplacer dans le fichier vers la droite</li>
<li><code>h</code> pour se déplacer vers la gauche</li>
<li><code>k</code> pour se déplacer vers le haut</li>
<li><code>j</code> pour se déplacer vers le bas</li>
<li><code>i</code> pour rentrer en mode édition et modifier réellement le fichier</li>
<li><code>esc</code> pour sortir du mode édition</li>
<li><code>Shift + ZZ</code> (deux fois <code>Z</code>) pour fermer le fichier</li>
</ul>
<h3>Autres opérations sur les fichiers</h3>
<p>Afficher le contenu :</p>
<p>cat nomdufichier</p>
<p>On peut ajouter <code>-b</code> pour avoir les numéros de lignes.</p>
<p>Compter les lignes/mots (il est possible de mettre plusieurs noms de fichier à la suite) :</p>
<p>wc nomdefichier</p>
<p>Valeurs renvoyées :</p>
<ul>
<li>nombre de lignes</li>
<li>nombre de mots</li>
<li>taille en bits</li>
<li>nom du fichier</li>
</ul>
<p>Copier un fichier :</p>
<p>cp nomdufichier nomdelacopie</p>
<p>Renommer un fichier (le fichier est en fait remplacé par un nouveau avec le nom spécifié) :</p>
<p>mv anciennom nouveaunom</p>
<p>Supprimer un fichier :</p>
<p>rm nomdufichier</p>
<p>On peut ajouter <code>-i</code> pour qu'une confirmation soit demandée avant la suppression.</p>
<h2>Répertoires</h2>
<p>Se déplacer dans un autre répertoire :</p>
<p>cd répertoire</p>
<p>Le répertoire peut être désigné par :</p>
<ul>
<li>un chemin absolu commençant par <code>/</code></li>
<li>un chemin relatif sans <code>/</code> au début</li>
<li><code>~</code> pour le &quot;home directory&quot;</li>
<li><code>~username</code> pour le &quot;home directory&quot; d'un autre utilisateur</li>
<li><code>-</code> pour le répertoire précédent</li>
</ul>
<p>Se situer dans l'arborescence :</p>
<p>pwd</p>
<p>Lister les fichiers du répertoire :</p>
<p>ls</p>
<p>Auquel on peut ajouter un nom de répertoire si on ne veut pas le répertoire courant.</p>
<p>Créer un répertoire :</p>
<p>mkdir nomdurépertoire</p>
<p>On peut aussi utiliser un chemin relatif ou absolu, et créer plusieurs répertoires d'un coup. Si le chemin utilise des répertoires inexistants il faut ajouter l'option <code>-p</code> pour ne pas avoir d'erreur et que ces répertoires soient créés.</p>
<p>Supprimer un répertoire :</p>
<p>rmdir nomdurépertoire</p>
<p>Supprime un ou plusieurs répertoires, qui doivent être vides
renommer, comme pour les fichiers.</p>
<p>mv anciennom nouveaunom</p>
<h3>Répertoires spéciaux</h3>
<p>Les fichiers <code>.</code> et <code>..</code> représentent respectivement le répertoire courant et le répertoire parent (on peut les voir avec <code>ls -la</code>), on peut donc remmonter au répertoire parent avec <code>cd ..</code>, par exemple.</p>
<h2>Permissions</h2>
<p>Les permissions associées aux fichiers sont représentées par 9 caractères, sous cette forme : <code>rwxrwxrwx</code>.</p>
<ul>
<li><code>r</code> signifie <code>read</code> et représente la permission de lire le contenu du fichier</li>
<li><code>w</code> signifie <code>write</code> représente la permission de modifier le contenu du fichier</li>
<li><code>x</code> signifie <code>execute</code> et représente la permission d'exécuter le fichier</li>
</ul>
<p>Pour un répertoire, <code>r</code> et <code>w</code> représentent la possibilité de voir et d'ajouter/supprimer des fichiers dans le répertoire. <code>x</code> permet à l'utilisateur d'utiliser <code>ls</code> et <code>cd</code>
dans la représentation <code>rwxrwxrwx</code>, chaque groupe de trois caractères représentent les permissions accordées à un type d'utilisateur :</p>
<ol>
<li>le propriétaire</li>
<li>les membres du groupe associé au fichier</li>
<li>les autres utilisateurs</li>
</ol>
<p>Une permission qui n'est pas accordée est représentée par <code>-</code>
par exemple, <code>rwx--x---</code> signifie que le propriétaire a toutes les permissions sur le fichier, que les membres du groupe associé peuvent l'exécuter, et que les autres utilisateurs n'ont aucune permission.</p>
<p>Modifier les permissions :</p>
<p>chmod</p>
<p>On ajoute à la commande :</p>
<ul>
<li><code>u</code> (propriétaire), <code>g</code> (groupe) ou <code>o</code> (autres utilisateurs)</li>
<li><code>+</code> (ajouter telles permissions), <code>-</code> (supprimer telles permissions) ou <code>=</code> (définir les permissions de telle manière)</li>
<li>les lettres correspondant aux permissions correspondantes
on peut les permissions de plusieurs groupes d'utilisateurs en même temps</li>
</ul>
<p>Par exemple :</p>
<p>En partant des permissions <code>r--rwx--x</code> et avec la commande <code>chmod u+x, g-rw, o = wx fichier</code>, on obtient les permissions <code>r-x--x-wx</code>.</p>
<p>On peut également utiliser <code>chmod 513 fichier</code> avec la numérotation suivante (où les permissions fonctionnent comme les représentations binaires des nombres associés) :</p>
<ul>
<li>0 pour <code>---</code></li>
<li>1 pour <code>--x</code></li>
<li>2 pour <code>-w-</code></li>
<li>3 pour <code>-wx</code></li>
<li>4 pour <code>r--</code></li>
<li>5 pour <code>r-x</code></li>
<li>6 pour <code>rw-</code></li>
<li>7 pour <code>rwx</code></li>
</ul>
<p>Changer le propriétaire ou le groupe :</p>
<p>chown utilisateur fichier(s)</p>
<p>chgrp groupe fichier(s)</p>
<p><code>utilisateur</code> et <code>groupe</code> peuvent être remplacés par le nom ou l'ID correspondant.</p>
<p>Seul le propriétaire d'un fichier peut changer sa propriété (ou le super utilisateur <code>root</code> qui a toutes les permissions).</p>
<h2>Environnement</h2>
<p>Créer une variable d'environnement :</p>
<p>variable=&quot;contenu&quot;</p>
<p>Accéder au contenu d'une variable d'environnement :</p>
<p>echo $variable</p>
<p>Au lancement, le shell lit deux fichiers (s'ils existent) afin d'initialiser l'environnement : <code>/etc/profile</code>, géré par l'administrateur de la machine, et <code>.profile</code>, situé dans le &quot;home directory&quot; de l'utilisateur et pouvant être modifié par lui. Le fichier <code>.profile</code> nous permet d'initialiser notre environnement comme on le souhaite pour chaque démarrage du shell
type de terminal.</p>
<p>L'un des paramètres nécessaires au shell pour démarrer est le type de terminal, qui se trouve dans la variable d'environnement <code>TERM</code>. le shell peut ne pas reconnaître les commandes si ce paramètre est mal renseigné, on peut alors s'en sortir en définissant notre type de terminal de cette manière :</p>
<p>TERM=vt100</p>
<p>Cette valeur est une sorte de dénominateur commun.</p>
<h3>Répertoire(s) des commandes</h3>
<p>Les répertoires contenant les commandes pouvant être utilisées par le terminal sont stockés dans la variable <code>PATH</code>, par exemple
<code>PATH=/bin:/usr/bin</code>.</p>
<p><code>:</code> sépare des répertoires, ici cela correspond donc aux répertoires <code>/bin</code> et <code>/usr/bin</code>.</p>
<h3>Modification du texte d'invite de commande (command prompt)</h3>
<p>Le texte d'invite de commande est stocké dans la variable <code>PS1</code> et peut être modifié.</p>
<p>Quelques variables utiles peuvent être utilisées dans cette chaîne de caractère :</p>
<ul>
<li><code>\t</code> pour l'heure en HH:MM:SS</li>
<li><code>\d</code> pour la date</li>
<li><code>\n</code> pour aller à la ligne</li>
<li><code>\s</code> pour l'environnement du shell</li>
<li><code>\W</code> pour le répertoire actuel</li>
<li><code>\w</code> pour le répertoire actuel (chemin complet)</li>
<li><code>\u</code> pour le nom d'utilisateur</li>
<li><code>\h</code> pour l'hôte de la machine</li>
<li><code>\#</code> pour le numéro de la commande actuelle</li>
<li><code>\$</code> pour le symbole $, ou # si on est connecté en tant que <code>root</code></li>
</ul>
<p>La variable <code>PS2</code> fonctionne de la même manière et contient les caractères d'invite de commande secondaire, apparaissant lors de commandes incomplètes.</p>
<p>Il existe un certain nombre d'autres variables d'environnement importantes utilisées par le shell pour gérer les chemins, les fuseaux horaires, générer des nombres aléatoires, etc.</p>
<h2>Impression de fichiers</h2>
<p>La commande <code>pr</code> permet de reformater un fichier avant de l'afficher (sans altérer le fichier lui-même), et ce avec différentes options (affichage en colonnes, ajout d'un en-tête, modification des marges...).</p>
<p>La commande <code>lp</code> (ou <code>lpr</code>) permet ensuite d'imprimer le fichier sur papier.</p>
<p><code>lpstat</code> et <code>lpq</code> donnent des informations sur la file d'attente d'impression.</p>
<p><code>cancel</code> et <code>lprm</code> permettent d'annule une ou plusieurs impressions.</p>
<p>Les commandes d'impressions n'étaient pas reconnues par le shell que j'utilisais, probablement parce que c'est un shell en ligne. Je ne les ai donc pas testées.</p>
<h2>Envoie d'emails</h2>
<p>La commande <code>mail adresse_destinataire</code> permet d'envoyer des emails.</p>
<p>On peut ajouter un objet (option <code>-s</code>), des cc (<code>-c</code>) et bcc (<code>-b</code>).</p>
<p>Le texte de l'email s'écrit ensuite avec <code>ctrl-D</code> en début de ligne et <code>.</code> en fin de message.</p>
<p>On peut voir les emails reçus avec la commande <code>mail</code> seule.</p>
<p>La commande <code>mail</code> n'était pas reconnue, comme les commandes d'impression.</p>
<h2>&quot;Pipes&quot; et filtres</h2>
<p>Une &quot;pipe&quot; consiste à encaîner plusieurs commande en une seule ligne. on sépare pour cela les commande avec <code>|</code> et la sortie d'une commande devient l'entrée de la suivante.</p>
<p>La commande <code>grep</code> permet de rechercher des séquences de caractères (ou expressions régulières) dans les noms de fichiers et d'afficher les lignes correspondantes. Elle peut être combinée à <code>ls</code> pour ne pas avoir à spécifier les fichiers parmi lesquels chercher :</p>
<p>ls | grep &quot;séquence à rechercher&quot;</p>
<p>Il existe plusieurs options supplémentaires à cette commande
la commande <code>sort</code> permet de trier par ordre alphabétique les lignes d'un fichier. Plusieurs options existent (pour trier numériquement, inverser l'ordre, ou encore ne pas prendre en compte la casse).</p>
<h2>Processus</h2>
<p>Toutes les tâches exécutées sous Unix fonctionnent avec des processus. Dès que l'on lance une une commande dans le shell, un processus est créé. Chaque processus possède un identifiant unique à cinq chiffres (<code>pid</code>).</p>
<p>Les processus sont exécutés au premier plan par défaut mais peuvent aussi exécutés en arrière plan en ajoutant <code>&amp;</code> à la fin de la commande. Un processus exécuté en arrière plan n'empêche pas d'autres processus de s'exécuter lorsqu'il attend une réponse de l'utilisateur contrairement aux processus au premier plan. Il attendra simplement d'être remis au premier plan et d'avoir une réponse.</p>
<p>On peut afficher la liste des processus en cours avec la commande ps (on peut ajouter <code>-f</code> pour plus d'informations).</p>
<p>Tuer un processus</p>
<p>On peut tuer un processus au premier plan avec <code>ctrl-C</code>, mais pour un processus en arrière plan, il faut récupérer son <code>pid</code> puis exécuter <code>kill pid</code> (en ajoutant <code>-9</code> si cela ne fonctionne pas).</p>
<p>Chaque processus a un parent, désigné par le <code>ppid</code> (parent process ID).</p>
<p>La commande <code>top</code> est une commande permettant de visualiser les processus de manière plus intéractive.</p>
<h2>Communication</h2>
<p>On peut tester les connexions dans un réseau auquel on est connecté avec la commande <code>ping</code> à laquelle on ajoute le nom de l'hôte ou l'adresse IP.</p>
<p>Il existe d'autres outils de communication que l'on peut utiliser dans le shell, tels que <code>ftp</code> pour transférer des fichiers ou telnet pour travailler sur une machine à distance.</p>
<h2>Scripts</h2>
<p>Il est également possible de ne pas se limiter à de simples commandes et d'écrire des scripts composés de suites d'instructions et exécutables par le shell. Je n'aurai pas le temps de détailler cette partie.</p>


</article>

        </main>


        <footer class="min-h-[50px] border-t-2 border-gray-200 mt-4">
            <div class="max-w-[1000px] mx-auto px-4">
                <div class="min-h-[50px] flex justify-center items-center">
                    <p class="text-center">
                        <span style="font-family: Consolas, sans-serif;">Do_<span style="color: #4a86e8">It</span></span> : Développent et Organisation en IT
                    </p>
                </div>
            </div>
        </footer>

        <script>
        MathJax
            .startup
            .document
            .getMathItemsWithin(document.body);
        </script>

    </body>
</html>
