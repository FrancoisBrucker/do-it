
<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title> B.A-BA Application Web : Comprendre et Mettre en place un Backend </title>

        <link href="/do-it/assets/node_modules/prismjs/themes/prism-solarizedlight.min.css" rel="stylesheet">
        <link href="/do-it/assets/node_modules/prismjs/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet">

        <link href="/do-it/assets/stylesheets/main.css" rel="stylesheet">
    </head>
    <body>
        <script>
        window.MathJax = {
            tex: {
            inlineMath: [
                [
                '$', '$'
                ],
                [
                '\\(', '\\)'
                ]
            ]
            },
            svg: {
            fontCache: 'global'
            }
        };
        </script>
        <script type="text/javascript" id="MathJax-script" src="/do-it/assets/node_modules/mathjax/es5/tex-svg-full.js"></script>

        <header class="border-b-2 border-gray-200 mb-4">
        <div class="max-w-[1000px] mx-auto px-4">
            <div class="min-h-[50px] flex justify-between items-center">
                <a class="mx-2" href="/do-it/">Home</a>
                <div class="flex items-center gap-4 sm:gap-6 ">
                    <a class="" href="/do-it/cs">CS</a>
                    <a class="" href="/do-it/pok">POK</a>
                    <a class="" href="/do-it/mon">MON</a>
                    <a class="" href="/do-it/projets">Projets</a>
                    <a class="hidden sm:block" href="/do-it/promos">Promos</a>
                    <a href="/do-it/search">
                        <svg class="h-5 aspect-square" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path>
                        </svg>
                    </a>
                    <a class="hidden sm:block" href="https://github.com/FrancoisBrucker/do-it" target="_blank">
                        <svg class="h-5 aspect-square" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg>
                    </a>
                </div>
            </div>
        </div>
        </header>

        <main class="max-w-[1000px] mx-auto px-4" data-pagefind-body="">
            
<article class="relative">
<h1 class="mb-1"> B.A-BA Application Web : Comprendre et Mettre en place un Backend </h1>
<div class="mb-4">
    
        <div class="px-4 flex flex-wrap items-center">
            
                <div class="font-bold">Tags : </div>
            
            <ul class="flex flex-wrap overflow-auto not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Tags">
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">MON</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">2022-2023</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">temps 3</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">backend</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">bdd</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">typescript</li>
                

            </ul>
            
            
            <div class="hidden" data-pagefind-meta="Type">
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </div>
        </div>
    

    
        <div class="px-4 flex flex-wrap items-center">
            <div class="font-bold">Auteurs : </div>
            <ul class="flex flex-wrap not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Auteurs">
                
                    <li class="bg-blue-200 rounded-full px-2" data-pagefind-filter="Auteurs">Tuncay Bilgi</li>
                
            </ul>
        </div>
    

    
</div>



    
<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-purple-500 bg-purple-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-purple-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"></path>
</svg>
<div class="pl-8 mr-8">

<a href="/do-it/promos/">Promotions</a><span class="px-1">/</span><a href="/do-it/promos/2022-2023/">2022-2023</a><span class="px-1">/</span><a href="/do-it/promos/2022-2023/Bilgi-Tuncay/">Tuncay Bilgi</a><span class="px-1">/</span><a href="/do-it/promos/2022-2023/Bilgi-Tuncay/mon/">MON de Tuncay Bilgi</a><span class="px-1">/</span><a href="/do-it/promos/2022-2023/Bilgi-Tuncay/mon/Backend/"> B.A-BA Application Web : Comprendre et Mettre en place un Backend </a>

</div></div>




<!-- début résumé -->
<p>MON Débutant.</p>
<p>Savoir comment fonctionne une application Web et enfin le lexique obscure des développeurs. Mettre en place sa propre application complexe.</p>
<!-- fin résumé -->
<p>Ce MON est un cours sur le Développement Web, il se concentre sur ce qu'on appelle le Backend. Vous pourrez y apprendre la théorie et aussi la pratique avec la mise en place de votre propre application.</p>
<p>Dans ce MON, nous allons voir comment mettre en place une application complète, avec une interface, base de données et un service de création de compte. Je vous présenterai les grands principes d'une application web, et plus précisément, comment structurer un Backend pour qu'il soit maintenable et lisible.
Le but est d'apprendre à structurer un Backend proprement.</p>
<div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-red-500 bg-red-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-red-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Je vous présente une manière de faire les choses, il y en à d'autres et je ne garantie pas que la mienne soit parfaite.Aussi,je ne me préoccupe pas de programmation par les tests.</p>
</div></div>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Mots clés expliqués dans ce cours</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<ul>
<li>Frontend, Backend, Base de données</li>
<li>Framework</li>
<li>HTML,CSS,JS</li>
<li>style,layout</li>
<li>API, REST, ORM, CRUD</li>
<li>Requêtes</li>
</ul>
</div>
</details>     
</div>
<h3>Ressources :</h3>
<ul>
<li>
<p>Les documentations :</p>
<ul>
<li><a href="https://nodejs.org/en">Nodejs</a></li>
<li><a href="https://expressjs.com/fr/">Expressjs</a></li>
<li><a href="https://typeorm.io/">TypeORM</a></li>
<li><a href="https://fr.reactjs.org/">React</a></li>
</ul>
</li>
<li>
<p>Les MON associés :</p>
<ul>
<li><a href="https://francoisbrucker.github.io/do-it/mon/AV/mons/web-front-1/">MON web frontend</a></li>
<li><a href="https://francoisbrucker.github.io/do-it/mon/TBi/MON/Docker/">MON Docker</a></li>
</ul>
</li>
<li>
<p>Code source :</p>
<ul>
<li><a href="https://github.com/TuncayBilgi/cybersecenv">Mon github</a></li>
</ul>
</li>
</ul>
<h3>Prérequis :</h3>
<ul>
<li>Pour la théorie : Avoir un ordinateur, une connexion internet, l'eau courante</li>
<li>Pour la pratique : Avoir une première expérience avec le développement web.</li>
</ul>
<h3>Étapes :</h3>
<ul>
<li>Comment marche une application web</li>
<li>Architecture du BackEnd</li>
<li>Initialisation du projet :
<ul>
<li>Frontend</li>
<li>Backend</li>
<li>Base de données</li>
</ul>
</li>
<li>Mise en place d'une entités Account</li>
<li>Mise en place de la création d'un account</li>
</ul>
<h2>Comment marche une application web:</h2>
<h3>De quoi est constituée une application web ?</h3>
<p>Pour notre application, nous avons besoin de trois briques :
Frontend - Backend - Base de données</p>
<p>Ces trois parties ont leurs rôle bien défini :</p>
<ul>
<li>
<p>Le Frontend est la partie du code qui est présentée à l'utilisateur. C'est le programme qui va afficher ce que l’utilisateur voit et ce avec quoi il va interagir. Le Frontend est envoyé à l'utilisateur, il est donc exécuté par sa propre machine. Quand vous afficher une page sur internet, c'est votre ordinateur qui fait le travail d'afficher les boutons, de regarder quels boutons sont cliqués, de changer de page etc...</p>
</li>
<li>
<p>Le Backend est la partie du code qui manipule les fonctionnalités complexes, et qui ne concernent pas directement l'affichage. C'est le programme qui va exécuter des fonctions qui permettent de répondre aux attentes de l'utilisateur. Le backend reste sur le serveur, il est exécuté par celui-ci, contrairement au frontend. Si vous avez une application web qui propose d'interagir avec une IA, l'utilisateur va interagir à travers le frontend, mais l'IA elle même, sera gérée par le Backend.</p>
</li>
<li>
<p>La base de donnée, qui permet de stocker des données persistantes. Elle reste sur le serveur, et encor plus, on veut qu'elle soit impénétrable, car nous voulons conserver et cacher les données importantes à notre systèmes, ou les données privées qui concernent nos utilisateurs.</p>
</li>
</ul>
<p>Ces parties communiquent entre elles à travers ce qu'on appelle des requêtes. Le frontend envoie des requêtes au backend, qui lui répond, en lui envoyant une réponse. Pour écrire cette réponse, le backend peut aller chercher des données dans la base de données. Pour ce faire, il va la questionner, avec langage spécifique comme du SQL par exemple.</p>
<h4>Exemple à la mode en 2023 - ChatGPT :</h4>
<p>L'utilisateur interagit avec une page qui permet de poser une question à l'IA ChatGPT. Cette page est le frontend, qui est exécutée par son ordinateur. Quand il rentre sa question et qu'il appuie sur le bouton envoyer, son ordinateur va envoyer une requête au Backend de CHatGPT, qui tourne sur les serveurs de OpenAI.</p>
<p>Ce backend, va récupérer la question, et la passer à travers l'IA pour avoir une réponse. Il va ensuite renvoyer cette réponse au frontend pour qu'elle soit affichée à l'utilisateur. Enfin, quand l'utilisateur à fini d'interagir, le backend va formatter les données de l'utilisateur : Le nom de compte, la question posée, la réponse renvoyée etc.. et il va placer ces données dans la base de données pour qu'elles y restent longtemps.</p>
<p>La prochaine fois que l'utilisateur vient sur le site de ChatGPT, sans qu'il ait besoin d'interagir, le front va envoyer une requête au back, qui lui demande de récupérer les données de l’utilisateur, le back s’exécute , va chercher ce qu'il faut dans la base de données, et les donnes au frontend pour que cela soit affiché et que l'utilisateur puisse reprendre une ancienne conversation.</p>
<h3>Les attentes différentes remplies par les trois parties d'une application :</h3>
<p>Ces trois parties ayant des rôles bien différents, leurs code n'a rien à voir. Coder du Frontend ne ressemble pas à coder du backend, on n'utilise pas les mêmes fonctions, on ne se pose pas les mêmes questions, et parfois, on n'utilise même pas le même langage de programmation.
Par exemple :</p>
<ul>
<li>Le frontend à besoin d'être du code qui puisse être lu par les navigateurs web.</li>
<li>Le backend à besoin d'être du code relativement efficace, qui réalise le travail sans gaspiller de ressources et de façon consistante pour tous les utilisateurs.</li>
<li>La Base de données doit pouvoir être questionnée, on doit pouvoir y retrouver les informations nécessaires facilement.</li>
</ul>
<p>Pour répondre à ces besoins différents, on utilise d'abords des langages différents :</p>
<ul>
<li>Les navigateurs ne comprennent que le HTML, le CSS, le JavaScript et le Webassembly, il est donc impératif de choisir ses langages.</li>
<li>Pour être efficace, on utilise des langages orientés objet, stables, qui s’exécutent rapidement, et qui sont potentiellement typés. On utilise le plus souvent du Javascript, du Typescript, du php, du Java, du C# ou dans une moindre mesure, du Python.</li>
<li>Les bases de données communiquent à travers un langage : souvent du SQL ou du grapheQL. Elles ont cependant toutes leurs particularités et pour cela elles modifie le langage de base, on dit qu'elles utilisent un dialect.</li>
</ul>
<p>Aussi, pour répondre à ses besoins, on utilise des principes différents :</p>
<ul>
<li>Pour le frontend, on pense à l'UI/UX et à la légèreté de l'application. On veut envoyer le strict nécessaire à l'utilisateur pour que ça s'affiche vite.</li>
<li>Pour le Backend, on veut de l'efficacité, des temps d'executions bas, la possibilité de gérer des centaines d'utilisateurs simultanés de façon sécurisée. Pour cela, on pense à l’algorithmie et à la cybersécurité.</li>
</ul>
<h3>En pratique :</h3>
<h4>Les langages :</h4>
<p>Comme dit plus haut, différents besoins, différents langages.
Voici quelques langages couramment utilisés, et une introduction sur leur fonctionnement.</p>
<ul>
<li>
<p>HTML,CSS :
Ce couple forme un langage qui permet d'afficher des pages sur un navigateur web.
Le html décrit le Layout, c'est à dire toutes les données qui seront affichées, et ouù elles seront affichés. Par exemple une page contient un titre, un paragraphe, un bouton en bas de page etc...
Le CSS décrit le style avec lequel ces données sont affichées. On y décrit quels sont les tailles des paragraphes, la couleur des boutons, la police utilisée etc..</p>
</li>
<li>
<p>Javascript (Js) :
Langage incontournable du développement web. Le javascript sert en premier lieux à injecter de l'interactivité dans les pages web. Il à le mérite d'être un des seuls langages que tous les navigateurs comprennent, avec les deux citées plus haut. Si un bouton doit incrémenter un compteur, si il faut envoyer une requête au backend, cela se fera avec du javascript. Ce langage est aussi utilisé pour du Backend.</p>
</li>
<li>
<p>Python :
Le python à le mérite d'être simple à appréhender. Il possède des librairies qui facilitent d'autant plus la création de site web. Malheureusement, ce n'est pas un langage compris par les navigateurs web, il n'est donc utilisé que pour le backend. Sont utilisation est cependant restreinte. En effet, le langage est lent est gourmand en ressources, l'inverse de ce dont en a besoin en Backend.</p>
</li>
<li>
<p>Typescript (ts) :
langage récent qui est un Superset du Js. C'est à dire que c'est du Javascript avec des fonctionnalités en plus. Ces fonctionnalités sont principalement les types. Ts est donc un langage typé, c'est à dire que pour définir une variable, il faut lui donner un type qui ne peut pas être changé. Ce langage est utilisé autant en Front qu'en Back puisque qu'il est compilé en Javascript. C'est à dire qu'à partir du code en TS, un compilateur va créer un nouveau code en Js. Ce langage est de plus en plus utilisé par les développeur javascript car il facilite le développement.</p>
</li>
<li>
<p>JSON :
Format de données utilisé par les applications web pour communiquer.</p>
</li>
</ul>
<h4>Les API :</h4>
<p>Pour communiquer entre eux, le Backend et le frontend utilisent des requêtes.
Une requête est un message que le Front va envoyer au Back, ce message va enclencher une fonction dans le back qui finalement, envoie une réponse au front.</p>
<p>Pour pouvoir échanger des requêtes, les programmes doivent être d'accord sur le format des données à échanger. Un de ces format et l'API.
Une API REST est un ensemble de message, que le navigateur peut envoyer à un serveur. Le serveur, si il implémente cette API, doit être en mesure de recevoir le message, de le comprendre et de répondre.</p>
<p>Les API REST s'articulent autour de deux principaux types de messages : GET | POST
Le GET permet au Frontend d'indiquer au Back qu'il lui demande une information. Cela peut être une information de la base de donnée ou une information qui résulte d'in traitement.</p>
<p>Le POST permet au Frontend d'envoyer une donnée au Back, qui pourra ensuite la traiter et l'envoyer à la base de donnée si nécessaire.</p>
<p>Pour que le serveur puissent traiter les requêtes, ils doivent mettre en place des fonctions qui execute la requête. Par exemple si le front demande de créer un nouvel utilisateur à partir d'un nom et d'un mot de passe, le back doit avoir une fonction qui prend un nom et un mot de passe et qui créer un utilisateur avec.
Ces fonction essentielles appartiennent au CRUD : Create READ Update Delete. Le serveur doit savoir faire les 4 pour dire qu'il implémente une API Rest (ou Restful pour l'adjectif).</p>
<p>Faire ce CRUD pour chaque type de données différentes dans le back est d'un ennui mortel, heureusement, il existe des frameworks, qui le font automatiquement pour nous.</p>
<h4>Les frameworks :</h4>
<p>Toutes les applications web possèdent des points communs. Elles proposent par exemple un programme qui tourne en continue et qui écoute les requêtes d'un utilisateur, elles permettent à l’utilisateur de cliquer sur une page et que ce clique soit pris en compte etc..</p>
<p>Au lieu de réinventer la roue depuis zéro et de coder ces fonctionnalités à chaque application, les développeurs ont inventés ce qu'on appelle un framework.</p>
<p>Les frameworks sont des environnements de programmation. L'équivalent d'une librairie python. Il permettent de mettre en place rapidement tout ce qui est nécessaire au programme que l'on veut coder.</p>
<p>Il y a des frameworks pour le frontend, des frameworks pour le backend et enfin des frameworks qui allient les deux ensembles, ce qu'on appelle un Meta Framework.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Frameworks Front</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
</div>
</details>     
</div>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Frameworks Back</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
</div>
</details>     
</div>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Meta Frameworks</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
</div>
</details>     
</div>
<p>Les Frameworks sont <strong>opinionated</strong> à un certains degré. C'est à dire qu'ils ont une opinion sur les manières de faire. Par exemple, faut-il séparer clairement certains composant où les utiliser ensemble ? Faut-il écrire une fonction d'une manière ou d'une autre ?</p>
<p>Il est important de choisir un framework dont on supporte les opinions car si on essaye d'aller contre le framework, cela complique énormément la tâche du codeur, alors que l'on veut la faciliter.
Certains frameworks sont par conception très libre. Il y a par exemple Node.js, qui laisse une immense libertés aux utilisateurs. C'est le framework à la base de tous les autres Framework backend et frontend javascript, à la base de npm.</p>
<p>Pour gérer quels frameworks on utilise, les installer, les mettre à jour etc... on utilise npm. Les commandes npm sont rentrées dans le terminale de commande et permettent gérer nos projets.</p>
<p>Par exemple si je crée un projet avec certains frameworks, et que quelqu'un veut l'utiliser, il doit d'abord tout installer de la même manière que je l'ai fait sur mon ordinateur. Pour faciliter la tâche, il existe <code>npm install</code> qui permet de faire ça d'un coup, magiquement.</p>
<h5>Exemples :</h5>
<ul>
<li>Frontend :</li>
</ul>
<p><a href="https://francoisbrucker.github.io/do-it/mon/NB/mes-mon/react/">ReactJS</a> et <a href="https://francoisbrucker.github.io/do-it/mon/TBi/MON/Angular/">Angular</a> nous proposent de créer des composants, qui seront insérés dans une page html et envoyés à l'utilisateur. Ils ont des opinions différentes.</p>
<p>Angular prône une séparation totale des fonctions. La page html ne s'occupe que de l'affichage, le fichier js (javascript) s'occupe de l’interactivité. Chaque composant est défini par une classe et on doit donc faire attentions à certaines problématiques lié à cela. La communication entre le html et le js est gérée par des fonctions propre à Angular.</p>
<p>React prône plus de flexibilité. Les pages sont en jsx, qui est une fusion de html et de js. Cette page affiche des composants qui sont aussi en jsx et on peut y placer si nécessaire l’interactivité. Aussi, les composants sont des fonctions, et ils interagissent entre avec des hooks, des fonctions préconstruites.</p>
<p>Comme on peut le voir, les deux frameworks répondent aux mêmes besoins, d'une manière (parfois subtilement) différente.</p>
<ul>
<li>Backend :</li>
</ul>
<p>Sequelize et TypeORM sont deux ORMS différents. Un ORM est un framework qui permet de connecter les fonctions ou les objets das notre programme, aux données dans une base de données.</p>
<p>Sequelize nous permet de faire cela en js, et laisse de la liberté au programmeur de choisir comment organiser son code.
TypeORM nous force à suivre l'architecture classique d'un backend(que l'on verra plus bas). En plus de cea, il utilise Typescript, qui nous oblige à avoir un langage typé (de type Java ou C#). Les types et l'architecture apportent une certaine lourdeur, mais permettent d'avoir un programme solide, plus simple à maintenir en équipe.</p>
<h4>Quels Framework utiliser ?</h4>
<p>Pour mettre en place ces trois composantes d'un application, nous pouvons :</p>
<ul>
<li>Écrire du code à la volée, ne pas utiliser de framework.</li>
<li>séparer le code de sorte à avoir trois services, qui fonctionnement en parallèle.</li>
<li>Utiliser un Méta-framework, qui permet de regrouper les différentes parties d'une façon cohérente et contrôlée.</li>
</ul>
<p>La première idée est la plus mauvaise idée que vous n'ayez jamais eu de votre vie. On utilise forcément un framework quelque part, sinon cotre site ressemblera à un blog des années 2000. En plus de cela, vous allez probablement mettre du code n'importe où, ne pas créer de Backend et tout envoyer à l'utilisateur, qui pourra ensuite hacker vos données et vous les revendre alors qu'elles vous appartiennent.</p>
<p>La deuxième idée et la manière classique de faire les choses, on choisit un framework pour le front , un autre pour le back et on code nos deux parties différentes de façon indépendante. C'est la méthode utilisé dans le projet <a href=".">FirePixel</a> ou dans le POK <a href=".">Jeu de Grattage</a>. Cela permet d'avoir un code structuré, qui envoie seulement le nécessaire à l'utilisateur, qui est relativement protéger contre les cyberattaques (si on respecte les indications du framework). En plus de cela, on peut travailler en équipe sur le projet de manière plus fluide. Certains devs peuvent avancer le front pendant que d'autre avancent le Back, il n'y a pas de conflits car les fichiers sont séparés.</p>
<p>La troisième idée est plus récente, le plus gros avantage est de ne as avoir à réfléchir. Les Méta Framework sont les plus opinionated de tous,a tels points qu'ils ont même une opinion sur les frameworks que vous devez utiliser. Cela à des avantages, ça permet de ne pas avoir à trouver les frameworks soit même, mais aussi, ces Metaframeworks garantissent une grande compatibilité entre les différents composants de l'applications, et une grande simplicité d'utilisation. Je le conseille au débutant qui ne savent pas quels frameworks utilisé, et aussi aux développeurs confirmés qui connaissent déjà un framework inclus dans le package et qui veulent étendre leurs possibilités.</p>
<h3>Architecture du Backend :</h3>
<p>Le backend réalise plusieurs actions spécifiques, il :</p>
<ul>
<li>Expose une application sur le port spécifique d'un serveur.</li>
<li>Expose des routes (des urls) à travers lesquelles on peut communiquer avec lui.</li>
<li>Execute du codes selon les requêtes qui lui sont envoyées.</li>
<li>Il met en place des requêtes pour aller chercher des informations dans la base de données.</li>
<li>Il façonne des objets pour les enregistrer dans la base de données.</li>
</ul>
<p>Pour réaliser ces divers tâches, on pourrait tout rassembler dans un seul fichier nommé par exemple backend.js . Le problème, est que cette méthode créer un immense fichier illisible, dur à debugger ou à factoriser quand il y a besoin de mener des changements. On essaie donc, au maximum de fractionner le projets en fichiers qui n'ont qu'une unique fonction. on aura donc, dans l'ordre défini précédemment :</p>
<ul>
<li>Le fichier index</li>
<li>Le contrôleur</li>
<li>Les services</li>
<li>Le repository</li>
<li>Les entités</li>
</ul>
<p>Notre Backend va gérer la création de comptes pour un site grâce à TypeORM.</p>
<p>l’arborescence est la suivante :</p>
<p>backend
|_controller
|_accountController.ts
|_entity
|_Account.ts
|_service
|_accountService.ts
|_index.ts
|_datasource.ts</p>
<p>Le controller est le fichier qui répertorie <strong>les routes</strong> accessibles. Ces routes prennent en entrée <strong>une requête</strong> et renvoient <strong>une réponse</strong>. Pour créer la réponse, elles se servent des fonctions contenues dans <strong>les services</strong>. Ensuite, si besoin, les services font appels à <strong>l'entité</strong> pour créer un objet formaté qui peut être envoyé dans <strong>la base de données</strong>. Toutes les informations liées à la base de données sont contenues dans datasource.ts qui est le coeur de TypeORM. Ce dernier nous permet de se connecter facilement avec notre base de données, et créer pour nous des <strong>repositories</strong> automatiquement. Ces repository contiennent les fonctions qui créent les requêtes sql comme 'SELECT account *' ou 'SELECT account WHERE ...'.
Enfin, le fichier index.ts reprend toute l'application et la rend accessible sur le port 3000 de votre ordinateur.</p>
<p>Coté frontend, on à une application qui permet d'envoyer des requêtes sur le même port 3000 de votre ordinateur, ces requêtes seront donc directement captées par votre backend.</p>
<h2>Mise en place d'une application :</h2>
<h3>Initialisation du projet :</h3>
<p>On commence par se placer dans un dossier vierge que l'on ouvre dans un éditeur de code (VS code pour moi). On peut faire un git init, voici d'ailleurs le <a href="https://github.com/TuncayBilgi/cybersecenv">lien du repository git de ce projet sur mon github</a>. N'hésitez pas à aller regarder le code directement là-bas, je ne vais pas le copier-coller ici.
On aura deux dossiers principaux :</p>
<ul>
<li>Frontend</li>
<li>Backend</li>
</ul>
<p>En dehors de ces deux fichiers, on viendra placer les fichiers utiles pour la globalité du projet, comme un fichier .env qui possède des variables d'environment, un fichier .gitignore etc..</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Cette partie demande plus de pré-requis.</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<p>Savoir utiliser :</p>
<ul>
<li>un Logiciel pour coder (comme VScode)</li>
<li>javascript</li>
<li>les langages typés</li>
<li>la programmation orientée objet</li>
<li>un outil d'envoie de requête (curl, postman ou insomnia)</li>
</ul>
<p>Avoir installé :</p>
<ul>
<li>Node.js</li>
<li>Docker</li>
</ul>
</div>
</details>     
</div>
<h4>Frontend :</h4>
<p>On choisit d'utiliser le framework ReactJs, on initialise donc un projet React :
<code>npm </code></p>
<p>le front peut être lancé sur le port par défaut 5432 grâce à la commande :
<code>npm run dev</code></p>
<p>On ne s'occupe pas plus du front ici, référez vous à des MON tels que <a href="https://francoisbrucker.github.io/do-it/mon/AV/mons/web-front-1/">Angular</a> <a href="https://francoisbrucker.github.io/do-it/mon/TBi/MON/Angular/">Angular2</a> <a href="https://francoisbrucker.github.io/do-it/mon/NB/mes-mon/react/">React</a>.</p>
<h4>Backend :</h4>
<p>On utilise les Frameworks suivants :</p>
<ul>
<li>Node/Express pour le serveur</li>
<li>TypeORM en tant qu'ORM</li>
</ul>
<p>on initialise le projet de cette manière :</p>
<p><code>npx typeorm init --name cyberenv-back  --database postgre --docker --express</code></p>
<p>Cela met en place un projet TypeORM nommé cyberenv-back qui utilise une base de données postgreSQL, docker et est basé sur express.js.</p>
<p>On peut y voir plusieurs dossiers, on y revient dans le chapitre d'après.</p>
<h4>Base de données :</h4>
<p>On met en place une base de données PostgreSQl. Elle est hébergée à travers un conteneur docker. Je vous invite à voir le <a href="https://francoisbrucker.github.io/do-it/mon/TBi/MON/Docker/">MON Docker</a> et/ou de copier coller mon fichier <a href="https://github.com/TuncayBilgi/cybersecenv/blob/main/cyberenv-back/docker-compose.yml">docker-compose</a>.
Vous pouvez aussi mettre en place votre base de données vous même.</p>
<p>Le plus important est de modifier le fichier data-source.ts . Ce fichier rassemble toutes les informations liées à la connexion à votre base de données. Il est appelé dans les différentes contrôleurs.</p>
<h3>Mise en place d'un Account.</h3>
<p>C'est optionnel mais puisque nous utilisons Typescript, un langage typé, nous ajoutons un dosser dto, qui contient les classes que vont manipuler les services. Cela permet de profiter de tous les bénéfices d'un langage typé, comme la correction et la suggestion automatique du code.</p>
<p>Nous allons voir le processus de création d'un form de création de compte pas à pas, le code est sur mon <a href="https://github.com/TuncayBilgi/cybersecenv">github</a> et les explications sont ci-dessous.
Nous avons besoin d'une classe de données : Account.</p>
<p>Dans le <a href="https://github.com/TuncayBilgi/cybersecenv/blob/main/cyberenv-back/src/dto/AccountDTO.ts">dto</a>, nous définissons ce qu'est un account.
Il est défini par une classe qui possède un nom, un mot de passe et un booléen qui définit s'il est valide.
On pourrait définir des conditions sur le mot de passe, par exemple un mot de pass doit être plus long que 6 caractères, mais il vaut mieux placer ces conditions dans le Account service.
On définit une autre classe, accountSafeDTO, qui est un account sans le mot de passe. C'est grâce à cette classe que nous allons renvoyer des account au client, car nous ne voulons pas que le client reçoive des mots de passe, sinon un utilisateur malintentionné pourrait récupérer des mots de passes qui ne lui appartiennent pas.</p>
<p>En effet, <a href="https://github.com/TuncayBilgi/cybersecenv/blob/main/cyberenv-back/src/service/AccountService.ts">accountService</a> gère toute la partie logique liée à un account, on y écrit des fonctions qui seront appelés grâce à l'API. Le service est une classe, cette classe possède des méthodes comme findLogin et createAccount. Les méthodes prennent en entrée et renvoient en sortie des instances des classes définies dans le dto. Ces fonctions permettent de chercher les accounts déjà existant, pour ce faire, il faut envoyer une requête sql à la base de données. Cette requêtes est créée automatiquement par le accountrepository que l'on instancie au début de la classe.
On met en place dans accountService toutes les fonctions qui concernent la création d'un account, et notamment les fonctions qui vérifient que les mots de passes sont au bon format.</p>
<p>Il nous faut alors une base de données, elle est hébergée dans un conteneur Docker et est lancé grâce à un fichier docker-compose.yml .</p>
<p>Ensuite, nous mettons en place dans <a href="https://github.com/TuncayBilgi/cybersecenv/blob/main/cyberenv-back/src/routes.ts">route.ts</a> et <a href="https://github.com/TuncayBilgi/cybersecenv/blob/main/cyberenv-back/src/controller/AccountController.ts">accountController.ts</a> les différentes routes qui peuvent être appelées par le front.
Ainsi, si un navigateur envoie à l'adresse <a href="http://localhost:3000/account/create">http://localhost:3000/account/create</a> (qui est une adresse locale) une requête POST avec le body suivant :</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><span class="token property">"login"</span> <span class="token operator">:</span> <span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token property">"password"</span> <span class="token operator">:</span> <span class="token string">"motdepasse"</span><span class="token punctuation">}</span></code></pre>
<p>Le contrôleur va récupérer ce body, le transformer en account grâce au dto, et l'envoyer dans le service des accounts pour lancer une procédure de création de compte.</p>
<p>Envoyons des requêtes au serveur grâce au logiciel Insominia et observons les réponses :</p>
<p>On voit que si on envoie notre requête GET, le backend répond :</p>
  <img src="../images/get.webp" alt="oops">
<p>Le mot de passe n'est pas dans la réponse, c'est ce que l'on veut.</p>
<p>Si on essaie de créer un compte qui existe déjà, le backend répond :</p>
  <img src="../images/post.webp" alt="oops">
<h3>Création d'un account.</h3>
<p>Nous faisons alors une <a href="https://github.com/TuncayBilgi/cybersecenv/tree/main/cyberenv-front">page frontend</a> qui permet justement d'envoyer ce genre de requête au backend.
Pour cela, nous utilisons un formulaire. L'utilisateur rempli le formulaire et le frontend récupère les informations rentrées, puis créer une requête appropriée et l'envoie au backend.</p>
<p>il faut faire attention à ce que le frontend ne puisse pas avoir accès a des informations confidentielles, comme des mot de passe. On peut voir par exemple que si on essaie de créer un account dont le login existe déjà dans la base de donnée, le backend envoie au front l'account qui existe déjà, il n'envoie cependant que le login et non pas le mot de passe.</p>
<p>Notre frontend ne donc qu'une interface qui permet d'envoyer facilement les requêtes au bon format, ainsi, on peut y faire exactement ce que l'on faisait quand on écrivait nos requêtes à la main, et recevoir les mêmes réponses :</p>
<div style=" display: grid;grid-template-columns: repeat(3, minmax(0, 1fr))">
<img src="../images/account1.webp" alt="oops">
<img src="../images/account2.webp" alt="oops">
<img src="../images/account3.webp" alt="oops">
</div>
<h3>Lancer le projet :</h3>
<p>Pour lancer le projet, il faut executer</p>
<pre class="language-js"><code class="language-js"><span class="token comment">// dans le répertoire du backend</span>
npm install
docker<span class="token operator">-</span>compose up <span class="token operator">-</span>d
npm start 

<span class="token comment">// dans le répertoire du frontend et dans un autre terminal</span>
npm install
npm run dev
</code></pre>
<h2>Pour aller plus loin :</h2>
<p>Ce site va servir de base pour un prochain projet ou je testerai des principes de cyber-sécurités.
Pour cela il faut mettre en place  :</p>
<ul>
<li>un moyen de se connecter avec un token de connexion.</li>
<li>un hachage des mots de passe pour qu'ils ne soient pa en clair dans la base de données.</li>
</ul>


</article>

        </main>


        <footer class="min-h-[50px] border-t-2 border-gray-200 mt-4">
            <div class="max-w-[1000px] mx-auto px-4">
                <div class="min-h-[50px] flex justify-center items-center">
                    <p class="text-center">
                        <span style="font-family: Consolas, sans-serif;">Do_<span style="color: #4a86e8">It</span></span> : Développement et Organisation en IT
                    </p>
                </div>
            </div>
        </footer>

        <script>
        MathJax
            .startup
            .document
            .getMathItemsWithin(document.body);
        </script>
        <script src="/do-it/assets/node_modules/prismjs/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
    </body>
</html>
