
<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Un jeu de combat ultra mortel</title>

        <link href="/do-it/assets/node_modules/prismjs/themes/prism-solarizedlight.min.css" rel="stylesheet">
        <link href="/do-it/assets/node_modules/prismjs/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet">

        <link href="/do-it/assets/stylesheets/main.css" rel="stylesheet">
    </head>
    <body>
        <script>
        window.MathJax = {
            tex: {
            inlineMath: [
                [
                '$', '$'
                ],
                [
                '\\(', '\\)'
                ]
            ]
            },
            svg: {
            fontCache: 'global'
            }
        };
        </script>
        <script type="text/javascript" id="MathJax-script" src="/do-it/assets/node_modules/mathjax/es5/tex-svg-full.js"></script>

        <header class="border-b-2 border-gray-200 mb-4">
        <div class="max-w-[1000px] mx-auto px-4">
            <div class="min-h-[50px] flex justify-between items-center">
                <a class="mx-2" href="/do-it/">Home</a>
                <div class="flex items-center gap-4 sm:gap-6 ">
                    <a class="" href="/do-it/cs">CS</a>
                    <a class="" href="/do-it/pok">POK</a>
                    <a class="" href="/do-it/mon">MON</a>
                    <a class="" href="/do-it/projets">Projets</a>
                    <a class="hidden sm:block" href="/do-it/promos">Promos</a>
                    <a href="/do-it/search">
                        <svg class="h-5 aspect-square" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path>
                        </svg>
                    </a>
                    <a class="hidden sm:block" href="https://github.com/FrancoisBrucker/do-it" target="_blank">
                        <svg class="h-5 aspect-square" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg>
                    </a>
                </div>
            </div>
        </div>
        </header>

        <main class="max-w-[1000px] mx-auto px-4" data-pagefind-body="">
            
<article class="relative">
<h1 class="mb-1">Un jeu de combat ultra mortel</h1>
<div class="mb-4">
    
        <div class="px-4 flex flex-wrap items-center">
            
                <div class="font-bold">Tags : </div>
            
            <ul class="flex flex-wrap overflow-auto not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Tags">
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">POK</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">2023-2024</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">temps 2</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">POK</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">Game Dev</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">Godot</li>
                

            </ul>
            
            
            <div class="hidden" data-pagefind-meta="Type">
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </div>
        </div>
    

    
        <div class="px-4 flex flex-wrap items-center">
            <div class="font-bold">Auteurs : </div>
            <ul class="flex flex-wrap not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Auteurs">
                
                    <li class="bg-blue-200 rounded-full px-2" data-pagefind-filter="Auteurs">Vladimir Jeantroux</li>
                
            </ul>
        </div>
    

    
</div>



    
<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-purple-500 bg-purple-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-purple-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"></path>
</svg>
<div class="pl-8 mr-8">

<a href="/do-it/promos/">Promotions</a><span class="px-1">/</span><a href="/do-it/promos/2023-2024/">2023-2024</a><span class="px-1">/</span><a href="/do-it/promos/2023-2024/Vladimir-Jeantroux/">Vladimir Jeantroux</a><span class="px-1">/</span><a href="/do-it/promos/2023-2024/Vladimir-Jeantroux/pok/">POK de Vladimir</a><span class="px-1">/</span><a href="/do-it/promos/2023-2024/Vladimir-Jeantroux/pok/temps-2/">Un jeu de combat ultra mortel</a>

</div></div>




<h2>Description</h2>
<p>Ce POK a pour but de me familiariser avec le moteur Godot, en créant un petit jeu vidéo basique. Ce jeu serait un jeu de combat en 2D comme Mortal Kombat ou Street Fighter. J'ai choisi le moteur Godot car il est facile à prendre en main et open source. Un jeu de combat place 2 joueurs face à face, qui doivent enchaîner des séries de coups afin de réduire les points de vie de son adversaire à zéro.</p>
<p>Pour ce jeu j'ai l'intention de faire au moins 2 personnages pour que 2 personnes puissent jouer ensemble, ainsi qu'une IA pour donner un adversaire aux joueurs solo.</p>
<h2>Backlog mis à jour</h2>
<ul>
<li>
<p>Prise en main de Godot <s>(4h)</s> 2h30 [X] (sprint 1)</p>
</li>
<li>
<p>Création d'un personnage (8h) []</p>
<ul>
<li>Animation du personnage et des coups (1h) [X] (sprint 1)</li>
<li>Addition des mouvements <s>(2h)</s> 3h [X] (sprint 1)</li>
<li>Addition des hitbox (2h) [X] (sprint 1)</li>
<li>Interaction lorsqu'on se fait frapper (1h)[]</li>
<li>Commande de blocage des attaques adverses (1h) []</li>
</ul>
</li>
<li>
<p>Implémentation des mécaniques de jeu (3h30) []</p>
<ul>
<li>Compte à rebours (1h) [X] (sprint 1)</li>
<li>PV (2h)[]</li>
<li>Ecran de victoire (30 min) []</li>
</ul>
</li>
<li>
<p>IA (4h) []</p>
<ul>
<li>Bot facile <strong>et difficile</strong> (2h) []</li>
<li><s>Bot difficile</s> Multijoueur local (2h) []</li>
</ul>
</li>
<li>
<p>Création des menus (30 min) []</p>
<ul>
<li>Menu principal <strong>et arène</strong> <s>(1h)</s> 30 min [X]</li>
<li><s>Sélection du personnage (1h) []</s> Le personnage est imposé.</li>
</ul>
</li>
</ul>
<h2>Objectif du Sprint 1</h2>
<p>Pour ce premier sprint, je compte faire au moins un personnage qui puisse être contrôlé et joué contre un mannequin d'entraînement (i.e. un personnage statique qui a pour seul but de prendre des coups).</p>
<p>Backlog du sprint 1 :</p>
<ul>
<li>Prise en main de Godot <s>(4h)</s> 2h30 [X]</li>
<li>Création d'un personnage (6h) [X]
<ul>
<li>Animation du personnage et des coups (1h) [X]</li>
<li>Addition des mouvements <s>(2h)</s> 3h [X]</li>
<li>Addition des hitbox (2h) [X]</li>
</ul>
</li>
<li>Implémentation des mécaniques de jeu (2h) []
<ul>
<li>Compte à rebours (1h) [X]</li>
<li>PV (1h)[]</li>
</ul>
</li>
<li>Création des menus <s>(1h)</s> [X]
<ul>
<li>Menu principal <strong>et arène</strong> <s>(1h)</s> 30 min [X]</li>
</ul>
</li>
</ul>
<h2>Résumé du Sprint 1</h2>
<p>J'ai tout d'abord regardé une vidéo couvrant les bases du moteur Godot. Avec ce tutoriel, j'ai appris le langage GDScript, et la manière dont était codée les mouvements du personnage jouable.</p>
<p>Le jeu comporte pour le moment 2 scènes : un menu principal qui donne le choix entre démarrer ou quitter le jeu, ainsi que l'arène de combat où se déroule le jeu. L'arène comporte un sol, un mur de chaque côté de l'écran et une animation pour expérimenter avec les éléments d'arrière-plan, mais aussi pour que le fond ne soit pas trop vide. Il y a aussi un compte à rebours, et dès qu'il affiche 0, le jeu considère que le mannequin d'entraînement a gagné, et le jeu se ferme.</p>
<p>J'ai ensuite implémenté les commandes droite, gauche, saut et attaque pour un personnage, ainsi que les animations correspondantes. J'ai aussi rajouté un mannequin immobile. Ces deux personnages sont capables d'interagir ensemble : ils ont une collision, i.e. ils ne peuvent pas se traverser l'un et l'autre, et le jeu réagit lorsque le joueur attaque le mannequin (la console affiche &quot;Ouch !&quot;), et un effet sonore se joue.</p>
<p><img src="Gameplay.gif" alt="Gameplay"></p>
<p>Séquence de gameplay montrant les contrôles que le joueur peut faire.</p>
<pre><code>func _on_fist_colliders_body_entered(body):
	$PunchSound.play()
	if(body.name == &quot;Dummy&quot;):
		print(&quot;-----&quot;)
		print(&quot;Ouch !!&quot;)
		print(&quot;-----&quot;)
</code></pre>
<p>Code dictant ce qu'il se passe lorsque le poing du personnage frappe le manequin. (Le son de frappe se joue, puis la console affiche &quot;Ouch!&quot; si le frappé est le mannequin d'entraînement.)</p>
<p><img src="Hitbox.gif" alt="Démonstration des hitbox"></p>
<p>Démonstration des hitbox en jeu. La boîte rose est liée au poing, et ne s'active que lorsqu'une attaque liée au poing est lancée. La boîte verte est liée au pied. Le reste du temps, ces boîtes sont inactives (grises). Si une boîte colorée touche un autre personnage, alors celui-ci se fait toucher par le coup.</p>
<h3>Difficultés rencontrées</h3>
<p>La principale difficulté que j'ai rencontré était la compatibilité du code présenté dans les guides que j'ai regardé. En effet, Godot est régulièrement mis à jour et le guide que j'ai regardé était sur une version précédente. J'ai donc dû adapter la syntaxe pour qu'elle soit lue par ma version de Godot, ce qui m'a ralenti lors de la prise en main du moteur. La manière dont les mouvements étaient codés dans le guide n'étaient aussi pas compatibles avec le genre de jeu que je voulais créer, et j'ai donc dû recommencer le codage des mouvements et de la gravité depuis le début. J'ai aussi été surpris par la difficulté à implémenter des éléments à priori simples, comme un compte à rebours ou une animation d'arrière plan.</p>
<p>J'ai aussi un peu sous-estimé la partie graphique. Je pensais que ce serait vite fait avec des Stickman faits sur Paint en 30 secondes, mais ils doivent avoir une animation pour chaque action et ce qui je pensais allait me prendre 5 min m'a en réalité pris 1h.</p>
<h2>Bilan du sprint 1 et prévisions pour le sprint 2</h2>
<p>J'ai pu remplir les objectifs que je m'étais fixés pour le 1er sprint : un personnage jouable, qui peut interagir avec un mannequin d'entraînement.</p>
<p>Pour le sprint 2 j'aimerais pouvoir ajouter une barre de points de vie, une interaction lorsque le joueur se fait frapper par une attaque (i.e. le personnage ne devrait pas pouvoir lancer d'actions lorsqu'il se fait frapper), ainsi qu'un ennemi contrôlé par l'IA que le joueur pourrait affronter.</p>
<p>Backlog du sprint 2 :</p>
<ul>
<li>
<p>Finition du personnage (3h) []</p>
<ul>
<li>Interaction lorsqu'on se fait frapper (1h)[]</li>
<li>Commande de blocage des attaques adverses (1h) []</li>
<li>Ajout de coups divers (attaques accroupies) (1h) [X]</li>
</ul>
</li>
<li>
<p>Implémentation des mécaniques de jeu (2h30) []</p>
<ul>
<li>PV (2h) [X]</li>
<li>Ecran de victoire (30 min) []</li>
</ul>
</li>
<li>
<p>Multijoueur (4h) []</p>
<ul>
<li>Bot facile <strong>et difficile</strong> <s>(2h)</s> (2h30) [X]</li>
<li><s>Bot difficile</s> Multijoueur local (2h) []</li>
</ul>
</li>
<li>
<p>Déploiement (30 min)[X]</p>
</li>
</ul>
<h2>Résumé du Sprint 2</h2>
<p>Pour commencer, je me suis rendu compte que la manière dont les attaques et les hitbox étaient codées n'étaient pas adaptées si je voulais ajouter plusieurs personnages : je me retrouverais alors avec énormément de fichiers script différents pour chaque personnage. J'ai donc commencé par éditer le code et les animations pour avoir une base générale de mouvements auquel n'importe quel personnage aurait accès. Bien que j'ai avancé là dessus, je n'ai pas réussi à aboutir et pour l'instant le personnage joueur utilise le même script qu'avant.
J'ai aussi refait la manière dont étaient codées les animations, pour pouvoir plus tard ajouter d'autres animations lorsque je voudrais rajouter des attaques et des mouvements pour un personnage. J'ai aussi exploré des outils du moteur pour éliminer un maximum de fonctions à coder. Moins j'ai de mécanismes compliqués à coder, mieux je me porte.</p>
<p>Pour avoir un jeu à 2 joueurs/contre l'IA, il fallait que je crée un autre personnage capable de se déplacer et de combattre, j'en ai donc fait un rapidement à partir du mannequin d'entraînement, qu'il remplacera dorénavant. Concernant l'IA, je souhaitais faire 2 niveaux de difficulté, mais le jeu est tellement basique qu'on ne pourrait pas faire une IA avancée (on ne peut que bouger de droite à gauche et faire 1 attaque).</p>
<p>Le terme d'Intelligence Artificielle est un peu abusif, car c'est en réalité un simple algorithme. L'ennemi va regarder la distance entre le joueur et lui-même : plus il est proche du joueur, plus il a de chances d'initier une attaque. Sinon, il se déplace vers le joueur. De plus, si le joueur réussit à sauter derrière le bot, il va se retourner et continuer son assaut. Le bot a accès à 2 attaques : une attaque debout et une attaque accroupie.</p>
<p><img src="D%C3%A9mo.gif" alt="L'ennemi IA en action">
L'ennemi IA en action. Il s'approche du joueur, fait une attaque accroupie et une attaque debout. Il y a aussi une probabilité qu'il ne prenne pas d'action lorsqu'il est proche du joueur, histoire qu'il ne fasse pas que des attaques.</p>
<p>J'ai aussi importé des textures de barre de vie, mais je n'ai pas réussi à finaliser la programmation, et donc pour l'instant il y a des barres de vie purement décoratives. Au lieu de cela, j'ai rajouté la possibilité de jouer à la manette. Enfin, j'ai exporté le projet et l'ai compressé en un fichier .exe.</p>
<p>Tout le projet est sur mon <a href="https://github.com/VlaadimirJ/pok-2-vladimir-jeantroux">GitHub</a>.</p>
<h3>Difficultés rencontrées</h3>
<p>Bien que c'est un cheminement normal lorsque l'on apprend, se rendre compte que ce que l'on a fait n'est pas optimal et devoir tout recommencer est assez frustrant. Il y a aussi toujours le problème de ne pas pouvoir comprendre l'aide qu'on puisse trouver sur Internet et les forums car le code proposé est obsolète car a la syntaxe d'une version précédente.</p>
<h2>Bilan</h2>
<p>Un jeu de combat est un projet ambitieux pour un 1er jeu vidéo, et malgré ces 20h passées dessus, je suis encore incroyablement loin d'aboutir à quelque chose qu'on peut qualifier de jeu. J'ai dû travailler en apprenant tout le moteur Godot et le langage associé, et j'ai aussi progressé assez lentement sur des notions comme les interactions entre personnages ou le codage de l'IA, voire rencontré des impasses. J'ai préféré laisser tomber certaines notions pour travailler sur d'autres.  J'ai quand même pu apprendre beaucoup de choses sur la création d'un jeu vidéo et différents aspects d'un jeu, mais la route est encore longue si je souhaite aboutir à un produit à peu près fini.</p>
<h2>Glossaire</h2>
<p>Hitbox : zone invisible autour d'un objet dans un jeu vidéo, déterminant les interactions et les collisions avec d'autres éléments du jeu.</p>
<h2>Bibliographie</h2>
<ul>
<li>Documentation de Godot Engine <a href="https://docs.godotengine.org/en/stable/index.html">https://docs.godotengine.org/en/stable/index.html</a></li>
<li>Godot Crash Course for Beginners pour apprendre comment fonctionne le moteur <a href="https://www.youtube.com/watch?v=S8lMTwSRoRg&amp;t=2537s">https://www.youtube.com/watch?v=S8lMTwSRoRg&amp;t=2537s</a></li>
<li>Tournament Fighter | Basic Input tutorial pour l'implémentation des hitbox <a href="https://www.youtube.com/watch?v=XrR5jibBVxo">https://www.youtube.com/watch?v=XrR5jibBVxo</a></li>
<li>Godot Tutorial || Part 5 || Tournament Fighter || Heads Up Display <a href="https://www.youtube.com/watch?v=SZnz6nWTRZo&amp;list=PLvz6jVtRjve0RbEmoKM_42k_J1KJw9y9W&amp;index=5">https://www.youtube.com/watch?v=SZnz6nWTRZo&amp;list=PLvz6jVtRjve0RbEmoKM_42k_J1KJw9y9W&amp;index=5</a></li>
</ul>
<p><strong>Horodatage</strong></p>
<p><em>Sprint 1</em></p>
<blockquote>
<p>Prise en main de Godot (~2h30)
Création du menu principal et de l'arène (~30 min)
Codage des mouvements et saut (1h)
Réécriture complète du code lié aux mouvements (2h)
Animation du personnage jouable (1h)
Implémentation des hitbox et d'un mannequin d'entraînement (2h)
Ajout de bruitages lors d'un coup réussi (15mn)
Implémentation d'un compte à rebours (1h)</p>
</blockquote>
<p><em>Sprint 2</em></p>
<blockquote>
<p>Création du 2e personnage (30mn)
Refonte des animations et ajout des attaques accroupies (1h30)
Programmation de l'IA (2h30)
Nouveau codage des coups et des hitbox (2h)
Barres de PV (1h30)
Ajout de contrôles manette (30mn)
Déploiement (30mn)</p>
</blockquote>


</article>

        </main>


        <footer class="min-h-[50px] border-t-2 border-gray-200 mt-4">
            <div class="max-w-[1000px] mx-auto px-4">
                <div class="min-h-[50px] flex justify-center items-center">
                    <p class="text-center">
                        <span style="font-family: Consolas, sans-serif;">Do_<span style="color: #4a86e8">It</span></span> : Développent et Organisation en IT
                    </p>
                </div>
            </div>
        </footer>

        <script>
        MathJax
            .startup
            .document
            .getMathItemsWithin(document.body);
        </script>
        <script src="/do-it/assets/node_modules/prismjs/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
    </body>
</html>
