
<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>La Data Science au service de l&#39;Anatomie Pathologique</title>

        <link href="/do-it/assets/node_modules/prismjs/themes/prism-solarizedlight.min.css" rel="stylesheet">
        <link href="/do-it/assets/node_modules/prismjs/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet">

        <link href="/do-it/assets/stylesheets/main.css" rel="stylesheet">
    </head>
    <body>
        <script>
        window.MathJax = {
            tex: {
            inlineMath: [
                [
                '$', '$'
                ],
                [
                '\\(', '\\)'
                ]
            ]
            },
            svg: {
            fontCache: 'global'
            }
        };
        </script>
        <script type="text/javascript" id="MathJax-script" src="/do-it/assets/node_modules/mathjax/es5/tex-svg-full.js"></script>

        <header class="border-b-2 border-gray-200 mb-4">
        <div class="max-w-[1000px] mx-auto px-4">
            <div class="min-h-[50px] flex justify-between items-center">
                <a class="mx-2" href="/do-it/">Home</a>
                <div class="flex items-center gap-4 sm:gap-6 ">
                    <a class="" href="/do-it/cs">CS</a>
                    <a class="" href="/do-it/pok">POK</a>
                    <a class="" href="/do-it/mon">MON</a>
                    <a class="" href="/do-it/projets">Projets</a>
                    <a class="hidden sm:block" href="/do-it/promos">Promos</a>
                    <a href="/do-it/search">
                        <svg class="h-5 aspect-square" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path>
                        </svg>
                    </a>
                    <a class="hidden sm:block" href="https://github.com/FrancoisBrucker/do-it" target="_blank">
                        <svg class="h-5 aspect-square" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg>
                    </a>
                </div>
            </div>
        </div>
        </header>

        <main class="max-w-[1000px] mx-auto px-4" data-pagefind-body="">
            
<article class="relative">
<h1 class="mb-1">La Data Science au service de l&#39;Anatomie Pathologique</h1>
<div class="mb-4">
    
        <div class="px-4 flex flex-wrap items-center">
            
                <div class="font-bold">Tags : </div>
            
            <ul class="flex flex-wrap overflow-auto not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Tags">
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">POK</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">2023-2024</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">temps 2</li>
                

            </ul>
            
            
            <div class="hidden" data-pagefind-meta="Type">
                
                    
                
                    
                
                    
                
            </div>
        </div>
    

    
        <div class="px-4 flex flex-wrap items-center">
            <div class="font-bold">Auteurs : </div>
            <ul class="flex flex-wrap not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Auteurs">
                
                    <li class="bg-blue-200 rounded-full px-2" data-pagefind-filter="Auteurs">Alexandre Beyaert</li>
                
            </ul>
        </div>
    

    
</div>

        <p class="mb-4 text-lg">

                Un POK traitant de l'usage de la Data Science au service de l'anatomie Pathologique. En particulier, le risque de récidive d'une tumeur.

        </p>



    
<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-purple-500 bg-purple-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-purple-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"></path>
</svg>
<div class="pl-8 mr-8">

<a href="/do-it/promos/">Promotions</a><span class="px-1">/</span><a href="/do-it/promos/2023-2024/">2023-2024</a><span class="px-1">/</span><a href="/do-it/promos/2023-2024/Beyaert-Alexandre/">Alexandre BEYAERT</a><span class="px-1">/</span><a href="/do-it/promos/2023-2024/Beyaert-Alexandre/pok/">POK de Alexandre Beyaert</a><span class="px-1">/</span><a href="/do-it/promos/2023-2024/Beyaert-Alexandre/pok/temps-2/">La Data Science au service de l&#39;Anatomie Pathologique</a>

</div></div>




<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-pink-500 bg-pink-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-pink-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
</svg>
<div class="pl-8 mr-8">
<p><strong>Niveau :</strong> Avancé<br>
<strong>Prérequis :</strong> [à définir]</p>
</div></div>
<h2>Sommaire</h2>
<ol>
<li>Introduction</li>
<li>Description du projet</li>
<li>Sprint 1 : analyse préliminaire des données<br>
(Il sera dans un 1er temps nécessaire d'effectuer du pré-traitement de ces données puis de réaliser de la segementation afin d'uniquement détecter les zones cancéreuses)</li>
<li>Sprint 2 : algorithmes de Machine Learning<br>
(Ensuite, une fois la segmentation au point, nous allons pouvoir commencer à faire tourner des algorithmes de ML pour effectuer une classification : &quot;cancer&quot; ou &quot;pas de cancer&quot;)</li>
<li>Conclusion</li>
<li>Bibliographie</li>
</ol>
<h2>1. Introduction</h2>
<p>Le but de ce projet est d'apporter des solutions informatiques d'analyse de données au service de l'anatomie pathologique. En particulier, concernant le risque de récidive du carcinome basocellulaire.</p>
<p>Les médecins perdent un temps précieux dans l'analyse de lames afin d'évaluer l'envergure du carcinome basocellulaire. Le Machine Learning doit pouvoir aider à trier ces différentes lames pour ne demander aux médecins qu'une analyse approfondie.</p>
<h2>2. Description du projet</h2>
<h3>2.1 Informations générales</h3>
<p><strong>Titre :</strong> Évaluation du risque d’agressivité des carcinomes basocellulaires à partir de multiples jeux de données<br>
<strong>Champ médical	:</strong> Cancérologie Diagnostic Anatomie Pathologique<br>
<strong>Entité de rattachement :</strong>	Service d’Anatomie Pathologiques, Timone, APHM, UMR911, MMG, AMU</p>
<h3>2.2 Description du projet</h3>
<p>L'Anatomie Pathologique (anapath) est une spécialité médicale portant le diagnostic des maladies sur le plan microscopique, c’est-à-dire sur l'interprétation d’images des tissus et cellules, et notamment de toute la pathologie tumorale et du cancer.</p>
<p>Le développement des techniques de numérisation offre de nouvelles perspectives pour cette spécialité qui pourra bientôt se passer de microscopes optiques au profit d’écran haute résolution. Dans ce contexte de numérisation totale, l'analyse d'images et certains pipeline de machine-learning offrent des perspectives de développement d’outils pratiques et/ou puissants d’aide au diagnostic : outre l’accélération de la vitesse pour rendre un diagnostic en routine aidé par l’informatique, la genèse de données normalisées et reproductibles de santé par l’intermédiaire de ces outils est un enjeu de compétitivité majeure pour la recherche et le développement en cancérologie dans les 5 prochaines années. Les tissus offrent de très nombreuses couches d’information actuellement peu exploitables.</p>
<p>Les images microscopiques sont multimodales et le pathologiste peut s’aider de techniques pour visualiser différentes modalités d’information biologique, superposées sur une même coupe tissulaire, comme l’expression de protéines spécifiques qui jouent alors un rôle de filtre pour masquer ou au contraire révéler des cellules tumorales, les vaisseaux ou encore l’inflammation : l’immunohistochimie. Grace à ces images, et après intégration aux données cliniques, le pathologiste est à même de proposer des éléments pour la décision médicale.</p>
<p>Le cancer de la peau le plus fréquent est le carcinome basocellulaire, qui est un diagnostic facile au microscope avec des images prototypiques, reproductibles. L’incidence élevée de ce cancer mobilise de nombreuses ressources pour le diagnostic, qui pourraient être automatisées.</p>
<p>La thématique de l’aide au diagnostic et de l’automatisation du diagnostic en pathologie s’inscrit dans un contexte actuel très concurrentiel portant essentiellement sur l’analyse d’image avec divers projets industriels et commerciaux en phase de validation voire de production dans d’autres organes (Medipath, Ibex, Vita-DX, Primaa, Howkin), qui sont financés. Seule la société Primaa développe des algorithmes dédiés à la dermatopathologie. In fine, ces nouveaux outils d’aide au diagnostic rencontreront nécessairement des obstacles réglementaires (marquage CE) et financiers (remboursement CPAM et/ou RIHN).</p>
<p>Aucun de ces projets ne se focalisent sur les données existantes (compte-rendus) ni sur l’intégration de multiples jeux de données (clinique, histologique) avec l’analyse d’image pour répondre à des questions cliniques précises. Dans le carcinome basocellulaire, la question clinique à se poser est : la tumeur va-t-elle récidiver ? Ce qui conditionne la surveillance et des traitements complémentaires.</p>
<p><strong>Le but de ce projet est de créer un outil répondant le plus précisément à cette question du risque de récidive en se basant sur le plus de données disponibles et fiables possible.</strong></p>
<p>Ce projet s’articule en parallèle, pour la partie compte-rendus, avec un autre projet déposé portant sur l’extraction automatisée de données de compte-rendus d’anatomie pathologique : il sert de validation théorique en vie réelle, sur une question clinique donnée.</p>
<p>Données : fichiers images, lames de microscopes numérisées, format .ndpi – anonymisées.</p>
<h3>2.3 Missions et attendus souhaités</h3>
<p>Le but de ce POK est de proposer un algorithme fonctionnel permettant de classer les lames cancéreuses et celles non cancéreuses.</p>
<h2>3. Sprint 1 : analyse préliminaire des données</h2>
<h3>3.1 Conversion automatisée des images du format ..ndpi au format .jpg</h3>
<p>Les images sur lesquelles je travaille proviennent de microscopes numériques. Elles sont extraites au format .ndpi &quot;NanoZoomer Digital Pathology Image&quot; et sont de très hautes résolutions.</p>
<p>L'échantillon dont je dispose propose des images allant de 100Mo à 1Go.</p>
<p>Il est possible de les lire en utilisant le NDPI Viewer &quot;NDP.wiew2&quot; développé par le fabricant japonais d'instruments scientifiques Hamamatsu Photonics K.K..<br>
Ce logiciel est téléchargeable gratuitement sur <a href="https://www.hamamatsu.com/eu/en/product/life-science-and-medical-systems/digital-slide-scanner/U12388-01.html">le site d'Hamamatsu</a></p>
<p>Voici son interface :</p>
<p><img src="NDP_view2.jpg" alt="NDP Viewer2"></p>
<p>Afin de pouvoir utiliser ces images dans un algorithme de machine learning, il faudrait les convertir dans un format plus propice à la programmation et permettant de réduire leur taille.</p>
<p>Toutefois, depuis NDP Viewer2, cette conversion ne peut se faire qu'image par image et serait trop chronophage pour convertir des 100aines d'images.</p>
<p>La première problématique de ce POK consiste alors à automatiser une conversion des images au format .ndpi vers .jpg afin de les lire plus facilement dans un algorithme python en réduisant notamment leur taille.</p>
<h4>Tentative d'automatisation avec NDPview2</h4>
<p>Ayant téléchargé NDPview2, ma première idée consiste alors à créer un algorithme Python convertissant les différents fichiers en faisant appel à ce NDP viewer.</p>
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python"><span class="token keyword">import</span> os
<span class="token keyword">import</span> subprocess

<span class="token comment"># Chemins des dossiers</span>
input_folder <span class="token operator">=</span> <span class="token string">'C:\\Test-TER\\DATA-NDPI'</span>
viewer_path <span class="token operator">=</span> <span class="token string">'C:\\Program Files\\Hamamatsu\\NDP.view 2\\NDPView2.exe'</span>
output_folder <span class="token operator">=</span> <span class="token string">'C:\\Test-TER\\DATA-JPG'</span>

<span class="token comment"># Chemin du fichier test</span>
test_file <span class="token operator">=</span> <span class="token string">'test.ndpi'</span>
test_file_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>input_folder<span class="token punctuation">,</span> test_file<span class="token punctuation">)</span>

<span class="token comment"># Génération du chemin de sortie avec le même nom de fichier mais en extension .jpg</span>
output_file_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>output_folder<span class="token punctuation">,</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>splitext<span class="token punctuation">(</span>test_file<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'.jpg'</span><span class="token punctuation">)</span>

<span class="token comment"># Commande pour appeler le viewer NDPI et effectuer la conversion</span>
command <span class="token operator">=</span> <span class="token punctuation">[</span>viewer_path<span class="token punctuation">,</span> <span class="token string">'-i'</span><span class="token punctuation">,</span> test_file_path<span class="token punctuation">,</span> <span class="token string">'-o'</span><span class="token punctuation">,</span> output_file_path<span class="token punctuation">]</span>

<span class="token comment"># Exécuter la commande en utilisant subprocess.Popen</span>
process <span class="token operator">=</span> subprocess<span class="token punctuation">.</span>Popen<span class="token punctuation">(</span>command<span class="token punctuation">,</span> stdout<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>PIPE<span class="token punctuation">,</span> stderr<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>PIPE<span class="token punctuation">)</span>
output<span class="token punctuation">,</span> error <span class="token operator">=</span> process<span class="token punctuation">.</span>communicate<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># Afficher la sortie et les erreurs</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Sortie:"</span><span class="token punctuation">,</span> output<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Erreurs:"</span><span class="token punctuation">,</span> error<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Conversion pour le fichier de test terminée."</span><span class="token punctuation">)</span>
</code></pre>
<p>Hélas le programme se contente de lancer le viewer sans effectuer la conversion. Il semblerait donc que le viewer ne puisse servir de façon automatisée mais nécessite des actions manuelles pour effectuer la conversion.</p>
<h4>Tentative d'automatisation avec OpenSlide</h4>
<h3>3.2 Visualisation d'images</h3>
<p>Pour commencer, regardons quelques images dont nous disposons.</p>
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>image <span class="token keyword">as</span> mpimg

<span class="token comment"># Liste des chemins d'accès aux images</span>
image_paths <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'C:\\TER\\visu1.png'</span><span class="token punctuation">,</span> <span class="token string">'C:\\TER\\visu3.png'</span><span class="token punctuation">,</span> <span class="token string">'C:\\TER\\visu2.png'</span><span class="token punctuation">,</span> <span class="token string">'C:\\TER\\visu4.png'</span><span class="token punctuation">]</span>

<span class="token comment"># Créer une figure avec 2x2 sous-graphiques</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># Boucle pour afficher chaque image dans un sous-graphique</span>
<span class="token keyword">for</span> i<span class="token punctuation">,</span> image_path <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>image_paths<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    
    img <span class="token operator">=</span> mpimg<span class="token punctuation">.</span>imread<span class="token punctuation">(</span>image_path<span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>img<span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">'off'</span><span class="token punctuation">)</span>

<span class="token comment"># Ajuster l'espacement entre les sous-graphiques</span>
plt<span class="token punctuation">.</span>tight_layout<span class="token punctuation">(</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p><img src="Visualisation.jpg" alt="Exemples d'images"></p>
<p>Ces différentes images sont à l'heure actuelle peu exploitables.<br>
On y remarque beaucoup de bruit, des tâches qui pourraient tromper l'algorithme quant à la détection du carcinome...</p>
<p><img src="Visualisation_annotee.jpg" alt="Annotations"><br>
En noir, la zone où se trouve le carcinome.<br>
En rouge, du bruit pour l'algorithme</p>
<p>Il va donc être nécessaire d'effectuer un pré-traitement de ces données pour réaliser la segmentation &quot;zone cancéreuse vs zone non cancéreuse&quot;.</p>
<h3>3.1 test de pré-traitement sur les fichiers .ndpi</h3>
<h3>3.2 Conversion des fichiers .ndpi au format .jpg</h3>
<p><a href="https://www.hamamatsu.com/eu/en/product/life-science-and-medical-systems/digital-slide-scanner/U12388-01.html">https://www.hamamatsu.com/eu/en/product/life-science-and-medical-systems/digital-slide-scanner/U12388-01.html</a></p>
<h3>3.3 pré-traitement</h3>
<h2>4. Sprint 2 : algorithmes de Machine Learning</h2>
<p>(Ensuite, une fois la segmentation au point, nous allons pouvoir commencer à faire tourner des algorithmes de ML pour effectuer une classification : &quot;cancer&quot; ou &quot;pas de cancer&quot;)</p>
<h2>5. Conclusion</h2>
<h2>6. Bibliographie</h2>


</article>

        </main>


        <footer class="min-h-[50px] border-t-2 border-gray-200 mt-4">
            <div class="max-w-[1000px] mx-auto px-4">
                <div class="min-h-[50px] flex justify-center items-center">
                    <p class="text-center">
                        <span style="font-family: Consolas, sans-serif;">Do_<span style="color: #4a86e8">It</span></span> : Développent et Organisation en IT
                    </p>
                </div>
            </div>
        </footer>

        <script>
        MathJax
            .startup
            .document
            .getMathItemsWithin(document.body);
        </script>

    </body>
</html>
