
<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Prise de note du Cours Openclassrooms</title>

        <link href="/do-it/assets/stylesheets/main.css" rel="stylesheet">
    </head>
    <body>
        <script>
        window.MathJax = {
            tex: {
            inlineMath: [
                [
                '$', '$'
                ],
                [
                '\\(', '\\)'
                ]
            ]
            },
            svg: {
            fontCache: 'global'
            }
        };
        </script>
        <script type="text/javascript" id="MathJax-script" src="/do-it/assets/node_modules/mathjax/es5/tex-svg-full.js"></script>

        <header class="border-b-2 border-gray-200 mb-4">
        <div class="max-w-[1000px] mx-auto px-4">
            <div class="min-h-[50px] flex justify-between items-center">
                <a class="mx-2" href="/do-it/">Home</a>
                <div class="flex items-center gap-4 sm:gap-6 ">
                    <a class="" href="/do-it/cs">CS</a>
                    <a class="" href="/do-it/pok">POK</a>
                    <a class="" href="/do-it/mon">MON</a>
                    <a class="" href="/do-it/projets">Projets</a>
                    <a class="hidden sm:block" href="/do-it/promos">Promos</a>
                    <a href="/do-it/search">
                        <svg class="h-5 aspect-square" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path>
                        </svg>
                    </a>
                    <a class="hidden sm:block" href="https://github.com/FrancoisBrucker/do-it" target="_blank">
                        <svg class="h-5 aspect-square" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg>
                    </a>
                </div>
            </div>
        </div>
        </header>

        <main class="max-w-[1000px] mx-auto px-4" data-pagefind-body="">
            
<article class="relative">
<h1 class="mb-1">Prise de note du Cours Openclassrooms</h1>
<div class="mb-4">
    
        <div class="px-4 flex flex-wrap items-center">
            
                <div class="font-bold">Tags : </div>
            
            <ul class="flex flex-wrap overflow-auto not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Tags">
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">MON</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">2023-2024</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">cyber</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">pentest</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">security</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">web</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">sql</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">injection</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">notes</li>
                

            </ul>
            
            
            <div class="hidden" data-pagefind-meta="Type">
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </div>
        </div>
    

    
        <div class="px-4 flex flex-wrap items-center">
            <div class="font-bold">Auteurs : </div>
            <ul class="flex flex-wrap not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Auteurs">
                
                    <li class="bg-blue-200 rounded-full px-2" data-pagefind-filter="Auteurs">Arthur Louradou</li>
                
            </ul>
        </div>
    

    
</div>



    
<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-purple-500 bg-purple-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-purple-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"></path>
</svg>
<div class="pl-8 mr-8">

<a href="/do-it/promos/">Promotions</a><span class="px-1">/</span><a href="/do-it/promos/2023-2024/">2023-2024</a><span class="px-1">/</span><a href="/do-it/promos/2023-2024/Louradou-Arthur/">Arthur Louradou</a><span class="px-1">/</span><a href="/do-it/promos/2023-2024/Louradou-Arthur/mon/">MON parcours d&#39;autoformation</a><span class="px-1">/</span><a href="/do-it/promos/2023-2024/Louradou-Arthur/mon/temps-1.1/">Pentest et Cybers√©curit√©</a><span class="px-1">/</span><a href="/do-it/promos/2023-2024/Louradou-Arthur/mon/temps-1.1/prise_de_note_oc/">Prise de note du Cours Openclassrooms</a>

</div></div>




<h2>Introduction</h2>
<p>Test d‚Äôintrusion = Pentest est une partie de la s√©curit√© offensive en informatique.</p>
<p>Illustration des niveaux de connaissance dans une app : boite noire, grise, blanche.</p>
<img src="https://user.oc-static.com/upload/2022/07/20/16583250551232_FR_7727176_Intrusion-Web_Static-Assets_p1c2-3a.png">
<p>Diff√©rentes fa√ßons de tester le syst√®me : &quot;bug bounty&quot;, &quot;red team&quot;,¬†&quot;test d'intrusion&quot;</p>
<h2>Posture du pentester, hacker √©thique</h2>
<p>Hacker ‚Üí Penser ‚Äúoutside the box‚Äù ‚â† mauvaises intentions. Le cadre du cours est enti√®rement l√©gal tant qu‚Äôil n‚Äôest pas test√© sur des syst√®mes sans autorisation.</p>
<p>Qualit√© principale : Autodidacte ! Soit pr√©cis√©ment ce qui est cibl√© par les MON de Do_It !</p>
<h2>Cadrage du besoin de test d‚Äôintrusion</h2>
<p>Gestion de projet pour la pr√©paration d‚Äôune attaque.</p>
<h3>1. Pr√©senter sa d√©marche</h3>
<p>Parler des approches de boites grise, noire, blanche vues plus haut, des habitudes de fonctionnement du client pour ne pas impacter son activit√© √† un moment critique.</p>
<h3>2. P√©rim√®tre du test</h3>
<p>Plusieurs types de clients : mature ou d√©butant. Avec ce dernier, il faut √™tre plus p√©dagogue.</p>
<p>On pose les questions structurelles puis techniques. Demander une d√©monstration √† l‚Äôusage.</p>
<p>Lien avec le cours de Design Thinking : se mettre √† la place du client pour penser comme dans son activit√©.</p>
<p>Exemple : Application e-sant√©</p>
<p><strong>‚Üí Quelles questions √† poser au client ?</strong></p>
<p>Que fait l‚Äôapplication ? Qui interagit avec ? (patients, m√©decins, administratifs, etc.) Quelles donn√©es sont stock√©es et comment ? A-t-on confiance en les utilisateurs ? (Pour mener un test plut√¥t ax√© boite grise ou boite blanche) + Demander une d√©monstration du parcours d‚Äôun utilisateur classique.</p>
<p>Correction :</p>
<p><a href="https://course.oc-static.com/courses/7727176/Re%CC%81alisez+un+test+d'intrusion+web+-+Cadrez+votre+intervention+a%CC%80+partir+des+objectifs+du+test+-+Corrige%CC%81.pdf">https://course.oc-static.com/courses/7727176/ReÃÅalisez+un+test+d'intrusion+web+-+Cadrez+votre+intervention+aÃÄ+partir+des+objectifs+du+test+-+CorrigeÃÅ.pdf</a></p>
<aside>
üßëüèª‚Äçüíª √Ä ce stade, il me parait assez pr√©matur√© de parler de client, organisation et budget sans m√™me avoir d√©velopp√© de comp√©tences techniques. Je vais donc avancer dans le cours pour passer aux parties les plus int√©ressantes pour les objectifs de ce MON.
</aside>
<h2>Environnement de travail</h2>
<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-cyan-500 bg-cyan-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-cyan-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
</svg>
<div class="pl-8 mb-2 mr-8">
<p>‚ÑπÔ∏è</p>
</div><div class="pl-8 mr-8">
<p>Conseil : Prendre des notes de tout ce que l‚Äôon fait pour la tra√ßabilit√© et se couvrir l√©galement.</p>
</div></div>
<p>Par le pass√©, j‚Äôavais commenc√© √† prendre des notes sur les outils pris en main avec HackTheBox.</p>
<p>Installation de Kali Linux. Mise √† jour de VirtualBox et lancement de la machine d√©j√† install√©e.</p>
<h2>Techniques</h2>
<h3>Google Dorks</h3>
<p>Faire de la recherche en source ouverte avec quelques techniques. Pour v√©rifier si un mot de passe ou bien un token ne serait pas expos√© dans une documentation publique sur internet par exemple.</p>
<p><strong><strong><strong><strong><strong><strong><strong><strong>Connaitre les mots cl√©s :</strong></strong></strong></strong></strong></strong></strong></strong> <code>site:root-me.org</code>, <code>ext:pdf</code>, <code>‚Äúpassword‚Äù</code> permettent d‚Äôaffiner les recherches sur un site en particulier.</p>
<p>Recensement des failles trouv√©es dans Google : <a href="https://www.exploit-db.com/google-hacking-database">https://www.exploit-db.com/google-hacking-database</a></p>
<h3>OSINT</h3>
<p>Renseignement en source ouverte.</p>
<p>Rechercher :</p>
<ul>
<li>Adresses mail, Domaines</li>
<li>D√©p√¥ts Github</li>
<li>Fuites de bases de donn√©es</li>
</ul>
<p>√Ä la main ou avec des outils sp√©cialis√©s :</p>
<ul>
<li><a href="https://github.com/laramies/theHarvester">https://github.com/laramies/theHarvester</a></li>
<li><a href="https://github.com/lanmaster53/recon-ng">https://github.com/lanmaster53/recon-ng</a></li>
</ul>
<p>Et recherches plus larges sur le Darknet.</p>
<p>Autre outil connu avant de lire ce cours : <a href="https://epieos.com/">https://epieos.com/</a> qui permet de retrouver tous les comptes sur des services o√π une adresse mail ou un num√©ro de t√©l√©phone serait utilis√©.</p>
<h2>Reconnaissance active</h2>
<p>Outils techniques pour explorer plus largement le SI d‚Äôune entreprise.</p>
<ul>
<li>Registre whois</li>
<li>√ânum√©ration des domaines et scrapping des urls trouv√©s dans chacun</li>
<li>Certificats TLS - Transport Layer Security</li>
<li>Historique DNS</li>
</ul>
<p>Outil le plu complet d‚Äôexploration : <a href="https://github.com/OWASP/Amass">https://github.com/OWASP/Amass</a> de OWASP, dispo sur Kali.</p>
<p>Exemple : Pour lister les domaines de <a href="http://centrale-marseille.fr">centrale-marseille.fr</a> (attention, √† ne pas faire sans l'accord du site !)</p>
<pre class="language-bash"><code class="language-bash">amass enum <span class="token parameter variable">-d</span> <span class="token punctuation">[</span>centrale-marseille.fr<span class="token punctuation">]</span><span class="token punctuation">(</span>http://centrale-marseille.fr/<span class="token punctuation">)</span> <span class="token parameter variable">-src</span> <span class="token parameter variable">-active</span></code></pre>
<p>Avec comme param√®tres :</p>
<ul>
<li><code>-src</code> pour afficher les sources de donn√©es</li>
<li><code>-active</code> pour aller chercher dans les certificats les noms de domaine √† tester</li>
</ul>
<h2>Nmap</h2>
<ul>
<li><strong>Sans param√®tre (= Scan SYN) :</strong></li>
</ul>
<ol>
<li>R√©sout le nom DNS de l'h√¥te.</li>
<li>Ping l'h√¥te.</li>
<li>Si l'h√¥te r√©pond, r√©alise un ‚ÄúSYN scan‚Äù.</li>
<li>Ne scanne que les 1 000 premiers ports les plus connus sur les 65¬†535 possibles.</li>
<li>Ne fait pas de d√©tection du service en √©coute.</li>
</ol>
<blockquote>
<p>N‚Äôenvoie qu‚Äôun paquet SYN et attend la r√©ponse SYN+ACK.
N‚Äôenvoie jamais le ACK ou le RST.
La connexion reste donc ouverte chez le serveur, jusqu‚Äôau timeout !</p>
</blockquote>
<ul>
<li><strong>Option <code>-p</code> :</strong> Scan des ports dans une range de 0-65535</li>
<li><strong>Option <code>-sV</code> :</strong> V√©rifie le service en √©coute et sa version</li>
<li><strong>Option <code>-oA</code> :</strong> Pour enregistrer les r√©sultats dans un format sp√©cifique, dans l‚Äôexemple <code>-oA metasploit2</code>.</li>
</ul>
<p>Il conviendrait de mettre en pratique les diff√©rentes options de Nmap car cet outil semble √™tre √† la base de toute investigation en pentest.</p>
<h2>Recherche des exploits √† l‚Äôissue du scan</h2>
<p>Avec Google, dans un premier temps</p>
<p>Avec des outils sp√©cialis√©s ensuite, comme <a href="https://cve.mitre.org/index.html">https://cve.mitre.org/index.html</a> ou <a href="https://www.cvedetails.com/">https://www.cvedetails.com/</a> qui donne le d√©tail sur les CVE  (Common Vulnerability Exposure) recens√©es.</p>
<blockquote>
<p><strong>UTM (Unified Threat Management) :</strong>
Logiciel qui peut fausser le r√©sultat des scans lorsqu‚Äôils d√©tectent qu‚Äôils sont scann√©s, entre autre !</p>
</blockquote>
<h2>Chiffrement, Cryptographie</h2>
<ul>
<li>
<p><strong>Communication TLS</strong></p>
<p>Discussion entre client et serveur</p>
</li>
<li>
<p><strong>Failles dans chiffrement ?</strong></p>
<p>V√©rifier la qualit√© du certificat TLS</p>
<p>V√©rifier les protocoles propos√©s par le serveur</p>
<p>Suites de chiffrement</p>
<p>Les libraires utilis√©es, parfois comportant des failles</p>
</li>
</ul>
<img src="https://user.oc-static.com/upload/2022/07/21/16584160662712_FR_7727176_Intrusion-Web_Static-Assets_p2c4-1a.png" alt="Sch√©ma HTTPS">
<blockquote>
<p>Dans le test d‚Äôintrusion, on v√©rifiera surtout la <strong>qualit√© du certificat</strong>.</p>
<ul>
<li>qui peut ne pas √™tre dans sa p√©riode de validit√© ;</li>
<li>dont le champ¬†<code>subject name</code> ne correspond pas au nom DNS du site ;</li>
<li>dont l‚Äôautorit√© de certification n‚Äôest pas connue de votre ordinateur ;</li>
<li>qui peut simplement √™tre r√©voqu√© ;</li>
</ul>
<p>i.e. ‚ÄúVotre connexion n‚Äôest pas priv√©e‚Äù parfois indiqu√© dans les navigateurs :</p>
</blockquote>
<p>Encore, diff√©rents outils :</p>
<p><a href="https://www.ssllabs.com/ssltest/">https://www.ssllabs.com/ssltest/</a>, <a href="https://github.com/rbsec/sslscan">https://github.com/rbsec/sslscan</a>, <a href="https://github.com/drwetter/testssl.sh">https://github.com/drwetter/testssl.sh</a></p>
<h2>Protocoles et suites de chiffrement</h2>
<p>Protocoles :</p>
<ul>
<li>
<p>SSL v2 ;</p>
</li>
<li>
<p>SSL v3 ;</p>
</li>
<li>
<p>TLS v1.0 ;</p>
</li>
<li>
<p>TLS v1.1 ;</p>
</li>
<li>
<p>TLS v1.2 ;</p>
</li>
<li>
<p>TLS v1.3.</p>
</li>
</ul>
<p>Seuls les protocoles en vert sont aujourd‚Äôhui recommand√©s pour HTTPS.</p>
<p>Pour chaque, il existe une liste de <strong>suites de chiffrements</strong> compatibles, de cette forme :</p>
<p><code>&lt;algo √©change de cl√©&gt;-&lt;algo authentification&gt;-&lt;algo chiffrement sym√©trique et taille de cl√©&gt;-&lt;algo signature&gt;</code></p>
<p>Ex : <code>ECDHE-RSA-AES128-GCM-SHA256</code></p>
<ul>
<li><code>ECDHE</code> pour l‚Äô<strong>√©change de cl√©s</strong>¬†;</li>
<li><code>RSA</code> pour l‚Äô<strong>authentification</strong>¬†;</li>
<li><code>AES-128</code> pour le¬†<strong>chiffrement</strong>¬†;</li>
<li><code>GCM</code> pour le mode d‚Äôop√©ration du chiffrement par bloc (ce qui ne nous int√©resse que peu dans notre cas de pentester, sauf dans certains cas tr√®s particuliers) ;</li>
<li><code>SHA-256</code> pour la¬†<strong>signature</strong>.</li>
</ul>
<p>Installation de SSLscan et utilisation :</p>
<p>Pull du projet Github. Lecture de la documentation <a href="https://www.oreilly.com/library/view/web-penetration-testing/9781788623377/285990a3-9992-40b0-ac36-69adc6fb47ce.xhtml">https://www.oreilly.com/library/view/web-penetration-testing/9781788623377/285990a3-9992-40b0-ac36-69adc6fb47ce.xhtml</a></p>
<p>Dans le test effectu√© pour l‚Äôexemple sur root-me <code>sslscan [ctf12.root-me.org](http://ctf12.root-me.org/):443</code>, les protocoles utilis√©s sont tous anciens et vuln√©rables. Nous verrons ensuite comment exploiter ces vuln√©rabilit√©s. ‚Üí Mettre √† jour openssl pour le serveur vuln√©rable</p>
<h2>Attaque d‚Äôun application web</h2>
<h3>Utilisation d‚Äôun proxy d‚Äôinterception</h3>
<p>Comme un proxy (~VPN) mais qui est charg√© de monitorer le trafic r√©seau vers l‚Äôapplication que l‚Äôon analyse.</p>
<p>Outil : <strong>Burp Suite Community</strong></p>
<aside>
‚ÑπÔ∏è **Installation** :
Revoir le tutoriel qui ne d√©taille pas comment configurer le proxy. Ensuite, les vid√©os de tutoriel sur cet outil sont bien faites, elles expliquent comment configurer l‚Äôoutil puis les fonctionnalit√©s offertes par ce dernier.
</aside>
<p>Onglets utiles : Intruder pour automatiser les requ√™tes et mener plusieurs fois une m√™me attaque dans le scope, Repeater pour rejouer une requ√™te avec des param√®tres diff√©rents.</p>
<p>J‚Äôai pu utiliser l‚Äôoutil Intruder avec un dictionnaire de chemins courants (index, index.php, ‚Ä¶) pour tester un √† un tous ces chemins et avoir la satisfaction de r√©ussir le challenge disponible √† l‚Äôadresse : <a href="https://www.root-me.org/fr/Challenges/Web-Serveur/Fichier-de-sauvegarde">https://www.root-me.org/fr/Challenges/Web-Serveur/Fichier-de-sauvegarde</a></p>
<h2>Attaques par dictionnaire</h2>
<p>Outil : seclists</p>
<p>Apr√®s l‚Äôinstallation avec <code>sudo apt install seclists</code>, nous avons des listes de dictionnaires dans le r√©pertoire <code>/usr/share/seclists/</code>.</p>
<p>De nombreuses listes sont disponibles sur internet, comme celles utilis√©es dans le pr√©c√©dent challenge : <a href="https://github.com/danielmiessler/SecLists/blob/master/Discovery/Web-Content/PHP.fuzz.txt">https://github.com/danielmiessler/SecLists/blob/master/Discovery/Web-Content/PHP.fuzz.txt</a></p>


</article>

        </main>


        <footer class="min-h-[50px] border-t-2 border-gray-200 mt-4">
            <div class="max-w-[1000px] mx-auto px-4">
                <div class="min-h-[50px] flex justify-center items-center">
                    <p class="text-center">
                        <span style="font-family: Consolas, sans-serif;">Do_<span style="color: #4a86e8">It</span></span> : D√©veloppent et Organisation en IT
                    </p>
                </div>
            </div>
        </footer>

        <script>
        MathJax
            .startup
            .document
            .getMathItemsWithin(document.body);
        </script>

    </body>
</html>
