
<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Implémentation de statistiques sur le Poker avec Python</title>

        <link href="/do-it/assets/node_modules/prismjs/themes/prism-solarizedlight.min.css" rel="stylesheet">
        <link href="/do-it/assets/node_modules/prismjs/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet">

        <link href="/do-it/assets/stylesheets/main.css" rel="stylesheet">
    </head>
    <body>
        <script>
        window.MathJax = {
            tex: {
            inlineMath: [
                [
                '$', '$'
                ],
                [
                '\\(', '\\)'
                ]
            ]
            },
            svg: {
            fontCache: 'global'
            }
        };
        </script>
        <script type="text/javascript" id="MathJax-script" src="/do-it/assets/node_modules/mathjax/es5/tex-svg-full.js"></script>

        <header class="border-b-2 border-gray-200 mb-4">
        <div class="max-w-[1000px] mx-auto px-4">
            <div class="min-h-[50px] flex justify-between items-center">
                <a class="mx-2" href="/do-it/">Home</a>
                <div class="flex items-center gap-4 sm:gap-6 ">
                    <a class="" href="/do-it/cs">CS</a>
                    <a class="" href="/do-it/pok">POK</a>
                    <a class="" href="/do-it/mon">MON</a>
                    <a class="" href="/do-it/projets">Projets</a>
                    <a class="hidden sm:block" href="/do-it/promos">Promos</a>
                    <a href="/do-it/search">
                        <svg class="h-5 aspect-square" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path>
                        </svg>
                    </a>
                    <a class="hidden sm:block" href="https://github.com/FrancoisBrucker/do-it" target="_blank">
                        <svg class="h-5 aspect-square" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg>
                    </a>
                </div>
            </div>
        </div>
        </header>

        <main class="max-w-[1000px] mx-auto px-4" data-pagefind-body="">
            
<article class="relative">
<h1 class="mb-1">Implémentation de statistiques sur le Poker avec Python</h1>
<div class="mb-4">
    
        <div class="px-4 flex flex-wrap items-center">
            
                <div class="font-bold">Tags : </div>
            
            <ul class="flex flex-wrap overflow-auto not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Tags">
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">POK</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">2023-2024</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">temps 3</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">Python</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">Programmation objet</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">Interfaces graphiques</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">Poker</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">Probabilités</li>
                

            </ul>
            
            
            <div class="hidden" data-pagefind-meta="Type">
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </div>
        </div>
    

    
        <div class="px-4 flex flex-wrap items-center">
            <div class="font-bold">Auteurs : </div>
            <ul class="flex flex-wrap not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Auteurs">
                
                    <li class="bg-blue-200 rounded-full px-2" data-pagefind-filter="Auteurs">Duc DANG VU</li>
                
            </ul>
        </div>
    

    
</div>

        <p class="mb-4 text-lg">

                Ce POK traitera de l'implémentation sur Python d'un programme qui permettra de calculer des statistiques autour du jeu de Poker. Ce POK implémentera également une interface qui aidera le joueur à jouer en fonction de la situation.

        </p>



    
<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-purple-500 bg-purple-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-purple-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"></path>
</svg>
<div class="pl-8 mr-8">

<a href="/do-it/promos/">Promotions</a><span class="px-1">/</span><a href="/do-it/promos/2023-2024/">2023-2024</a><span class="px-1">/</span><a href="/do-it/promos/2023-2024/Dang-Vu-Duc/">Duc DANG VU</a><span class="px-1">/</span><a href="/do-it/promos/2023-2024/Dang-Vu-Duc/pok/">POK de Duc DANG VU</a><span class="px-1">/</span><a href="/do-it/promos/2023-2024/Dang-Vu-Duc/pok/temps-3/">Implémentation de statistiques sur le Poker avec Python</a>

</div></div>




<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-pink-500 bg-pink-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-pink-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
</svg>
<div class="pl-8 mb-2 mr-8">
<p>Prérequis</p>
</div><div class="pl-8 mr-8">
<p>Connaissance basique de la programmation objet avec Python et des règles du jeu du poker. Connaissance du <a href="../../mon/temps-1.1">module Qt pour Python</a></p>
</div></div>
<div class="quote relative drop-shadow  py-2 pr-2 rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-amber-800 bg-amber-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-amber-800" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Tout les codes présentés sont disponibles dans mon <a href="https://github.com/FrancoisBrucker/do-it/tree/main/src/promos/2023-2024/Dang-Vu-Duc/pok/temps-3">dossier GitHub de temps 3</a></p>
</div></div>
<h2>Introduction</h2>
<p>Le poker est un jeu de carte très répandu et populaire. On le trouve dans tous les casinos et ce jeu est très complexe a comprendre en profondeur. Il y a tout un aspect mathématique et probabiliste autour du jeu et qui est très important à comprendre pour devenir fort à ce jeu. Ce POK traitera donc de cette dimension, et présentera donc des programmes Python pour calculer différents aspects du poker (variante Texas Hold'em). Le lecteur doit avoir une vague connaissance des règles du poker (notamment les combinaisons des cartes), et les termes plus techniques seront expliqué en temps voulu.</p>
<p>Le premier sprint sera dédié à l'écriture des méthodes de bases pour implémenter les différentes structures de données relatives au jeu de poker. Nous allons ensuite les utiliser pour montrer et représenter des premières statistiques sur ce jeu, en les mettant en forme grâce à diverses interfaces graphiques. Ensuite, le deuxième sprint utilisera les méthodes écrites lors du premier sprint pour élaborer une interface d'aide au jeu. Cette interface conseillera le joueur sur la décision à prendre selon la situation actuelle du jeu.</p>
<h2>Backlog du premier sprint</h2>
<p>Comme mentionné dans l'introduction, ce premier sprint aura pour objectif de créer des interfaces graphiques pour présenter des statistiques sur le jeu. Voici le backlog de ce premier sprint, ainsi que leurs complexités et leurs temps de réalisation estimé:</p>
<ul>
<li>Implémentation des structures de données de base, ainsi que leurs méthodes associées (cartes, jeu de carte, pioche...): <strong>1, 15min</strong></li>
<li>Implémentation de la méthode pour déterminer la combinaison d'une main: <strong>3, 1h</strong></li>
<li>Implémentation de la méthode pour avoir toutes les mains possibles: <strong>1, 15min</strong></li>
<li>Implémentation de la méthode pour déterminer le gagnant entre deux mains: <strong>2, 45min</strong></li>
<li>Implémentation de la méthode pour obtenir différents taux de réussite: <strong>3, 1h15</strong></li>
<li>Réalisation de tests pour vérifier le bon fonctionnement des méthodes, débogage: <strong>3, 1h30</strong></li>
<li>Réalisation et design des fenêtres pour les interfaces graphiques: <strong>3, 2h</strong></li>
<li>Création du backend des interfaces: <strong>2, 2h</strong></li>
<li>Tests et débogage des interfaces: <strong>2, 1h</strong></li>
</ul>
<h2>Implémentation du code pour effectuer les simulations</h2>
<h3>Structures de données de base</h3>
<p>La première étape de ce projet est de créer les structures de données de base qui vont être utilisées tout le long de ce projet. Il faut donc créer une classe <strong>Card</strong>, dont les objets représenteront les différentes cartes. Ces objets auront donc les attributs suivant:</p>
<ul>
<li><em>value</em>: correspond à la valeur de la carte (11 pour le Valet, 12 pour la Dame, 13 pour le Roi et 14 pour l'As)</li>
<li><em>suit</em>: correspond à la couleur de la carte (coeur, carreau, trèfle ou pique)</li>
<li><em>name</em>: correspond au nom de la carte (&quot;As de coeur, &quot;3 de pique&quot;, &quot;Dame de carreau&quot; etc...)</li>
</ul>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Cliquer pour voir le code de la classe <strong>Card</strong></p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<pre class="language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Card</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">,</span> suit<span class="token punctuation">)</span><span class="token punctuation">:</span>
      self<span class="token punctuation">.</span>value <span class="token operator">=</span> value
      self<span class="token punctuation">.</span>suit <span class="token operator">=</span> suit
      <span class="token keyword">if</span> value <span class="token operator">==</span> <span class="token number">14</span><span class="token punctuation">:</span>
          self<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"As de "</span> <span class="token operator">+</span> suit
      <span class="token keyword">elif</span> value <span class="token operator">==</span> <span class="token number">13</span><span class="token punctuation">:</span>
          self<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"Roi de "</span> <span class="token operator">+</span> suit
      <span class="token keyword">elif</span> value <span class="token operator">==</span> <span class="token number">12</span><span class="token punctuation">:</span>
          self<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"Dame de "</span> <span class="token operator">+</span> suit
      <span class="token keyword">elif</span> value <span class="token operator">==</span> <span class="token number">11</span><span class="token punctuation">:</span>
          self<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"Valet de "</span> <span class="token operator">+</span> suit
      <span class="token keyword">else</span><span class="token punctuation">:</span>
          self<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span><span class="token string"> de "</span></span> <span class="token operator">+</span> suit</code></pre>
</div>
</details>     
</div>
<p>Ensuite, on créé une classe <strong>Poker_methods</strong> qui, comme son nom l'indique, contiendra toutes les méthodes pour effectuer les simulations. L'initialisation de cette classe crée un jeu de 52 cartes, qui est une liste contenant 52 objets de la classe <strong>Card</strong>. Lors de cette étape, on crée aussi une liste contenant les 1326 mains de départ distinctes possibles (52*51) et les 169 mains possibles si l'on exclut les mains de même valeur. En effet, en termes de probabilités, deux mains qui ont les deux mêmes valeurs et une combinaison de couleur similaire ont la m$eme valeur. Par exemple, la main 3 de coeur - 6 de carreau et 3 de pique - 6 de trèfle ont la même valeur, tout comme les mains Roi de pique - Dame de pique et Roi de carreau - Dame de carreau.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Cliquer pour voir l'initialisation de la classe <strong>Poker_methods</strong></p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
  self<span class="token punctuation">.</span>restart_deck<span class="token punctuation">(</span><span class="token punctuation">)</span>
  self<span class="token punctuation">.</span>all_possible_hands <span class="token operator">=</span> self<span class="token punctuation">.</span>get_all_possible_hands<span class="token punctuation">(</span><span class="token punctuation">)</span>
  self<span class="token punctuation">.</span>all_possible_hands_2 <span class="token operator">=</span> self<span class="token punctuation">.</span>get_all_possible_hands_2<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">restart_deck</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
  self<span class="token punctuation">.</span>deck <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">for</span> value <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> suit <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"coeur"</span><span class="token punctuation">,</span> <span class="token string">"carreau"</span><span class="token punctuation">,</span> <span class="token string">"trèfle"</span><span class="token punctuation">,</span> <span class="token string">"pique"</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
      self<span class="token punctuation">.</span>deck<span class="token punctuation">.</span>append<span class="token punctuation">(</span>Card<span class="token punctuation">(</span>value<span class="token punctuation">,</span> suit<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">get_all_possible_hands</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
  all_possible_hands <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  list_card_names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  suits <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"coeur"</span><span class="token punctuation">,</span> <span class="token string">"carreau"</span><span class="token punctuation">,</span> <span class="token string">"trèfle"</span><span class="token punctuation">,</span> <span class="token string">"pique"</span><span class="token punctuation">]</span>
  values <span class="token operator">=</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">)</span>
  <span class="token keyword">for</span> first_suit <span class="token keyword">in</span> suits<span class="token punctuation">:</span>
    <span class="token keyword">for</span> first_value <span class="token keyword">in</span> values<span class="token punctuation">:</span>
      first_card <span class="token operator">=</span> Card<span class="token punctuation">(</span>first_value<span class="token punctuation">,</span> first_suit<span class="token punctuation">)</span>
      <span class="token keyword">for</span> second_suit <span class="token keyword">in</span> suits<span class="token punctuation">:</span>
        <span class="token keyword">for</span> second_value <span class="token keyword">in</span> values<span class="token punctuation">:</span>
          second_card <span class="token operator">=</span> Card<span class="token punctuation">(</span>second_value<span class="token punctuation">,</span> second_suit<span class="token punctuation">)</span>
          <span class="token keyword">if</span> first_card<span class="token punctuation">.</span>name <span class="token operator">!=</span> second_card<span class="token punctuation">.</span>name <span class="token keyword">and</span> <span class="token punctuation">[</span>second_card<span class="token punctuation">.</span>name<span class="token punctuation">,</span> first_card<span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token keyword">not</span> <span class="token keyword">in</span> list_card_names<span class="token punctuation">:</span>
            all_possible_hands<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>first_card<span class="token punctuation">,</span> second_card<span class="token punctuation">]</span><span class="token punctuation">)</span>
            list_card_names<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>first_card<span class="token punctuation">.</span>name<span class="token punctuation">,</span> second_card<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span><span class="token punctuation">(</span>all_possible_hands<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">get_all_possible_hands_2</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
  all_possible_hands_2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  values <span class="token operator">=</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">)</span>
  <span class="token keyword">for</span> first_value <span class="token keyword">in</span> values<span class="token punctuation">:</span>
      <span class="token keyword">for</span> second_value <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>first_value<span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
          first_card <span class="token operator">=</span> Card<span class="token punctuation">(</span>first_value<span class="token punctuation">,</span> <span class="token string">"coeur"</span><span class="token punctuation">)</span>
          second_card <span class="token operator">=</span> Card<span class="token punctuation">(</span>second_value<span class="token punctuation">,</span> <span class="token string">"coeur"</span><span class="token punctuation">)</span>
          <span class="token keyword">if</span> first_card<span class="token punctuation">.</span>name <span class="token operator">!=</span> second_card<span class="token punctuation">.</span>name<span class="token punctuation">:</span>
              <span class="token keyword">if</span> first_value <span class="token operator">></span> second_value<span class="token punctuation">:</span>
                  all_possible_hands_2<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>first_card<span class="token punctuation">,</span> second_card<span class="token punctuation">]</span><span class="token punctuation">)</span>
              <span class="token keyword">else</span><span class="token punctuation">:</span>
                  all_possible_hands_2<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>second_card<span class="token punctuation">,</span> first_card<span class="token punctuation">]</span><span class="token punctuation">)</span>
          first_card <span class="token operator">=</span> Card<span class="token punctuation">(</span>first_value<span class="token punctuation">,</span> <span class="token string">"coeur"</span><span class="token punctuation">)</span>
          second_card <span class="token operator">=</span> Card<span class="token punctuation">(</span>second_value<span class="token punctuation">,</span> <span class="token string">"pique"</span><span class="token punctuation">)</span>
          <span class="token keyword">if</span> first_card<span class="token punctuation">.</span>name <span class="token operator">!=</span> second_card<span class="token punctuation">.</span>name<span class="token punctuation">:</span>
              <span class="token keyword">if</span> first_value <span class="token operator">></span> second_value<span class="token punctuation">:</span>
                  all_possible_hands_2<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>first_card<span class="token punctuation">,</span> second_card<span class="token punctuation">]</span><span class="token punctuation">)</span>
              <span class="token keyword">else</span><span class="token punctuation">:</span>
                  all_possible_hands_2<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>second_card<span class="token punctuation">,</span> first_card<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span><span class="token punctuation">(</span>all_possible_hands_2<span class="token punctuation">)</span></code></pre>
</div>
</details>     
</div>
<p>On crée ensuite une méthode qui permet de piocher une carte du jeu de carte. Cette méthode choisit une carte aléatoirement et la retire de l'attribut <em>deck</em> de l'objet.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Cliquer pour voir le code de la méthode <em>draw</em></p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">draw</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
  index <span class="token operator">=</span> rd<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>deck<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
  card <span class="token operator">=</span> self<span class="token punctuation">.</span>deck<span class="token punctuation">[</span>index<span class="token punctuation">]</span>
  self<span class="token punctuation">.</span>deck<span class="token punctuation">.</span>pop<span class="token punctuation">(</span>index<span class="token punctuation">)</span>
  <span class="token keyword">return</span><span class="token punctuation">(</span>card<span class="token punctuation">)</span></code></pre>
</div>
</details>     
</div>
<h3>Implémentation des méthodes pour effectuer les simulations</h3>
<p>Maintenant que l'on a implémenter les méthodes de base pour manipuler les structures de données, nous allons implémenter les fonctions pour faire les simulations. La première méthode est celle qui va permettre de déterminer le score d'un joueur, étant donné sa main de deux cartes et le tableau en cours de 5 cartes. Cette méthode prend donc en argument ces deux éléments et renvoie un score variant de 0 à 9, correspondant à une combinaison de mains (de carte haute à Quinte Flush Royale). Cette méthode retourne également une liste contenant les &quot;kickers&quot; de la main évaluée. Cette liste va permettre de départager deux joueurs si jamais ils ont la même main. Par exemple, si les deux joueurs ont une Couleur, il faut regarder la valeur de la carte la plus élevée pour les départager.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Cliquer pour voir le code de la méthode <em>get_score</em></p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">get_score</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> player_hand<span class="token punctuation">,</span> board<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 0 = Carte haute</span>
        <span class="token comment"># 1 = Une paire</span>
        <span class="token comment"># 2 = Deux paires</span>
        <span class="token comment"># 3 = Brelan</span>
        <span class="token comment"># 4 = Quinte</span>
        <span class="token comment"># 5 = Couleur</span>
        <span class="token comment"># 6 = Full</span>
        <span class="token comment"># 7 = Carré</span>
        <span class="token comment"># 8 = Quinte Flush</span>
        <span class="token comment"># 9 = Quinte Flush Royale</span>
        cards <span class="token operator">=</span> player_hand <span class="token operator">+</span> board
        values <span class="token operator">=</span> <span class="token punctuation">[</span>card<span class="token punctuation">.</span>value <span class="token keyword">for</span> card <span class="token keyword">in</span> cards<span class="token punctuation">]</span>
        suits <span class="token operator">=</span> <span class="token punctuation">[</span>card<span class="token punctuation">.</span>suit <span class="token keyword">for</span> card <span class="token keyword">in</span> cards<span class="token punctuation">]</span>
        list_values <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">set</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">)</span>
        list_suits <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">set</span><span class="token punctuation">(</span>suits<span class="token punctuation">)</span><span class="token punctuation">)</span>
        list_count_values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        list_count_suits <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> value <span class="token keyword">in</span> list_values<span class="token punctuation">:</span>
            list_count_values<span class="token punctuation">.</span>append<span class="token punctuation">(</span>values<span class="token punctuation">.</span>count<span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> suit <span class="token keyword">in</span> list_suits<span class="token punctuation">:</span>
            list_count_suits<span class="token punctuation">.</span>append<span class="token punctuation">(</span>suits<span class="token punctuation">.</span>count<span class="token punctuation">(</span>suit<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">3</span> <span class="token keyword">in</span> list_count_values <span class="token keyword">and</span> <span class="token number">2</span> <span class="token keyword">in</span> list_count_values<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token comment"># Premier cas du Full</span>
            index_first_kicker <span class="token operator">=</span> list_count_values<span class="token punctuation">.</span>index<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
            index_second_kicker <span class="token operator">=</span> <span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>list_count_values<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">if</span> list_count_values<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">]</span>
            first_kicker <span class="token operator">=</span> list_values<span class="token punctuation">[</span>index_first_kicker<span class="token punctuation">]</span>
            list_candidates <span class="token operator">=</span> <span class="token punctuation">[</span>list_values<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token keyword">for</span> index <span class="token keyword">in</span> index_second_kicker<span class="token punctuation">]</span>
            second_kicker <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>list_candidates<span class="token punctuation">)</span>
            <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>first_kicker<span class="token punctuation">,</span> second_kicker<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">elif</span> <span class="token punctuation">(</span>list_count_values<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># Deuxième cas du Full</span>
            index_first_kicker <span class="token operator">=</span> <span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>list_count_values<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">if</span> list_count_values<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">]</span>
            list_candidates <span class="token operator">=</span> <span class="token punctuation">[</span>list_values<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token keyword">for</span> index <span class="token keyword">in</span> index_first_kicker<span class="token punctuation">]</span>
            first_kicker <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>list_candidates<span class="token punctuation">)</span>
            second_kicker <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>list_candidates<span class="token punctuation">)</span>
            <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>first_kicker<span class="token punctuation">,</span> second_kicker<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">elif</span> <span class="token number">4</span> <span class="token keyword">in</span> list_count_values<span class="token punctuation">:</span> <span class="token comment"># Carré</span>
            index_first_kicker <span class="token operator">=</span> list_count_values<span class="token punctuation">.</span>index<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
            index_second_kicker <span class="token operator">=</span> <span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>list_count_values<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">if</span> list_count_values<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">4</span><span class="token punctuation">]</span>
            list_candidates <span class="token operator">=</span> <span class="token punctuation">[</span>list_values<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token keyword">for</span> index <span class="token keyword">in</span> index_second_kicker<span class="token punctuation">]</span>
            second_kicker <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>list_candidates<span class="token punctuation">)</span>
            first_kicker <span class="token operator">=</span> list_values<span class="token punctuation">[</span>index_first_kicker<span class="token punctuation">]</span>
            <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>first_kicker<span class="token punctuation">,</span> second_kicker<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">elif</span> <span class="token number">5</span> <span class="token keyword">in</span> list_count_suits <span class="token keyword">or</span> <span class="token number">6</span> <span class="token keyword">in</span> list_count_suits <span class="token keyword">or</span> <span class="token number">7</span> <span class="token keyword">in</span> list_count_suits<span class="token punctuation">:</span> <span class="token comment"># Couleur</span>
            <span class="token keyword">if</span> <span class="token number">5</span> <span class="token keyword">in</span> list_count_suits<span class="token punctuation">:</span>
                index_winner_suit <span class="token operator">=</span> list_count_suits<span class="token punctuation">.</span>index<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
            <span class="token keyword">elif</span> <span class="token number">6</span> <span class="token keyword">in</span> list_count_suits<span class="token punctuation">:</span>
                index_winner_suit <span class="token operator">=</span> list_count_suits<span class="token punctuation">.</span>index<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
            <span class="token keyword">elif</span> <span class="token number">7</span> <span class="token keyword">in</span> list_count_suits<span class="token punctuation">:</span>
                index_winner_suit <span class="token operator">=</span> list_count_suits<span class="token punctuation">.</span>index<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span> 
            winner_suit <span class="token operator">=</span> list_suits<span class="token punctuation">[</span>index_winner_suit<span class="token punctuation">]</span>
            list_candidates <span class="token operator">=</span> <span class="token punctuation">[</span>cards<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>value <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>cards<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">if</span> cards<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>suit <span class="token operator">==</span> winner_suit<span class="token punctuation">]</span>
            list_candidates_removed <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">set</span><span class="token punctuation">(</span>list_candidates<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>list_candidates_removed<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">5</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> <span class="token number">14</span> <span class="token keyword">not</span> <span class="token keyword">in</span> list_candidates_removed<span class="token punctuation">:</span>
                    values_sorted <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>list_candidates_removed<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
                    <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>list_candidates_removed<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                        current_list <span class="token operator">=</span> values_sorted<span class="token punctuation">[</span>k<span class="token punctuation">:</span>k<span class="token operator">+</span><span class="token number">5</span><span class="token punctuation">]</span>
                        <span class="token keyword">if</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>current_list<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">min</span><span class="token punctuation">(</span>current_list<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token punctuation">(</span>current_list<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                            <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>current_list<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>list_candidates<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token keyword">elif</span> <span class="token number">14</span> <span class="token keyword">in</span> list_candidates_removed<span class="token punctuation">:</span>
                    values_sorted <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>list_candidates_removed<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
                    <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>list_candidates_removed<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                        current_list <span class="token operator">=</span> values_sorted<span class="token punctuation">[</span>k<span class="token punctuation">:</span>k<span class="token operator">+</span><span class="token number">5</span><span class="token punctuation">]</span>
                        <span class="token keyword">if</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>current_list<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">min</span><span class="token punctuation">(</span>current_list<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token punctuation">(</span>current_list<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                            <span class="token keyword">if</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>current_list<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">14</span><span class="token punctuation">:</span>
                                <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>current_list<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                            <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>current_list<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    new_values <span class="token operator">=</span> <span class="token punctuation">[</span>element <span class="token keyword">if</span> element <span class="token operator">!=</span> <span class="token number">14</span> <span class="token keyword">else</span> <span class="token number">1</span> <span class="token keyword">for</span> element <span class="token keyword">in</span> list_candidates_removed<span class="token punctuation">]</span>
                    values_sorted <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>new_values<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
                    <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>list_candidates_removed<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                        current_list <span class="token operator">=</span> values_sorted<span class="token punctuation">[</span>k<span class="token punctuation">:</span>k<span class="token operator">+</span><span class="token number">5</span><span class="token punctuation">]</span>
                        <span class="token keyword">if</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>current_list<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">min</span><span class="token punctuation">(</span>current_list<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token punctuation">(</span>current_list<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                            <span class="token keyword">if</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>current_list<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">14</span><span class="token punctuation">:</span>
                                <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>current_list<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                            <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>current_list<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>list_candidates<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>list_values<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">5</span><span class="token punctuation">:</span> <span class="token comment"># Quinte</span>
            <span class="token keyword">if</span> <span class="token number">14</span> <span class="token keyword">not</span> <span class="token keyword">in</span> list_values<span class="token punctuation">:</span>
                values_sorted <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>list_values<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
                <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>list_values<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                    current_list <span class="token operator">=</span> values_sorted<span class="token punctuation">[</span>k<span class="token punctuation">:</span>k<span class="token operator">+</span><span class="token number">5</span><span class="token punctuation">]</span>
                    <span class="token keyword">if</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>current_list<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">min</span><span class="token punctuation">(</span>current_list<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token punctuation">(</span>current_list<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                        <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>current_list<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">elif</span> <span class="token number">14</span> <span class="token keyword">in</span> list_values<span class="token punctuation">:</span>
                values_sorted <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>list_values<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
                <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>list_values<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                    current_list <span class="token operator">=</span> values_sorted<span class="token punctuation">[</span>k<span class="token punctuation">:</span>k<span class="token operator">+</span><span class="token number">5</span><span class="token punctuation">]</span>
                    <span class="token keyword">if</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>current_list<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">min</span><span class="token punctuation">(</span>current_list<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token punctuation">(</span>current_list<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                        <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>current_list<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                new_values <span class="token operator">=</span> <span class="token punctuation">[</span>element <span class="token keyword">if</span> element <span class="token operator">!=</span> <span class="token number">14</span> <span class="token keyword">else</span> <span class="token number">1</span> <span class="token keyword">for</span> element <span class="token keyword">in</span> list_values<span class="token punctuation">]</span>
                values_sorted <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>new_values<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
                <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>list_values<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                    current_list <span class="token operator">=</span> values_sorted<span class="token punctuation">[</span>k<span class="token punctuation">:</span>k<span class="token operator">+</span><span class="token number">5</span><span class="token punctuation">]</span>
                    <span class="token keyword">if</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>current_list<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">min</span><span class="token punctuation">(</span>current_list<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">max</span><span class="token punctuation">(</span>current_list<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                        <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>current_list<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token number">3</span> <span class="token keyword">in</span> list_count_values<span class="token punctuation">:</span> <span class="token comment"># Brelan</span>
            index_first_kicker <span class="token operator">=</span> <span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>list_count_values<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">if</span> list_count_values<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">]</span>
            list_candidates <span class="token operator">=</span> <span class="token punctuation">[</span>list_values<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token keyword">for</span> index <span class="token keyword">in</span> index_first_kicker<span class="token punctuation">]</span>
            first_kicker <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>list_candidates<span class="token punctuation">)</span>
            index_second_kicker <span class="token operator">=</span> <span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>list_count_values<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">if</span> list_count_values<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">3</span><span class="token punctuation">]</span>
            list_candidates <span class="token operator">=</span> <span class="token punctuation">[</span>list_values<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token keyword">for</span> index <span class="token keyword">in</span> index_second_kicker<span class="token punctuation">]</span>
            list_kickers <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>list_candidates<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>first_kicker<span class="token punctuation">]</span> <span class="token operator">+</span> list_kickers<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">elif</span> list_count_values<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">2</span><span class="token punctuation">:</span> <span class="token comment"># Deux paires</span>
            index_first_kicker <span class="token operator">=</span> <span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>list_count_values<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">if</span> list_count_values<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">]</span>
            list_candidates <span class="token operator">=</span> <span class="token punctuation">[</span>list_values<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token keyword">for</span> index <span class="token keyword">in</span> index_first_kicker<span class="token punctuation">]</span>
            list_first_kickers <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>list_candidates<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
            index_second_kicker <span class="token operator">=</span> <span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>list_count_values<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">if</span> list_count_values<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">2</span><span class="token punctuation">]</span>
            list_candidates <span class="token operator">=</span> <span class="token punctuation">[</span>list_values<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token keyword">for</span> index <span class="token keyword">in</span> index_second_kicker<span class="token punctuation">]</span>
            list_kickers <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>list_candidates<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> list_first_kickers<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> list_kickers<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">elif</span> list_count_values<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span> <span class="token comment"># Une paire</span>
            index_first_kicker <span class="token operator">=</span> list_count_values<span class="token punctuation">.</span>index<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
            first_kicker <span class="token operator">=</span> list_values<span class="token punctuation">[</span>index_first_kicker<span class="token punctuation">]</span>
            index_second_kicker <span class="token operator">=</span> <span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>list_count_values<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">if</span> list_count_values<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">2</span><span class="token punctuation">]</span>
            list_candidates <span class="token operator">=</span> <span class="token punctuation">[</span>list_values<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token keyword">for</span> index <span class="token keyword">in</span> index_second_kicker<span class="token punctuation">]</span>
            list_kickers <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>list_candidates<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>first_kicker<span class="token punctuation">]</span> <span class="token operator">+</span> list_kickers<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span> <span class="token comment"># Carte haute</span>
            <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>values<span class="token punctuation">,</span> reverse <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre>
</div>
</details>     
</div>
<p>Cette méthode est assez longue à expliquer, mais voici quelques idées importantes:</p>
<ul>
<li>Utilisation de la commande <code>list(set())</code> qui permet d'obtenir une liste qui contient tout les éléments d'une liste, mais sans les doublons. Cette technique est très pratique pour détecter les paires, les doubles paires, les brelans, les fulls, les carrés et les couleurs.</li>
<li>Il est important de vérifier les types de combinaisons dans l'ordre décroissant de leur valeur. Il faut par exemple traiter le cas du carré avant celui du full, et le cas de la couleur avant celui de la suite.</li>
<li>Il faut trier les kickers dans l'ordre décroissant, pour faciliter le cas de l'égalité entre deux joueurs.</li>
</ul>
<p>Il faut ensuite implémenter les méthodes pour déterminer le gagnant entre deux joueurs, étant donné leurs mains et le tableau en cours. Pour cela, on utilise la méthode <em>get_score</em> et on compare les scores des deux joueurs. Si le score est le même, on les départage grâce à la liste des kickers. On s'aide d'une autre méthode (<em>get_list_compare</em>) qui compare les éléments de deux listes un par un. Cette méthode renvoie <em>True</em> si la première main renseignée est gagnante, renvoie <em>False</em> si elle est perdante et renvoie <em>None</em> s'il y a égalité.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Cliquer pour voir le code des méthodes <em>do_first_player_win</em> et <em>get_list_compare</em></p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">do_first_player_win</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> player1_hand<span class="token punctuation">,</span> player2_hand<span class="token punctuation">,</span> board<span class="token punctuation">)</span><span class="token punctuation">:</span>
  score_player1<span class="token punctuation">,</span> kickers_player1 <span class="token operator">=</span> self<span class="token punctuation">.</span>get_score<span class="token punctuation">(</span>player1_hand<span class="token punctuation">,</span> board<span class="token punctuation">)</span>
  score_player2<span class="token punctuation">,</span> kickers_player2 <span class="token operator">=</span> self<span class="token punctuation">.</span>get_score<span class="token punctuation">(</span>player2_hand<span class="token punctuation">,</span> board<span class="token punctuation">)</span>
  <span class="token keyword">if</span> score_player1 <span class="token operator">></span> score_player2<span class="token punctuation">:</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
  <span class="token keyword">elif</span> score_player1 <span class="token operator">&lt;</span> score_player2<span class="token punctuation">:</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>
  <span class="token keyword">else</span><span class="token punctuation">:</span> <span class="token comment"># Cas de l'égalité</span>
    list_compare <span class="token operator">=</span> self<span class="token punctuation">.</span>get_list_compare<span class="token punctuation">(</span>kickers_player1<span class="token punctuation">,</span> kickers_player2<span class="token punctuation">,</span> score_player1<span class="token punctuation">)</span>
    <span class="token keyword">for</span> element <span class="token keyword">in</span> list_compare<span class="token punctuation">:</span>
      <span class="token keyword">if</span> element <span class="token operator">!=</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token boolean">None</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">get_list_compare</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> kickers_player1<span class="token punctuation">,</span> kickers_player2<span class="token punctuation">,</span> score<span class="token punctuation">)</span><span class="token punctuation">:</span>
  list_compare <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>kickers_player1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> kickers_player1<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">==</span> kickers_player2<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">:</span>
      list_compare<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token boolean">None</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
      list_compare<span class="token punctuation">.</span>append<span class="token punctuation">(</span>kickers_player1<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">></span> kickers_player2<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span><span class="token punctuation">(</span>list_compare<span class="token punctuation">)</span></code></pre>
</div>
</details>     
</div>
<p>On va ensuite utiliser cette méthode pour déterminer des taux de réussite moyens. Le premier taux de réussite à calculer et celui d'une main contre une autre. On va simplement simuler N parties et on va récolter le nombre de fois où la première main gagne grâce à la méthode <em>do_first_player_win</em>. On peut ensuite implémenter une fonction qui donne le taux de réussite moyen d'une main. Pour cela, on effectue N simulations entre une main et les 1326 mains possibles, stockées dans l'attribut <em>all_possible_hands</em>.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Cliquer pour voir le code des méthodes <em>get_winrate</em> et <em>get_average_winrate</em></p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">get_winrate</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> player1_hand<span class="token punctuation">,</span> player2_hand<span class="token punctuation">,</span> N<span class="token punctuation">)</span><span class="token punctuation">:</span>
  players_cards <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
      players_cards<span class="token punctuation">.</span>append<span class="token punctuation">(</span>player1_hand<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
      players_cards<span class="token punctuation">.</span>append<span class="token punctuation">(</span>player2_hand<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  current_deck <span class="token operator">=</span> <span class="token punctuation">[</span>card <span class="token keyword">for</span> card <span class="token keyword">in</span> self<span class="token punctuation">.</span>deck <span class="token keyword">if</span> card<span class="token punctuation">.</span>name <span class="token keyword">not</span> <span class="token keyword">in</span> players_cards<span class="token punctuation">]</span>
  tot_wins_player1 <span class="token operator">=</span> <span class="token number">0</span>
  tot_wins_player2 <span class="token operator">=</span> <span class="token number">0</span>
  tot_draws <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>N<span class="token punctuation">)</span><span class="token punctuation">:</span>
      board <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      deck <span class="token operator">=</span> current_deck<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
      <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
          index <span class="token operator">=</span> rd<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>deck<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
          card <span class="token operator">=</span> deck<span class="token punctuation">[</span>index<span class="token punctuation">]</span>
          deck<span class="token punctuation">.</span>pop<span class="token punctuation">(</span>index<span class="token punctuation">)</span>
          board<span class="token punctuation">.</span>append<span class="token punctuation">(</span>card<span class="token punctuation">)</span>
      result <span class="token operator">=</span> self<span class="token punctuation">.</span>do_first_player_win<span class="token punctuation">(</span>player1_hand<span class="token punctuation">,</span> player2_hand<span class="token punctuation">,</span> board<span class="token punctuation">)</span>
      <span class="token keyword">if</span> result <span class="token operator">==</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
          tot_draws <span class="token operator">+=</span> <span class="token number">1</span>
      <span class="token keyword">elif</span> result<span class="token punctuation">:</span>
          tot_wins_player1 <span class="token operator">+=</span> <span class="token number">1</span>
      <span class="token keyword">elif</span> <span class="token keyword">not</span> result<span class="token punctuation">:</span>
          tot_wins_player2 <span class="token operator">+=</span> <span class="token number">1</span>
  <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token builtin">round</span><span class="token punctuation">(</span>tot_wins_player1<span class="token operator">/</span>N <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">,</span> sigfigs <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">round</span><span class="token punctuation">(</span>tot_wins_player2<span class="token operator">/</span>N <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">,</span> sigfigs <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">round</span><span class="token punctuation">(</span>tot_draws<span class="token operator">/</span>N <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">,</span> sigfigs <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">get_average_winrate</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> hand<span class="token punctuation">,</span> N<span class="token punctuation">)</span><span class="token punctuation">:</span>
  tot_winrate <span class="token operator">=</span> <span class="token number">0</span>
  winrates <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">for</span> possible_hand <span class="token keyword">in</span> tqdm<span class="token punctuation">(</span>self<span class="token punctuation">.</span>all_possible_hands<span class="token punctuation">,</span> desc <span class="token operator">=</span> <span class="token string">"Progression de la boucle secondaire: "</span><span class="token punctuation">,</span> position <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> leave <span class="token operator">=</span> <span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
      <span class="token keyword">if</span> <span class="token punctuation">[</span>hand<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> hand<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token punctuation">[</span>possible_hand<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> possible_hand<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token keyword">and</span> <span class="token punctuation">[</span>hand<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> hand<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token punctuation">[</span>possible_hand<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> possible_hand<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token punctuation">:</span>
          result <span class="token operator">=</span> self<span class="token punctuation">.</span>get_winrate<span class="token punctuation">(</span>hand<span class="token punctuation">,</span> possible_hand<span class="token punctuation">,</span> N<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
          tot_winrate <span class="token operator">+=</span> result
          winrates<span class="token punctuation">.</span>append<span class="token punctuation">(</span>result<span class="token punctuation">)</span>
      <span class="token keyword">else</span><span class="token punctuation">:</span>
          winrates<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token boolean">None</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token builtin">round</span><span class="token punctuation">(</span>tot_winrate <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>all_possible_hands<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> sigfigs <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> winrates<span class="token punctuation">)</span></code></pre>
</div>
</details>     
</div>
<p>Enfin, on créé une dernière méthode qui va obtenir les taux de réussite de toutes les 169 mains distinctes, afin de déterminer un classement des meilleures mains. On va simplement appliquer la méthode précédente sur toutes les mains de l'attribut <em>all_possible_hands_2</em>.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Cliquer pour voir le code de la méthode <em>get_all_average_winrates</em></p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">get_all_average_winrates</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> N<span class="token punctuation">)</span><span class="token punctuation">:</span>
  all_average_winrates <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  all_average_winrates_detail <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">for</span> hand <span class="token keyword">in</span> tqdm<span class="token punctuation">(</span>self<span class="token punctuation">.</span>all_possible_hands_2<span class="token punctuation">,</span> desc <span class="token operator">=</span> <span class="token string">"Progression de la boucle principale"</span><span class="token punctuation">,</span> position <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
      winrate<span class="token punctuation">,</span> winrates_list <span class="token operator">=</span> self<span class="token punctuation">.</span>get_average_winrate<span class="token punctuation">(</span>hand<span class="token punctuation">,</span> N<span class="token punctuation">)</span>
      first_value <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>hand<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
      second_value <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>hand<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
      <span class="token keyword">if</span> first_value <span class="token operator">==</span> <span class="token string">"10"</span><span class="token punctuation">:</span>
          first_value <span class="token operator">=</span> <span class="token string">"T"</span>
      <span class="token keyword">elif</span> first_value <span class="token operator">==</span> <span class="token string">"11"</span><span class="token punctuation">:</span>
          first_value <span class="token operator">=</span> <span class="token string">"J"</span>
      <span class="token keyword">elif</span> first_value <span class="token operator">==</span> <span class="token string">"12"</span><span class="token punctuation">:</span>
          first_value <span class="token operator">=</span> <span class="token string">"Q"</span>
      <span class="token keyword">elif</span> first_value <span class="token operator">==</span> <span class="token string">"13"</span><span class="token punctuation">:</span>
          first_value <span class="token operator">=</span> <span class="token string">"K"</span>
      <span class="token keyword">elif</span> first_value <span class="token operator">==</span> <span class="token string">"14"</span><span class="token punctuation">:</span>
          first_value <span class="token operator">=</span> <span class="token string">"A"</span>
      <span class="token keyword">if</span> second_value <span class="token operator">==</span> <span class="token string">"10"</span><span class="token punctuation">:</span>
          second_value <span class="token operator">=</span> <span class="token string">"T"</span>
      <span class="token keyword">elif</span> second_value <span class="token operator">==</span> <span class="token string">"11"</span><span class="token punctuation">:</span>
          second_value <span class="token operator">=</span> <span class="token string">"J"</span>
      <span class="token keyword">elif</span> second_value <span class="token operator">==</span> <span class="token string">"12"</span><span class="token punctuation">:</span>
          second_value <span class="token operator">=</span> <span class="token string">"Q"</span>
      <span class="token keyword">elif</span> second_value <span class="token operator">==</span> <span class="token string">"13"</span><span class="token punctuation">:</span>
          second_value <span class="token operator">=</span> <span class="token string">"K"</span>
      <span class="token keyword">elif</span> second_value <span class="token operator">==</span> <span class="token string">"14"</span><span class="token punctuation">:</span>
          second_value <span class="token operator">=</span> <span class="token string">"A"</span>
      <span class="token keyword">if</span> hand<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value <span class="token operator">==</span> hand<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">:</span>
          hand_name <span class="token operator">=</span> first_value <span class="token operator">+</span> second_value
      <span class="token keyword">elif</span> hand<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>suit <span class="token operator">==</span> hand<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>suit<span class="token punctuation">:</span>
          hand_name <span class="token operator">=</span> first_value <span class="token operator">+</span> second_value <span class="token operator">+</span> <span class="token string">"s"</span>
      <span class="token keyword">elif</span> hand<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>suit <span class="token operator">!=</span> hand<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>suit<span class="token punctuation">:</span>
          hand_name <span class="token operator">=</span> first_value <span class="token operator">+</span> second_value <span class="token operator">+</span> <span class="token string">"o"</span>
      all_average_winrates<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>hand_name<span class="token punctuation">,</span> winrate<span class="token punctuation">]</span><span class="token punctuation">)</span>
      all_average_winrates_detail<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>hand_name<span class="token punctuation">,</span> winrates_list<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span><span class="token punctuation">(</span>all_average_winrates<span class="token punctuation">,</span> all_average_winrates_detail<span class="token punctuation">)</span></code></pre>
</div>
</details>     
</div>
<h2>Présentation des résultats</h2>
<p>L'implémentation de la classe <strong>Poker_methods</strong> permet de réaliser des statistiques sur le jeu de poker. Pour les représenter, on créé une nouvelle classe <strong>Plot_stats</strong> qui contiendra des méthodes pour représenter ces résultats. Cette classe hérite de la classe <strong>Poker_methods</strong>, pour pouvoir utiliser toutes ses méthodes.</p>
<h3>Fréquence d'apparitions des combinaisons</h3>
<p>Le premier résultat à représenter est la fréquence d'apparition des combinaisons. Pour cela, on va effectuer N simulations. Lors de chaque simulation, on va piocher 7 différentes cartes (2 cartes pour la main du joueur et 5 cartes pour le tableau en cours) et on va déterminer son score grâce à la méthode <em>get_score</em>. On stocke ainsi ce score, et on représente le résultat sur un graphique en barres grâce au module <em>matplotlib.pyplot</em></p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Cliquer pour voir le code de la méthode <em>plot_stats_combinations</em></p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">plot_stats_combinations</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> N<span class="token punctuation">)</span><span class="token punctuation">:</span>
  combinations_type <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"Carte haute"</span><span class="token punctuation">,</span> <span class="token string">"Une paire"</span><span class="token punctuation">,</span> <span class="token string">"Deux paires"</span><span class="token punctuation">,</span> <span class="token string">"Brelan"</span><span class="token punctuation">,</span> <span class="token string">"Quinte"</span><span class="token punctuation">,</span> <span class="token string">"Couleur"</span><span class="token punctuation">,</span> <span class="token string">"Full"</span><span class="token punctuation">,</span> <span class="token string">"Carré"</span><span class="token punctuation">,</span> <span class="token string">"Quinte \nFlush"</span><span class="token punctuation">,</span> <span class="token string">"Quinte Flush \nRoyale"</span><span class="token punctuation">)</span>
  results <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>combinations_type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
  self<span class="token punctuation">.</span>progress_plot_stats_combinations <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">for</span> k <span class="token keyword">in</span> tqdm<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span>N<span class="token punctuation">)</span><span class="token punctuation">,</span> desc <span class="token operator">=</span> <span class="token string">"Progression de la simulation: "</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
      self<span class="token punctuation">.</span>progress_plot_stats_combinations <span class="token operator">=</span> <span class="token punctuation">(</span>k <span class="token operator">/</span> N<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span>
      player_hand <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      board <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
          card <span class="token operator">=</span> self<span class="token punctuation">.</span>draw<span class="token punctuation">(</span><span class="token punctuation">)</span>
          player_hand<span class="token punctuation">.</span>append<span class="token punctuation">(</span>card<span class="token punctuation">)</span>
      <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
          card <span class="token operator">=</span> self<span class="token punctuation">.</span>draw<span class="token punctuation">(</span><span class="token punctuation">)</span>
          board<span class="token punctuation">.</span>append<span class="token punctuation">(</span>card<span class="token punctuation">)</span>
      score <span class="token operator">=</span> self<span class="token punctuation">.</span>get_score<span class="token punctuation">(</span>player_hand<span class="token punctuation">,</span> board<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
      results<span class="token punctuation">[</span>score<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1</span>
      self<span class="token punctuation">.</span>restart_deck<span class="token punctuation">(</span><span class="token punctuation">)</span>
  results <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">round</span><span class="token punctuation">(</span>element<span class="token operator">/</span>N <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">,</span> sigfigs <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">for</span> element <span class="token keyword">in</span> results<span class="token punctuation">]</span>
  ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>axes<span class="token punctuation">(</span><span class="token punctuation">)</span>
  X <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>combinations_type<span class="token punctuation">)</span><span class="token punctuation">)</span>
  ax<span class="token punctuation">.</span>set_xticks<span class="token punctuation">(</span>X<span class="token punctuation">,</span> combinations_type<span class="token punctuation">)</span>
  <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>X<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
      plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>i<span class="token punctuation">,</span> results<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">0.6</span><span class="token punctuation">,</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>results<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">%"</span></span><span class="token punctuation">,</span> ha <span class="token operator">=</span> <span class="token string">"center"</span><span class="token punctuation">)</span>
  plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Fréquence d'apparition des différentes combinaisons pour </span><span class="token interpolation"><span class="token punctuation">{</span>N<span class="token punctuation">}</span></span><span class="token string"> tirages"</span></span><span class="token punctuation">)</span>
  ax<span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span><span class="token string">"Combinaison"</span><span class="token punctuation">)</span>
  ax<span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">"Fréquence d'apparition en %"</span><span class="token punctuation">)</span>
  plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>X<span class="token punctuation">,</span> results<span class="token punctuation">)</span>
  plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
</div>
</details>     
</div>
<p>Le résultat de cette simulation pour 10 millions de simulations est le suivant:</p>
<p><img src="Image1.png" alt="Image1"></p>
<p>Ces résultats concordent presque parfaitement aux résultats théoriques que l'on peut retrouver sur cette <a href="https://en.wikipedia.org/wiki/Poker_probability">page Wikipédia dédiée</a>.</p>
<h3>Classement des mains</h3>
<p>On peut ensuite utiliser la méthode <em>get_all_average_winrates</em> pour avoir les taux de réussite associés à chacune des 169 mains distinctes possibles. Cette simulation est très lourde en calcul, puisqu'il faut confronter N fois chacune des 169 mains aux 1326 mains possibles. J'ai donc fait tourner le programme avec N = 5000 (ce qui fait plus d'1 milliard de simulations) et j'ai stocké ces résultats dans un fichier json qui sera chargé dans l'initialisation de la classe <strong>Poker_methods</strong>. Cette simulation a tourné pendant presque 8 heures. On crée donc une méthode pour afficher ces résultats. Il faut préciser le premier ran à afficher ainsi que le dernier, car il est impossible d'afficher les 169 mains sur un même graphique en barre sans que cela ne soit illisible.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Cliquer pour voir le code de la méthode <em>plot_hands_ranking</em></p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">plot_hands_ranking</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> first_rank<span class="token punctuation">,</span> last_rank<span class="token punctuation">)</span><span class="token punctuation">:</span>
  hands <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span></span><span class="token string">\n</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>all_average_winrates5<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">"</span></span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>all_average_winrates5<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
  hands_extract <span class="token operator">=</span> hands<span class="token punctuation">[</span>first_rank <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">:</span>last_rank<span class="token punctuation">]</span>
  results <span class="token operator">=</span> <span class="token punctuation">[</span>hand<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">for</span> hand <span class="token keyword">in</span> self<span class="token punctuation">.</span>all_average_winrates5<span class="token punctuation">]</span>
  results_extract <span class="token operator">=</span> results<span class="token punctuation">[</span>first_rank <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">:</span>last_rank<span class="token punctuation">]</span>
  ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>axes<span class="token punctuation">(</span><span class="token punctuation">)</span>
  X <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>hands_extract<span class="token punctuation">)</span><span class="token punctuation">)</span>
  ax<span class="token punctuation">.</span>set_xticks<span class="token punctuation">(</span>X<span class="token punctuation">,</span> hands_extract<span class="token punctuation">)</span>
  <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>X<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
      plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>i<span class="token punctuation">,</span> results_extract<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">0.6</span><span class="token punctuation">,</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>results_extract<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">%"</span></span><span class="token punctuation">,</span> ha <span class="token operator">=</span> <span class="token string">"center"</span><span class="token punctuation">,</span> fontsize <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">)</span>
  ax<span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span><span class="token string">"Main"</span><span class="token punctuation">)</span>
  ax<span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">"Taux de réussite moyen en %"</span><span class="token punctuation">)</span>
  plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>X<span class="token punctuation">,</span> results_extract<span class="token punctuation">)</span>
  plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
</div>
</details>     
</div>
<p>Voici le classement des 20 meilleures mains obtenues:</p>
<p><img src="Image2.png" alt="Image2"></p>
<p>La lettre T correspond au 10. La lettre &quot;s&quot; signifie que les deux cartes sont de la même couleur (de l'anglais &quot;suited&quot;) et la lettre &quot;o&quot; signifie que les deux cartes ne sont pas de la même couleur (de l'anglais &quot;offsuit&quot;). On retrouve bien la paire d'As qui est la meilleure main de départ, suivie de près les paires de Rois et de Dames.</p>
<h2>Création des interfaces graphiques</h2>
<p>Maintenant que l'on a tout les outils pour faire des simulations, on va à présent implémenter des interfaces graphiques pour interagir avec ces méthodes. Nous allons utiliser le module Qt de Python.</p>
<p>Il faut tout d'abord designer les différentes fenêtres que l'utilisateur pourra utiliser. On utilise pour cela le logiciel Qt Designer, et on opte pour des designs simples. Voici un aperçu des 4 fenêtres dans le logiciel:</p>
<p><img src="Image3.png" alt="Image3"></p>
<p>On créé ensuite une nouvelle classe <strong>UI_stats</strong> qui contiendra toutes les méthodes pour afficher les interfaces graphiques. Cette classe hérite des classes <strong>Poker_methods</strong> et <strong>Plot_stats</strong>. L'initialisation de cette classe permet de récupérer tout les éléments des interfaces designées (boutons, textes, barres de progression etc...) afin de les assigner à des attributs de notre classe. Les noms de ces attributs doivent être bien distinctes.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Cliquer pour voir l'initialisation de la classe <strong>UI_stats</strong></p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<pre class="language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">UI_stats</span><span class="token punctuation">(</span>Plot_stats<span class="token punctuation">,</span> Poker_methods<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
        ui_file_name <span class="token operator">=</span> <span class="token string">"main_window.ui"</span>
        ui_file <span class="token operator">=</span> QFile<span class="token punctuation">(</span>ui_file_name<span class="token punctuation">)</span>
        loader <span class="token operator">=</span> QUiLoader<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>main_window <span class="token operator">=</span> loader<span class="token punctuation">.</span>load<span class="token punctuation">(</span>ui_file<span class="token punctuation">)</span>
        ui_file<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>setWindowTitle<span class="token punctuation">(</span><span class="token string">"Fenêtre principale"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>button_plot_stats_combinations <span class="token operator">=</span> self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>findChild<span class="token punctuation">(</span>QPushButton<span class="token punctuation">,</span> <span class="token string">"Button_plot_stats_combinations"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>button_plot_hands_ranking <span class="token operator">=</span> self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>findChild<span class="token punctuation">(</span>QPushButton<span class="token punctuation">,</span> <span class="token string">"Button_plot_hands_ranking"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>button_get_winrate <span class="token operator">=</span> self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>findChild<span class="token punctuation">(</span>QPushButton<span class="token punctuation">,</span> <span class="token string">"Button_get_winrate"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>button_get_average_winrate <span class="token operator">=</span> self<span class="token punctuation">.</span>main_window<span class="token punctuation">.</span>findChild<span class="token punctuation">(</span>QPushButton<span class="token punctuation">,</span> <span class="token string">"Button_get_average_winrate"</span><span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>button_plot_stats_combinations<span class="token punctuation">.</span>clicked<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>show_window_plot_stats_combinations<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>button_plot_hands_ranking<span class="token punctuation">.</span>clicked<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>show_window_hands_ranking<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>button_get_winrate<span class="token punctuation">.</span>clicked<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>show_window_get_winrate<span class="token punctuation">)</span>

        ui_file_name2 <span class="token operator">=</span> <span class="token string">"window_plot_stats_combinations.ui"</span>
        ui_file2 <span class="token operator">=</span> QFile<span class="token punctuation">(</span>ui_file_name2<span class="token punctuation">)</span>
        loader2 <span class="token operator">=</span> QUiLoader<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>window_plot_stats_combinations <span class="token operator">=</span> loader2<span class="token punctuation">.</span>load<span class="token punctuation">(</span>ui_file2<span class="token punctuation">)</span>
        ui_file2<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>window_plot_stats_combinations<span class="token punctuation">.</span>setWindowTitle<span class="token punctuation">(</span><span class="token string">"Affichage des fréquences d'apparition des mains"</span><span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>line_edit_plot_stats_combinations <span class="token operator">=</span> self<span class="token punctuation">.</span>window_plot_stats_combinations<span class="token punctuation">.</span>findChild<span class="token punctuation">(</span>QLineEdit<span class="token punctuation">,</span> <span class="token string">"line_edit_plot_stats_combinations"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>button_valider_plot_stats_combinations <span class="token operator">=</span> self<span class="token punctuation">.</span>window_plot_stats_combinations<span class="token punctuation">.</span>findChild<span class="token punctuation">(</span>QPushButton<span class="token punctuation">,</span> <span class="token string">"button_valider_plot_stats_combinations"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>button_return_window_plot_stats_combinations <span class="token operator">=</span> self<span class="token punctuation">.</span>window_plot_stats_combinations<span class="token punctuation">.</span>findChild<span class="token punctuation">(</span>QPushButton<span class="token punctuation">,</span> <span class="token string">"button_return"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>progress_bar_plot_stats_combinations <span class="token operator">=</span> self<span class="token punctuation">.</span>window_plot_stats_combinations<span class="token punctuation">.</span>findChild<span class="token punctuation">(</span>QProgressBar<span class="token punctuation">,</span> <span class="token string">"progress_bar_plot_stats_combinations"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>progress_bar_plot_stats_combinations<span class="token punctuation">.</span>setValue<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

        onlyInt <span class="token operator">=</span> QIntValidator<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>line_edit_plot_stats_combinations<span class="token punctuation">.</span>setValidator<span class="token punctuation">(</span>onlyInt<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>line_edit_plot_stats_combinations<span class="token punctuation">.</span>textChanged<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>line_edit_plot_stats_combinations_changed<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>line_edit_plot_stats_combinations<span class="token punctuation">.</span>setText<span class="token punctuation">(</span><span class="token string">"100"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>button_valider_plot_stats_combinations<span class="token punctuation">.</span>clicked<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>valider_plot_stats_combinations<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>button_return_window_plot_stats_combinations<span class="token punctuation">.</span>clicked<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>return_main_window<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>N_plot_stats_combinations <span class="token operator">=</span> <span class="token number">100</span>


        ui_file_name3 <span class="token operator">=</span> <span class="token string">"window_plot_hands_ranking.ui"</span>
        ui_file3 <span class="token operator">=</span> QFile<span class="token punctuation">(</span>ui_file_name3<span class="token punctuation">)</span>
        loader3 <span class="token operator">=</span> QUiLoader<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>window_plot_hands_ranking <span class="token operator">=</span> loader3<span class="token punctuation">.</span>load<span class="token punctuation">(</span>ui_file3<span class="token punctuation">)</span>
        ui_file3<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>window_plot_hands_ranking<span class="token punctuation">.</span>setWindowTitle<span class="token punctuation">(</span><span class="token string">"Affichage du classement des meilleures mains"</span><span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>last_rank <span class="token operator">=</span> <span class="token number">169</span>        
        self<span class="token punctuation">.</span>first_rank <span class="token operator">=</span> <span class="token number">1</span>
        self<span class="token punctuation">.</span>button_valider_plot_hands_ranking <span class="token operator">=</span> self<span class="token punctuation">.</span>window_plot_hands_ranking<span class="token punctuation">.</span>findChild<span class="token punctuation">(</span>QPushButton<span class="token punctuation">,</span> <span class="token string">"button_valider_plot_hands_ranking"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>button_valider_plot_hands_ranking<span class="token punctuation">.</span>clicked<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>valider_plot_hands_ranking<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>line_edit_plot_hands_ranking_first_rank <span class="token operator">=</span> self<span class="token punctuation">.</span>window_plot_hands_ranking<span class="token punctuation">.</span>findChild<span class="token punctuation">(</span>QLineEdit<span class="token punctuation">,</span> <span class="token string">"line_edit_first_rank"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>line_edit_plot_hands_ranking_first_rank<span class="token punctuation">.</span>setValidator<span class="token punctuation">(</span>onlyInt<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>line_edit_plot_hands_ranking_first_rank<span class="token punctuation">.</span>textChanged<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>line_edit_plot_hands_ranking_first_rank_changed<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>line_edit_plot_hands_ranking_first_rank<span class="token punctuation">.</span>setText<span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>line_edit_plot_hands_ranking_last_rank <span class="token operator">=</span> self<span class="token punctuation">.</span>window_plot_hands_ranking<span class="token punctuation">.</span>findChild<span class="token punctuation">(</span>QLineEdit<span class="token punctuation">,</span> <span class="token string">"line_edit_last_rank"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>line_edit_plot_hands_ranking_last_rank<span class="token punctuation">.</span>setValidator<span class="token punctuation">(</span>onlyInt<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>line_edit_plot_hands_ranking_last_rank<span class="token punctuation">.</span>textChanged<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>line_edit_plot_hands_ranking_last_rank_changed<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>line_edit_plot_hands_ranking_last_rank<span class="token punctuation">.</span>setText<span class="token punctuation">(</span><span class="token string">"169"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>button_return_plot_hands_ranking <span class="token operator">=</span> self<span class="token punctuation">.</span>window_plot_hands_ranking<span class="token punctuation">.</span>findChild<span class="token punctuation">(</span>QPushButton<span class="token punctuation">,</span> <span class="token string">"button_return_plot_hands_ranking"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>button_return_plot_hands_ranking<span class="token punctuation">.</span>clicked<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>return_main_window<span class="token punctuation">)</span>

        ui_file_name4 <span class="token operator">=</span> <span class="token string">"window_get_winrate.ui"</span>
        ui_file4 <span class="token operator">=</span> QFile<span class="token punctuation">(</span>ui_file_name4<span class="token punctuation">)</span>
        loader4<span class="token operator">=</span> QUiLoader<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>window_get_winrate <span class="token operator">=</span> loader4<span class="token punctuation">.</span>load<span class="token punctuation">(</span>ui_file4<span class="token punctuation">)</span>
        ui_file4<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>window_get_winrate<span class="token punctuation">.</span>setWindowTitle<span class="token punctuation">(</span><span class="token string">"Affichage d'un taux de réussite"</span><span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>button_valider_get_winrate <span class="token operator">=</span> self<span class="token punctuation">.</span>window_get_winrate<span class="token punctuation">.</span>findChild<span class="token punctuation">(</span>QPushButton<span class="token punctuation">,</span> <span class="token string">"button_valider_get_winrate"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>button_valider_get_winrate<span class="token punctuation">.</span>clicked<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>valider_get_winrate<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>card1_player1 <span class="token operator">=</span> self<span class="token punctuation">.</span>window_get_winrate<span class="token punctuation">.</span>findChild<span class="token punctuation">(</span>QComboBox<span class="token punctuation">,</span> <span class="token string">"card1_player1"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>card2_player1 <span class="token operator">=</span> self<span class="token punctuation">.</span>window_get_winrate<span class="token punctuation">.</span>findChild<span class="token punctuation">(</span>QComboBox<span class="token punctuation">,</span> <span class="token string">"card2_player1"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>suit1_player1 <span class="token operator">=</span> self<span class="token punctuation">.</span>window_get_winrate<span class="token punctuation">.</span>findChild<span class="token punctuation">(</span>QComboBox<span class="token punctuation">,</span> <span class="token string">"suit1_player1"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>suit2_player1 <span class="token operator">=</span> self<span class="token punctuation">.</span>window_get_winrate<span class="token punctuation">.</span>findChild<span class="token punctuation">(</span>QComboBox<span class="token punctuation">,</span> <span class="token string">"suit2_player1"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>card1_player2 <span class="token operator">=</span> self<span class="token punctuation">.</span>window_get_winrate<span class="token punctuation">.</span>findChild<span class="token punctuation">(</span>QComboBox<span class="token punctuation">,</span> <span class="token string">"card1_player2"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>card2_player2 <span class="token operator">=</span> self<span class="token punctuation">.</span>window_get_winrate<span class="token punctuation">.</span>findChild<span class="token punctuation">(</span>QComboBox<span class="token punctuation">,</span> <span class="token string">"card2_player2"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>suit1_player2 <span class="token operator">=</span> self<span class="token punctuation">.</span>window_get_winrate<span class="token punctuation">.</span>findChild<span class="token punctuation">(</span>QComboBox<span class="token punctuation">,</span> <span class="token string">"suit1_player2"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>suit2_player2 <span class="token operator">=</span> self<span class="token punctuation">.</span>window_get_winrate<span class="token punctuation">.</span>findChild<span class="token punctuation">(</span>QComboBox<span class="token punctuation">,</span> <span class="token string">"suit2_player2"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>progress_bar_get_winrate <span class="token operator">=</span> self<span class="token punctuation">.</span>window_get_winrate<span class="token punctuation">.</span>findChild<span class="token punctuation">(</span>QProgressBar<span class="token punctuation">,</span> <span class="token string">"progress_bar_get_winrate"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>result_get_winrate <span class="token operator">=</span> self<span class="token punctuation">.</span>window_get_winrate<span class="token punctuation">.</span>findChild<span class="token punctuation">(</span>QLabel<span class="token punctuation">,</span> <span class="token string">"result_simulation_get_winrate"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>line_edit_get_winrate <span class="token operator">=</span> self<span class="token punctuation">.</span>window_get_winrate<span class="token punctuation">.</span>findChild<span class="token punctuation">(</span>QLineEdit<span class="token punctuation">,</span> <span class="token string">"line_edit_get_winrate"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>line_edit_get_winrate<span class="token punctuation">.</span>setValidator<span class="token punctuation">(</span>onlyInt<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>line_edit_get_winrate<span class="token punctuation">.</span>textChanged<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>line_edit_get_winrate_changed<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>line_edit_get_winrate<span class="token punctuation">.</span>setText<span class="token punctuation">(</span><span class="token string">"100"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>N_get_winrate <span class="token operator">=</span> <span class="token number">100</span>
        self<span class="token punctuation">.</span>label_erreur_get_winrate <span class="token operator">=</span> self<span class="token punctuation">.</span>window_get_winrate<span class="token punctuation">.</span>findChild<span class="token punctuation">(</span>QLabel<span class="token punctuation">,</span> <span class="token string">"label_erreur_get_winrate"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>label_erreur_get_winrate<span class="token punctuation">.</span>setText<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>button_return_get_winrate <span class="token operator">=</span> self<span class="token punctuation">.</span>window_get_winrate<span class="token punctuation">.</span>findChild<span class="token punctuation">(</span>QPushButton<span class="token punctuation">,</span> <span class="token string">"button_return_get_winrate"</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>button_return_get_winrate<span class="token punctuation">.</span>clicked<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>return_main_window<span class="token punctuation">)</span></code></pre>
</div>
</details>     
</div>
<h3>Fenêtre principale</h3>
<p>La première fenêtre à faire est la fenêtre principale, qui agira comme un menu pour l'utilisateur. Cette fenêtre comporte pour l'instant 4 boutons qui mèneront chacun sur une autre fenêtre, en fonction de la statistique à afficher.</p>
<p><img src="Image4.png" alt="Image4"></p>
<h3>Affichage des fréquences d'apparition des combinaisons</h3>
<p>Ensuite, on crée la fenêtre pour afficher les fréquences d'apparition des combinaisons. Pour cela, on reprend simplement le code présenté précédemment, en rajoutant une variable qui suit la progression de la boucle, pour actualiser la barre de progression. Voici la fenêtre qui apparaît lorsque l'on clique sur le bouton &quot;Afficher les fréquences d'apparition des combinaisons&quot;:</p>
<p><img src="Image5.png" alt="Image5"></p>
<p>L'utilisateur peur renseigner le nombre de simulations qu'il souhaite effectuer, ensuite la barre de progression évolue puis le graphique est affiché.</p>
<h3>Affichage du classement des meilleures mains</h3>
<p>Cette fenêtre permet à l'utilisateur de visualiser le classement des meilleures mains. Encore une fois, on réutilise le code précédemment réalisé, et on récupère les informations renseignées par l'utilisateur dans les champs textuels grâce aux méthodes <em>line_edit_plot_hands_ranking_first_rank_changed</em> et <em>line_edit_plot_hands_ranking_last_rank_changed</em>.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Cliquer pour voir le code des méthodes <em>line_edit_plot_hands_ranking_first_rank_changed</em> et <em>line_edit_plot_hands_ranking_last_rank_changed</em></p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">line_edit_plot_hands_ranking_first_rank_changed</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> value <span class="token operator">!=</span> <span class="token string">''</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>first_rank <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>first_rank <span class="token operator">></span> self<span class="token punctuation">.</span>last_rank<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>button_valider_plot_hands_ranking<span class="token punctuation">.</span>setEnabled<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>button_valider_plot_hands_ranking<span class="token punctuation">.</span>setEnabled<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>button_valider_plot_hands_ranking<span class="token punctuation">.</span>setEnabled<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">line_edit_plot_hands_ranking_last_rank_changed</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> value <span class="token operator">!=</span> <span class="token string">''</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>last_rank <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>first_rank <span class="token operator">></span> self<span class="token punctuation">.</span>last_rank<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>button_valider_plot_hands_ranking<span class="token punctuation">.</span>setEnabled<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>button_valider_plot_hands_ranking<span class="token punctuation">.</span>setEnabled<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>button_valider_plot_hands_ranking<span class="token punctuation">.</span>setEnabled<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span></code></pre>
</div>
</details>     
</div>
<p>La fenêtre affichée est donc la suivante:</p>
<p><img src="Image6.png" alt="Image6"></p>
<p>L'utilisateur peut rentrer le premier rang qu'il veut afficher et le dernier rang.</p>
<h3>Affichage du taux de réussite d'une main face à une autre</h3>
<p>La dernière fenêtre implémentée est celle qui permet au joueur d'obtenir le taux de réussite d'une main face à une autre. La sélection des 4 cartes se fait grâce à des menus déroulants. On doit vérifier que plusieurs cartes n'ont pas été choisies deux fois, sinon on affiche un message d'erreur. Enfin, l'utilisateur choisit un nombre de simulations souhaité, et on réutilise la méthode précédente en suivant la progression de la boucle.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Cliquer pour voir le code de la méthode <em>valider_get_winrate</em></p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">valider_get_winrate</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> self<span class="token punctuation">.</span>card1_player1<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"As"</span><span class="token punctuation">:</span>
        value1_player1 <span class="token operator">=</span> <span class="token number">14</span>
    <span class="token keyword">elif</span> self<span class="token punctuation">.</span>card1_player1<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"Roi"</span><span class="token punctuation">:</span>
        value1_player1 <span class="token operator">=</span> <span class="token number">13</span>
    <span class="token keyword">elif</span> self<span class="token punctuation">.</span>card1_player1<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"Dame"</span><span class="token punctuation">:</span>
        value1_player1 <span class="token operator">=</span> <span class="token number">12</span>
    <span class="token keyword">elif</span> self<span class="token punctuation">.</span>card1_player1<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"Valet"</span><span class="token punctuation">:</span>
        value1_player1 <span class="token operator">=</span> <span class="token number">11</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        value1_player1 <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>card1_player1<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> self<span class="token punctuation">.</span>card1_player2<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"As"</span><span class="token punctuation">:</span>
        value1_player2 <span class="token operator">=</span> <span class="token number">14</span>
    <span class="token keyword">elif</span> self<span class="token punctuation">.</span>card1_player2<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"Roi"</span><span class="token punctuation">:</span>
        value1_player2 <span class="token operator">=</span> <span class="token number">13</span>
    <span class="token keyword">elif</span> self<span class="token punctuation">.</span>card1_player2<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"Dame"</span><span class="token punctuation">:</span>
        value1_player2 <span class="token operator">=</span> <span class="token number">12</span>
    <span class="token keyword">elif</span> self<span class="token punctuation">.</span>card1_player2<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"Valet"</span><span class="token punctuation">:</span>
        value1_player2 <span class="token operator">=</span> <span class="token number">11</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        value1_player2 <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>card1_player2<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">if</span> self<span class="token punctuation">.</span>card2_player1<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"As"</span><span class="token punctuation">:</span>
        value2_player1 <span class="token operator">=</span> <span class="token number">14</span>
    <span class="token keyword">elif</span> self<span class="token punctuation">.</span>card2_player1<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"Roi"</span><span class="token punctuation">:</span>
        value2_player1 <span class="token operator">=</span> <span class="token number">13</span>
    <span class="token keyword">elif</span> self<span class="token punctuation">.</span>card2_player1<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"Dame"</span><span class="token punctuation">:</span>
        value2_player1 <span class="token operator">=</span> <span class="token number">12</span>
    <span class="token keyword">elif</span> self<span class="token punctuation">.</span>card2_player1<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"Valet"</span><span class="token punctuation">:</span>
        value2_player1 <span class="token operator">=</span> <span class="token number">11</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        value2_player1 <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>card2_player1<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> self<span class="token punctuation">.</span>card2_player2<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"As"</span><span class="token punctuation">:</span>
        value2_player2 <span class="token operator">=</span> <span class="token number">14</span>
    <span class="token keyword">elif</span> self<span class="token punctuation">.</span>card2_player2<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"Roi"</span><span class="token punctuation">:</span>
        value2_player2 <span class="token operator">=</span> <span class="token number">13</span>
    <span class="token keyword">elif</span> self<span class="token punctuation">.</span>card2_player2<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"Dame"</span><span class="token punctuation">:</span>
        value2_player2 <span class="token operator">=</span> <span class="token number">12</span>
    <span class="token keyword">elif</span> self<span class="token punctuation">.</span>card2_player2<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"Valet"</span><span class="token punctuation">:</span>
        value2_player2 <span class="token operator">=</span> <span class="token number">11</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        value2_player2 <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>card2_player2<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    cards <span class="token operator">=</span> <span class="token punctuation">[</span>self<span class="token punctuation">.</span>get_card_name<span class="token punctuation">(</span>value1_player1<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>suit1_player1<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>get_card_name<span class="token punctuation">(</span>value2_player1<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>suit2_player1<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>get_card_name<span class="token punctuation">(</span>value1_player2<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>suit1_player2<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>get_card_name<span class="token punctuation">(</span>value2_player2<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>suit2_player2<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    cards_removed <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">set</span><span class="token punctuation">(</span>cards<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>cards_removed<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>button_valider_get_winrate<span class="token punctuation">.</span>setEnabled<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>label_erreur_get_winrate<span class="token punctuation">.</span>setText<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span>
        player1_hand <span class="token operator">=</span> <span class="token punctuation">[</span>Card<span class="token punctuation">(</span>value1_player1<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>suit1_player1<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Card<span class="token punctuation">(</span>value2_player1<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>suit2_player1<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        player2_hand <span class="token operator">=</span> <span class="token punctuation">[</span>Card<span class="token punctuation">(</span>value1_player2<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>suit1_player2<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Card<span class="token punctuation">(</span>value2_player2<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>suit2_player2<span class="token punctuation">.</span>currentText<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        players_cards <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            players_cards<span class="token punctuation">.</span>append<span class="token punctuation">(</span>player1_hand<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
            players_cards<span class="token punctuation">.</span>append<span class="token punctuation">(</span>player2_hand<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
        current_deck <span class="token operator">=</span> <span class="token punctuation">[</span>card <span class="token keyword">for</span> card <span class="token keyword">in</span> self<span class="token punctuation">.</span>deck <span class="token keyword">if</span> card<span class="token punctuation">.</span>name <span class="token keyword">not</span> <span class="token keyword">in</span> players_cards<span class="token punctuation">]</span>
        tot_wins_player1 <span class="token operator">=</span> <span class="token number">0</span>
        tot_wins_player2 <span class="token operator">=</span> <span class="token number">0</span>
        tot_draws <span class="token operator">=</span> <span class="token number">0</span>
        progression <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>N_get_winrate<span class="token punctuation">)</span><span class="token punctuation">:</span>
            progression <span class="token operator">+=</span> <span class="token number">1</span>
            current_progression <span class="token operator">=</span> <span class="token punctuation">(</span>progression <span class="token operator">/</span> self<span class="token punctuation">.</span>N_get_winrate<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span>
            board <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
            deck <span class="token operator">=</span> current_deck<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                index <span class="token operator">=</span> rd<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>deck<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
                card <span class="token operator">=</span> deck<span class="token punctuation">[</span>index<span class="token punctuation">]</span>
                deck<span class="token punctuation">.</span>pop<span class="token punctuation">(</span>index<span class="token punctuation">)</span>
                board<span class="token punctuation">.</span>append<span class="token punctuation">(</span>card<span class="token punctuation">)</span>
            result <span class="token operator">=</span> self<span class="token punctuation">.</span>do_first_player_win<span class="token punctuation">(</span>player1_hand<span class="token punctuation">,</span> player2_hand<span class="token punctuation">,</span> board<span class="token punctuation">)</span>
            <span class="token keyword">if</span> result <span class="token operator">==</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
                tot_draws <span class="token operator">+=</span> <span class="token number">1</span>
            <span class="token keyword">elif</span> result<span class="token punctuation">:</span>
                tot_wins_player1 <span class="token operator">+=</span> <span class="token number">1</span>
            <span class="token keyword">elif</span> <span class="token keyword">not</span> result<span class="token punctuation">:</span>
                tot_wins_player2 <span class="token operator">+=</span> <span class="token number">1</span>
            self<span class="token punctuation">.</span>progress_bar_get_winrate<span class="token punctuation">.</span>setValue<span class="token punctuation">(</span>current_progression<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>result_get_winrate<span class="token punctuation">.</span>setText<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Taux de réussite de la première main: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">round</span><span class="token punctuation">(</span>tot_wins_player1<span class="token operator">/</span>self<span class="token punctuation">.</span>N_get_winrate <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">,</span> sigfigs <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">% \nTaux de réussite de la deuxième main: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">round</span><span class="token punctuation">(</span>tot_wins_player2<span class="token operator">/</span>self<span class="token punctuation">.</span>N_get_winrate <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">,</span> sigfigs <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">% \nTaux de parties nulles: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">round</span><span class="token punctuation">(</span>tot_draws<span class="token operator">/</span>self<span class="token punctuation">.</span>N_get_winrate <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">,</span> sigfigs <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">%"</span></span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>button_valider_get_winrate<span class="token punctuation">.</span>setEnabled<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>label_erreur_get_winrate<span class="token punctuation">.</span>setText<span class="token punctuation">(</span><span class="token string">"Au moins une carte se répète"</span><span class="token punctuation">)</span></code></pre>
</div>
</details>     
</div>
<p><img src="Image7.png" alt="Image7"></p>
<h2>Bilan du premier sprint et prévisions du deuxième sprint</h2>
<p>Les éléments du backlog du premier sprint ont été tous réalisés, sauf un élément qu'il faut ajouter à l'interface graphique (&quot;Obtenir un taux de réussite global d'une main&quot;). Voici un résumé du temps passé sur chaque item du backlog (temps réel effectué après la flèche -&gt;):</p>
<ul>
<li>Implémentation des structures de données de base, ainsi que leurs méthodes associées (cartes, jeu de carte, pioche...): <strong>1, 15min</strong> -&gt; <strong>15min</strong></li>
<li>Implémentation de la méthode pour déterminer la combinaison d'une main: <strong>3, 1h</strong> -&gt; <strong>1h</strong></li>
<li>Implémentation de la méthode pour avoir toutes les mains possibles: <strong>1, 15min</strong> -&gt; <strong>15min</strong></li>
<li>Implémentation de la méthode pour déterminer le gagnant entre deux mains: <strong>2, 45min</strong> -&gt; <strong>30min</strong></li>
<li>Implémentation de la méthode pour obtenir différents taux de réussite: <strong>3, 1h15</strong> -&gt; <strong>1h</strong></li>
<li>Réalisation de tests pour vérifier le bon fonctionnement des méthodes, débogage: <strong>3, 1h30</strong> -&gt; <strong>2h15</strong></li>
<li>Réalisation et design des fenêtres pour les interfaces graphiques: <strong>3, 2h</strong> -&gt; <strong>1h30</strong></li>
<li>Création du backend des interfaces: <strong>2, 2h</strong> -&gt; <strong>2h45</strong></li>
<li>Tests et débogage des interfaces: <strong>2, 1h</strong> -&gt; <strong>1h30</strong></li>
</ul>
<p>J'ai donc passé un peu plus de temps que prévu, notamment car j'ai sous estimé la création du backend des interfaces, qui est assez redondante et où il faut rentrer beaucoup d'informations. J'ai été particulièrement lent sur cette partie car elle ne me passionnait pas vraiment. J'ai également passé plus de temps que prévu sur les tests et débogages, car rien ne marchait du premier coup, et je devais vérifier mes résultats avec les résultats théoriques.</p>
<p>Le deuxième sprint sera dédié à la création d'une interface graphique qui assistera le joueur dans ses décisions, en fonction de la situation actuelle du jeu. Ce sprint devra aussi reprendre les quelques éléments que je n'ai pas eu le temps de faire lors du premier sprint. En voici un backlog:</p>
<ul>
<li>Reprise des éléments manquants de l'interface graphique du premier sprint: <strong>2, 30min</strong></li>
<li>Design des nouvelles interfaces pour l'assistant de jeu: <strong>3, 2h30</strong></li>
<li>Création du code implémentant la logique de l'assistant: <strong>5, 3h30</strong></li>
<li>Tests de l'assistant: <strong>2, 1h30</strong></li>
</ul>
<h2>Affichage des résultats sous la forme d'une carte de chaleur</h2>
<p>Un élément manquant du premier sprint est la représentation sous forme de carte de chaleur. En effet, nous avons deja représenté le classement des meilleures mains avec un diagramme en barres. Il peut maintenant être intéressant de représenter les meilleures mains avec un dégradé de couleurs: plus les cases seront vertes, plus elles ont un taux de réussite important. Pour cela, on crée une méthode <em>plot_heatmap_hands_ranking</em> dans la classe <strong>Plot_stats</strong>. Cette méthode récupère le classement des mains grâce à l'attribut <em>all_average_winrates5</em> qui est une liste contenant les mains associées avec leurs taux de réussite moyen. Ensuite, on les place dans une liste à deux dimensions, qui sera la source pour la méthode <em>imshow</em> qui permettra de créer la carte de chaleur. On détermine le placement d'une valeur dans cette liste à deux dimensions grâce à la valeur de la combinaison associée. On fait en sorte que les mains associées se trouvent en haut à gauche de l'image, et les mains dépareillées en bas à droite. On fait ensuite quelques lignes pour afficher les valeurs sur l'image.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Cliquer pour voir la méthode <em>plot_heatmap_hands_ranking</em></p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">plot_heatmap_hands_ranking</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
    table_winrates <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span> <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>all_average_winrates5<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        first_value <span class="token operator">=</span> self<span class="token punctuation">.</span>all_average_winrates5<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span>
        second_value <span class="token operator">=</span> self<span class="token punctuation">.</span>all_average_winrates5<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>
        <span class="token keyword">if</span> first_value <span class="token operator">==</span> <span class="token string">"A"</span><span class="token punctuation">:</span>
            first_value <span class="token operator">=</span> <span class="token number">14</span>
        <span class="token keyword">elif</span> first_value <span class="token operator">==</span> <span class="token string">"K"</span><span class="token punctuation">:</span>
            first_value <span class="token operator">=</span> <span class="token number">13</span>
        <span class="token keyword">elif</span> first_value <span class="token operator">==</span> <span class="token string">"Q"</span><span class="token punctuation">:</span>
            first_value <span class="token operator">=</span> <span class="token number">12</span>
        <span class="token keyword">elif</span> first_value <span class="token operator">==</span> <span class="token string">"J"</span><span class="token punctuation">:</span>
            first_value <span class="token operator">=</span> <span class="token number">11</span>
        <span class="token keyword">elif</span> first_value <span class="token operator">==</span> <span class="token string">"T"</span><span class="token punctuation">:</span>
            first_value <span class="token operator">=</span> <span class="token number">10</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            first_value <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>first_value<span class="token punctuation">)</span>
        <span class="token keyword">if</span> second_value <span class="token operator">==</span> <span class="token string">"A"</span><span class="token punctuation">:</span>
            second_value <span class="token operator">=</span> <span class="token number">14</span>
        <span class="token keyword">elif</span> second_value <span class="token operator">==</span> <span class="token string">"K"</span><span class="token punctuation">:</span>
            second_value <span class="token operator">=</span> <span class="token number">13</span>
        <span class="token keyword">elif</span> second_value <span class="token operator">==</span> <span class="token string">"Q"</span><span class="token punctuation">:</span>
            second_value <span class="token operator">=</span> <span class="token number">12</span>
        <span class="token keyword">elif</span> second_value <span class="token operator">==</span> <span class="token string">"J"</span><span class="token punctuation">:</span>
            second_value <span class="token operator">=</span> <span class="token number">11</span>
        <span class="token keyword">elif</span> second_value <span class="token operator">==</span> <span class="token string">"T"</span><span class="token punctuation">:</span>
            second_value <span class="token operator">=</span> <span class="token number">10</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            second_value <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>second_value<span class="token punctuation">)</span>
        <span class="token keyword">if</span> first_value <span class="token operator">!=</span> second_value<span class="token punctuation">:</span>
            suit <span class="token operator">=</span> self<span class="token punctuation">.</span>all_average_winrates5<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>
            <span class="token keyword">if</span> suit <span class="token operator">==</span> <span class="token string">"s"</span><span class="token punctuation">:</span>
                index1 <span class="token operator">=</span> <span class="token number">14</span> <span class="token operator">-</span> first_value
                index2 <span class="token operator">=</span> second_value <span class="token operator">-</span> <span class="token number">2</span>
            <span class="token keyword">elif</span> suit <span class="token operator">==</span> <span class="token string">"o"</span><span class="token punctuation">:</span>
                index1 <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">-</span> second_value
                index2 <span class="token operator">=</span> first_value <span class="token operator">-</span> <span class="token number">2</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            index1 <span class="token operator">=</span> <span class="token number">14</span> <span class="token operator">-</span> first_value
            index2 <span class="token operator">=</span> first_value <span class="token operator">-</span> <span class="token number">2</span>
        table_winrates<span class="token punctuation">[</span>index1<span class="token punctuation">]</span><span class="token punctuation">[</span>index2<span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>all_average_winrates5<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
    size_x <span class="token operator">=</span> <span class="token number">13</span>
    size_y <span class="token operator">=</span> <span class="token number">13</span>
    x_start <span class="token operator">=</span> <span class="token number">0</span>
    x_end <span class="token operator">=</span> <span class="token number">13</span>
    y_start <span class="token operator">=</span> <span class="token number">0</span>
    y_end <span class="token operator">=</span> <span class="token number">13</span>
    extent <span class="token operator">=</span> <span class="token punctuation">[</span>x_start<span class="token punctuation">,</span> x_end<span class="token punctuation">,</span> y_end<span class="token punctuation">,</span> y_start<span class="token punctuation">]</span>
    fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    ax <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">)</span>
    axes <span class="token operator">=</span> plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># axes.set_ylabel('Première carte du dealer')</span>
    axes<span class="token punctuation">.</span>yaxis<span class="token punctuation">.</span>set_ticks<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">13.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    axes<span class="token punctuation">.</span>yaxis<span class="token punctuation">.</span>set_ticklabels<span class="token punctuation">(</span><span class="token builtin">reversed</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token string">'4'</span><span class="token punctuation">,</span> <span class="token string">'5'</span><span class="token punctuation">,</span> <span class="token string">'6'</span><span class="token punctuation">,</span> <span class="token string">'7'</span><span class="token punctuation">,</span> <span class="token string">'8'</span><span class="token punctuation">,</span> <span class="token string">'9'</span><span class="token punctuation">,</span> <span class="token string">'T'</span><span class="token punctuation">,</span> <span class="token string">'J'</span><span class="token punctuation">,</span> <span class="token string">'Q'</span><span class="token punctuation">,</span> <span class="token string">'K'</span><span class="token punctuation">,</span> <span class="token string">'A'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> rotation <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> fontsize <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">)</span>
    <span class="token comment"># axes.set_xlabel('Main du joueur')</span>
    axes<span class="token punctuation">.</span>xaxis<span class="token punctuation">.</span>set_ticks<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">13.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    axes<span class="token punctuation">.</span>xaxis<span class="token punctuation">.</span>set_ticklabels<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token string">'4'</span><span class="token punctuation">,</span> <span class="token string">'5'</span><span class="token punctuation">,</span> <span class="token string">'6'</span><span class="token punctuation">,</span> <span class="token string">'7'</span><span class="token punctuation">,</span> <span class="token string">'8'</span><span class="token punctuation">,</span> <span class="token string">'9'</span><span class="token punctuation">,</span> <span class="token string">'T'</span><span class="token punctuation">,</span> <span class="token string">'J'</span><span class="token punctuation">,</span> <span class="token string">'Q'</span><span class="token punctuation">,</span> <span class="token string">'K'</span><span class="token punctuation">,</span> <span class="token string">'A'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> rotation <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>  verticalalignment <span class="token operator">=</span> <span class="token string">'center'</span><span class="token punctuation">,</span>fontsize <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">)</span>
    im <span class="token operator">=</span> ax<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>table_winrates<span class="token punctuation">,</span> extent <span class="token operator">=</span> extent<span class="token punctuation">,</span> cmap<span class="token operator">=</span><span class="token string">"RdYlGn"</span><span class="token punctuation">,</span> vmin <span class="token operator">=</span> <span class="token number">28.7</span><span class="token punctuation">,</span> vmax <span class="token operator">=</span> <span class="token number">85.1</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"Taux de réussite de chaque main possible\nMains associées en haut à gauche et mains dépareillées en bas à droite "</span><span class="token punctuation">,</span> pad <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">)</span>
    fig<span class="token punctuation">.</span>colorbar<span class="token punctuation">(</span>im<span class="token punctuation">)</span>

    jump_x <span class="token operator">=</span> <span class="token punctuation">(</span>x_end <span class="token operator">-</span> x_start<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">2.0</span> <span class="token operator">*</span> size_x<span class="token punctuation">)</span>
    jump_y <span class="token operator">=</span> <span class="token punctuation">(</span>y_end <span class="token operator">-</span> y_start<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">2.0</span> <span class="token operator">*</span> size_y<span class="token punctuation">)</span>
    x_positions <span class="token operator">=</span> np<span class="token punctuation">.</span>linspace<span class="token punctuation">(</span>start<span class="token operator">=</span>x_start<span class="token punctuation">,</span> stop<span class="token operator">=</span>x_end<span class="token punctuation">,</span> num<span class="token operator">=</span>size_x<span class="token punctuation">,</span> endpoint<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    y_positions <span class="token operator">=</span> np<span class="token punctuation">.</span>linspace<span class="token punctuation">(</span>start<span class="token operator">=</span>y_start<span class="token punctuation">,</span> stop<span class="token operator">=</span>y_end<span class="token punctuation">,</span> num<span class="token operator">=</span>size_y<span class="token punctuation">,</span> endpoint<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    
    <span class="token keyword">for</span> y_index<span class="token punctuation">,</span> y <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>y_positions<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> x_index<span class="token punctuation">,</span> x <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>x_positions<span class="token punctuation">)</span><span class="token punctuation">:</span>
            label <span class="token operator">=</span> <span class="token builtin">round</span><span class="token punctuation">(</span>table_winrates<span class="token punctuation">[</span>y_index<span class="token punctuation">]</span><span class="token punctuation">[</span>x_index<span class="token punctuation">]</span><span class="token punctuation">,</span> sigfigs <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span>
            text_x <span class="token operator">=</span> x <span class="token operator">+</span> jump_x
            text_y <span class="token operator">=</span> y <span class="token operator">+</span> jump_y
            ax<span class="token punctuation">.</span>text<span class="token punctuation">(</span>text_x<span class="token punctuation">,</span> text_y<span class="token punctuation">,</span> label<span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">,</span> ha<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span> va<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
</div>
</details>     
</div>
<p>L'exécution de ce code donne le graphique suivant:</p>
<p><img src="Image8.png" alt="Image8"></p>
<p>On observe un dégradé de couleurs: plus on augmente sur l'axe des abscisses et sur celui des ordonnées, plus le taux de réussite est important. De plus, on remarque que les paires servies, situées sur la diagonale, sont clairement des meilleures mains que les autres. Enfin, les mains associées ont un taux de réussite légèrement supérieur aux mains dépareillées.
Il ne manque plus qu'à ajouter un bouton sur la fenêtre principale associé à l'affichage de cette image.</p>
<h2>Création d'une aide à la décision</h2>
<p>La deuxième étape est de créer une aide à la décision pour un joueur de poker. Nous allons utiliser les méthodes déjà créées pour construire cette interface. Il faut tout d'abord comprendre les bases de la théorie de calcul des probabilités au poker.</p>
<h3>Quelques mots sur la théorie des calculs de probabilités au poker</h3>
<p>Au poker, on appelle <strong>pot odd</strong> le ratio entre la taille actuelle du pot total et de la taille de la relance auquel un joueur fait face. Son <strong>equity</strong> est son pourcentage de chance de gagner la main. Concrètement, lors d'une situation donnée, c'est-à-dire lorsqu'un joueur fait face à une relance, il doit suivre cette relance si et seulement s'il a plus d'<em>equity</em> que le <em>pot odd</em> de la situation.</p>
<p>Le pot odd d'une situation est calculé comme suit: Pot odd = Taille de la relance/ Taille du pot final. Notons que la taille du pot final correspond à la taille du pot si jamais le joueur suit la relance.</p>
<p>L'objectif pour notre programme sera donc de calculer ces deux valeurs selon la situation actuelle, pour suggérer au joueur s'il doit suivre, se coucher ou relancer.</p>
<h3>Application de la théorie</h3>
<p>Maintenant que la théorie est comprise, il faut l'implémenter. Le <em>pot odd</em> est assez simple à calculer. Il faudra simplement demander au joueur le pot actuel et la taille de la relance, et on aura juste à appliquer la formule. Calculer l'<em>equity</em> est un peu plus compliqué. Cette valeur dépend en effet de ce que l'adversaire qui a relancé peut avoir en main. On appelle cela la <strong>range</strong> du joueur. Cette range est difficile à déterminer par un programme informatique (cela impliquerait des structures très complexes d'intelligence artificielle), mais on va considérer que le joueur a une idée de la <em>range</em> de son adversaire. La première étape est donc de créer une interface graphique permettant au joueur de renseigner la range de son adversaire. Pour cela, on met en place 169 boutons, correspondant aux 169 mains possibles. Le joueur aura donc à cliquer sur l'interface les mains dont il pense constitutives de la <em>range</em> de son adversaire. Nous allons nommer chaque bouton sur la base de la syntaxe suivante: &quot;buttonQ7o&quot;. Les deux valeurs qui suivent le mot &quot;button&quot; correspondent aux deux cartes de la main correspondante, et la lettre (<em>o</em> ou <em>s</em>) indique si la main et dépareillée ou associée (<em>offsuit</em> ou <em>suited</em>). Ensuite, au niveau du backend, on va créer une classe <strong>Button_methods</strong> qui va contenir toutes les méthodes relatives aux boutons de cette interface. Dans l'initialisation, il faut associer les 169 boutons à 169 méthodes différentes. Cela prendrait des heures à faire à la main, mais j'ai écrit un script qui écrit ces méthodes plus rapidement. Voici un exemple d'une de ces méthodes:</p>
<pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">button65o_clicked</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> <span class="token string">'65o'</span> <span class="token keyword">not</span> <span class="token keyword">in</span> self<span class="token punctuation">.</span>range_selected<span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>button65o<span class="token punctuation">.</span>setStyleSheet<span class="token punctuation">(</span><span class="token string">'background-color: green'</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>range_selected<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'65o'</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>range_selected<span class="token punctuation">.</span>remove<span class="token punctuation">(</span><span class="token string">'65o'</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>button65o<span class="token punctuation">.</span>setStyleSheet<span class="token punctuation">(</span><span class="token string">'background-color: white'</span><span class="token punctuation">)</span></code></pre>
<p>Cette méthode est connectée au bouton correspondant à la main 6-5 dépareillée (&quot;65o&quot;). Lorsque ce bouton est cliqué par l'utilisateur, le bouton se colore en vert si la main n'avait pas déjà été sélectionnée, sinon elle se remet en blanc. On garde en mémoire les mains sélectionnées dans la <em>range</em> grâce à l'attribut <em>range_selected</em>, qui est une liste contenant les mains sélectionnées sour forme de chaînes de caractères.</p>
<p>On rajoute également des boutons aux extrémités des lignes et des colonnes, qui serviront à sélectionner une ligne ou une colonne entière. Ces boutons seront de la forme: &quot;buttonA_2&quot; pour les lignes et &quot;buttonA_1&quot; pour les colonnes. Les méthodes que nous allons connecter à chacun de ces boutons vont ajouter dans la liste <em>range_selected</em>. Voici un exemple d'une telle méthode (il y en a 26: 13 pour les lignes et 13 pour les colonnes):</p>
<pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">select_line_K</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
    combination <span class="token operator">=</span> <span class="token string">'K'</span> <span class="token operator">+</span> <span class="token string">'K'</span>
    <span class="token keyword">if</span> combination <span class="token keyword">not</span> <span class="token keyword">in</span> self<span class="token punctuation">.</span>range_selected<span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>range_selected<span class="token punctuation">.</span>append<span class="token punctuation">(</span>combination<span class="token punctuation">)</span>
    values <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token string">'T'</span><span class="token punctuation">,</span> <span class="token string">'J'</span><span class="token punctuation">,</span> <span class="token string">'Q'</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> value2 <span class="token keyword">in</span> values<span class="token punctuation">:</span>
        combination <span class="token operator">=</span> <span class="token string">"K"</span><span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>value2<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"s"</span>
        <span class="token keyword">if</span> combination <span class="token keyword">not</span> <span class="token keyword">in</span> self<span class="token punctuation">.</span>range_selected<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>range_selected<span class="token punctuation">.</span>append<span class="token punctuation">(</span>combination<span class="token punctuation">)</span>
    values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> value2 <span class="token keyword">in</span> values<span class="token punctuation">:</span>
        combination <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>value2<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"K"</span> <span class="token operator">+</span> <span class="token string">"o"</span>
        <span class="token keyword">if</span> combination <span class="token keyword">not</span> <span class="token keyword">in</span> self<span class="token punctuation">.</span>range_selected<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>range_selected<span class="token punctuation">.</span>append<span class="token punctuation">(</span>combination<span class="token punctuation">)</span>
    self<span class="token punctuation">.</span>color_buttons<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
<p>La fin de la méthode fait appel à la méthode <em>color_buttons</em>, qui colore en vert ou en blanc les boutons correspondants aux combinaisons présentes dans la liste <em>range_selected</em>. Voici à quoi ressemble la fenêtre:</p>
<p><img src="Image9.png" alt="Image9"></p>
<p>On arrive bien à sélectionner les mains unes par unes, ou bien une colonne ou une ligne entière d'un coup.</p>
<p>D'autres éléments sont présents sur cette fenêtre:</p>
<ul>
<li>Un bouton &quot;Réinitialiser&quot;, qui vide la liste <em>selected_range</em> ce qui permet de remettre tout les boutons en blanc.</li>
<li>Un champ textuel dans lequel l'utilisateur est invité à renseigner un nombre N. Ce nombre permet de sélectionner directement le top N% des meilleures mains. Cela peut s'avérer utile pour sélectionner plusieurs mains d'un seul coup. La méthode associée au bouton &quot;Valider&quot; utilise la liste <em>all_average_winrates5</em> qui contient le classement des meilleures mains. Il suffit ensuite d'effectuer un slicing sur cette liste.</li>
<li>Quatre objets de la classe <strong>QRadioButton</strong>, qui permettront à l'utilisateur d'indiquer quelles couleurs il pense que l'adversaire a. Ces objets sont des icônes de type <em>radio button</em> que l'on peut cocher ou pas</li>
<li>Quatre objets de la classe <strong>QComboBox</strong>, qui sont des menus déroulants qui permettent à l'utilisateur de renseigner le main qu'il a.</li>
<li>Deux champs textuels destinés à renseigner la taille du pot en cours et du prix pour suivre la relance.</li>
<li>Deux boutons &quot;Cartes associées&quot; et &quot;Cartes dépareillées&quot; qui permettent de sélectionner toutes les cartes associées ou dépareillées</li>
<li>Un bouton pour ouvrir une nouvelle fenêtre qui permettra de renseigner le tableau en cours</li>
<li>Un bouton pour valider la sélection.</li>
</ul>
<p>Maintenant que l'on a toutes ces informations, on peut écrire la méthode qui calcule le <em>pot odd</em> et l'<em>equity</em> d'une situation donnée. Pour calculer l'<em>equity</em>, on récupère les mains sélectionnées dans la <em>range</em> et on effectue un nombre N de simulations contre la main du joueur. On récupère les taux de réussite moyens grâce à la méthode <em>get_winrate</em> définie précédemment. On fait une moyenne de tout ces taux de réussite, ce qui donne l'<em>equity</em> du joueur compte tenu de la <em>range</em> qu'il a déterminé.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Cliquer pour voir le code de la méthode <em>get_decision</em></p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">get_decision</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> pot<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> amount_to_call<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> player_hand<span class="token punctuation">:</span> <span class="token builtin">list</span><span class="token punctuation">,</span> N<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    pot_odd <span class="token operator">=</span> amount_to_call <span class="token operator">/</span><span class="token punctuation">(</span>pot <span class="token operator">+</span> amount_to_call<span class="token punctuation">)</span>
    tot_winrate <span class="token operator">=</span> <span class="token number">0</span>
    count <span class="token operator">=</span> <span class="token number">0</span>
    suits <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">if</span> self<span class="token punctuation">.</span>radio_button_heart<span class="token punctuation">.</span>IsChecked<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        suits<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">"coeur"</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> self<span class="token punctuation">.</span>radio_button_diamond<span class="token punctuation">.</span>IsChecked<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        suits<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">"carreau"</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> self<span class="token punctuation">.</span>radio_button_club<span class="token punctuation">.</span>IsChecked<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        suits<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">"trèfle"</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> self<span class="token punctuation">.</span>radio_button_spade<span class="token punctuation">.</span>IsChecked<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        suits<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">"pique"</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> combination <span class="token keyword">in</span> tqdm<span class="token punctuation">(</span>self<span class="token punctuation">.</span>range_selected<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>combination<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span>
            value <span class="token operator">=</span> combination<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
            value <span class="token operator">=</span> self<span class="token punctuation">.</span>value_name<span class="token punctuation">(</span>value<span class="token punctuation">)</span>
            <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                suit1 <span class="token operator">=</span> suits<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
                card1 <span class="token operator">=</span> Card<span class="token punctuation">(</span>value<span class="token punctuation">,</span> suit1<span class="token punctuation">)</span>
                suits2 <span class="token operator">=</span> suits<span class="token punctuation">[</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
                <span class="token keyword">for</span> suit2 <span class="token keyword">in</span> suits2<span class="token punctuation">:</span>
                    card2 <span class="token operator">=</span> Card<span class="token punctuation">(</span>value<span class="token punctuation">,</span> suit2<span class="token punctuation">)</span>
                    opponent_hand <span class="token operator">=</span> <span class="token punctuation">[</span>card1<span class="token punctuation">,</span> card2<span class="token punctuation">]</span>
                    tot_winrate <span class="token operator">+=</span> self<span class="token punctuation">.</span>get_winrate<span class="token punctuation">(</span>player_hand<span class="token punctuation">,</span> opponent_hand<span class="token punctuation">,</span> N<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
                    count <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            suited <span class="token operator">=</span> combination<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
            <span class="token keyword">if</span> suited <span class="token operator">==</span> <span class="token string">"o"</span><span class="token punctuation">:</span>
                value1 <span class="token operator">=</span> combination<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
                value1 <span class="token operator">=</span> self<span class="token punctuation">.</span>value_name<span class="token punctuation">(</span>value1<span class="token punctuation">)</span>
                value2 <span class="token operator">=</span> combination<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
                value2 <span class="token operator">=</span> self<span class="token punctuation">.</span>value_name<span class="token punctuation">(</span>value2<span class="token punctuation">)</span>
                <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                    suit1 <span class="token operator">=</span> suits<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
                    card1 <span class="token operator">=</span> Card<span class="token punctuation">(</span>value1<span class="token punctuation">,</span> suit1<span class="token punctuation">)</span>
                    suits2 <span class="token operator">=</span> suits<span class="token punctuation">[</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
                    <span class="token keyword">for</span> suit2 <span class="token keyword">in</span> suits2<span class="token punctuation">:</span>
                        card2 <span class="token operator">=</span> Card<span class="token punctuation">(</span>value2<span class="token punctuation">,</span> suit2<span class="token punctuation">)</span>
                        opponent_hand <span class="token operator">=</span> <span class="token punctuation">[</span>card1<span class="token punctuation">,</span> card2<span class="token punctuation">]</span>
                        tot_winrate <span class="token operator">+=</span> self<span class="token punctuation">.</span>get_winrate<span class="token punctuation">(</span>player_hand<span class="token punctuation">,</span> opponent_hand<span class="token punctuation">,</span> N<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
                        count <span class="token operator">+=</span> <span class="token number">1</span>
            <span class="token keyword">if</span> suited <span class="token operator">==</span> <span class="token string">"s"</span><span class="token punctuation">:</span>
                value1 <span class="token operator">=</span> combination<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
                value1 <span class="token operator">=</span> self<span class="token punctuation">.</span>value_name<span class="token punctuation">(</span>value1<span class="token punctuation">)</span>
                value2 <span class="token operator">=</span> combination<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
                value2 <span class="token operator">=</span> self<span class="token punctuation">.</span>value_name<span class="token punctuation">(</span>value2<span class="token punctuation">)</span>
                <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                    suit <span class="token operator">=</span> suits<span class="token punctuation">[</span>k<span class="token punctuation">]</span>
                    card1 <span class="token operator">=</span> Card<span class="token punctuation">(</span>value1<span class="token punctuation">,</span> suit<span class="token punctuation">)</span>
                    card2 <span class="token operator">=</span> Card<span class="token punctuation">(</span>value2<span class="token punctuation">,</span> suit<span class="token punctuation">)</span>
                    opponent_hand <span class="token operator">=</span> <span class="token punctuation">[</span>card1<span class="token punctuation">,</span> card2<span class="token punctuation">]</span>
                    tot_winrate <span class="token operator">+=</span> self<span class="token punctuation">.</span>get_winrate<span class="token punctuation">(</span>player_hand<span class="token punctuation">,</span> opponent_hand<span class="token punctuation">,</span> N<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
                    count <span class="token operator">+=</span> <span class="token number">1</span>
    average_winrate <span class="token operator">=</span> <span class="token builtin">round</span><span class="token punctuation">(</span>tot_winrate<span class="token operator">/</span>count<span class="token punctuation">,</span> sigfigs <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span>average_winrate<span class="token punctuation">,</span> pot_odd <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span></code></pre>
</div>
</details>     
</div>
<h4>Test de l'interface</h4>
<p>Pour tester cette méthode, on va se mettre dans la peau d'un joueur de poker. Voici le déroulement d'une main:
Le joueur 1 (le Héros) a la main constituée d'un 8 de coeur et d'un Valet de coeur. Les joueurs autour de la table construisent un pot et un des joueurs (le Vilain) mise 300 dans un pot de 200. Tout le monde se couche et c'est au Héros de parler. Considérant les mains qui se sont passées plus tôt dans la soirée, le Héros se fait une idée de la <em>range</em> du Vilain. La taille de la relance l'amène à penser que la <em>range</em> de son adversaire contient toutes les paires servies, toutes les cartes contenant un As ou un Roi et quelques combinaisons qui sont dans le top 30% des meilleures mains.</p>
<p>Pour avoir l'aide à la décision de notre algorithme, on rentre toutes ces informations sur l'interface et on lance les calculs:</p>
<p><img src="Test1.gif" alt="Test1"></p>
<p>Le programme envoie une <em>equity</em> de 40.5%, et un <em>pot odd</em> de 37.5%. Le Héros doit donc suivre la relance, et il peut même relancer encore pour ajuster le <em>pot odd</em> à son <em>equity</em>.</p>
<p>La situation au <em>flop</em> (3 premières cartes) est la suivante: le flop est constitué des cartes 5 de coeur, Roi de coeur et As de pique. Le Héros ouvre avec une mise à 150 et le Vilain relance de 100. Le Héros affine donc la <em>range</em> de son adversaire: il y inclut les combinaisons suivantes:</p>
<ul>
<li>Les mains avec un As ou un Roi qui font une bonne paire avec le flop, mais pas les cartes avec un 5 compte tenu de la taille de la relance</li>
<li>Les paires servies jusqu'à la main 8-8, et la paire servie 5-5 pour compléter le 5 de coeur</li>
<li>Des combinaisons allant de 9-10 jusqu'à K-Q, pour compléter une potentielle suite.</li>
<li>Toutes les couleurs sont pour l'instant possibles.</li>
</ul>
<p><img src="Test2.gif" alt="test2"></p>
<p>Le programme renvoie une <em>equity</em> de 34.7% et un <em>pot odd</em> de 28.6%. On remarque que l'<em>equity</em> au flop est plus faible que celle au preflop, car la <em>range</em> a été affinée. Cependant, elle est toujours supérieure au <em>pot odd</em>, donc le Héros suit la relance.</p>
<p>La situation au <em>turn</em> est la suivante. La quatrième carte dévoilée est le Valet de pique: le Héros fait une paire. Le Héros ouvre avec une mise à 300 et le Vilain relance pour 400 de plus. Compte tenu de la situation, le Héros pense que le Vilain a une main associée avec deux cartes de pique. C'est donc ce qu'il rentre dans l'interface:</p>
<p><img src="Test3.gif" alt="Test3"></p>
<p>L'<em>equity</em> du Héros est passée à 56.4% et le <em>pot odd</em> est de 36.4%. L'<em>equity</em> est bien plus élevée grâce au fait qu'un Valet soit arrivé au <em>turn</em>, ce qui fait que le Héros a une main gagnante face à plus de la moitié de la <em>range</em> de son adversaire. Le <em>pot odd</em> est également assez élevé car le Vilain a fortement relancé. Le Héros suit donc la relance.</p>
<p>Voici la dernière situation de ce test: la carte à la <em>river</em> est le 5 de pique. Le Héros ouvre à 100 et le Vilain relance pour 200 de plus. D'après le Héros, la <em>range</em> de son adversaire n'a pas changé. Il rentre ces informations comme suit:</p>
<p><img src="Test4.gif" alt="Test4"></p>
<p>L'<em>equity</em> du Héros est de... 0%. En effet, d'après la range renseignée, le Héros perd tout le temps à cause car son adversaire a une couleur à pique. Le Héros se couche donc et perd la main.</p>
<h4>Bilan du test</h4>
<p>L'interface a été globalement fluide et il n'y a pas eu de problème lors de l'exécution de l'algorithme. Cependant, il met environ 1 à 2 minutes pour s'exécuter pour 3500 simulations (ce qui est suffisant, d'après mes tests). Notons tout de même que cette aide à la décision dépend de la <em>range</em> déterminée par le joueur. Cette <em>range</em> est ce qui est le plus difficile au poker, donc l'interface est inutile pour un joueur débutant.</p>
<h2>Bilan du deuxième sprint</h2>
<p>Si l'on reprend le backlog du deuxième sprint, voici les items qui ont été réalisé et avec combien de temps:</p>
<ul>
<li>Reprise des éléments manquants de l'interface graphique du premier sprint: <strong>2, 30min</strong> -&gt; <strong>45min</strong></li>
<li>Design des nouvelles interfaces pour l'assistant de jeu: <strong>3, 2h30</strong> -&gt; <strong>3h30</strong></li>
<li>Création du code implémentant la logique de l'assistant: <strong>5, 3h30</strong> -&gt; <strong>4h30</strong></li>
<li>Tests de l'assistant: <strong>2, 1h30</strong> -&gt; <strong>1h</strong></li>
</ul>
<p>J'ai largement sous-estimé le temps qu'il fallait pour développer les interfaces graphiques, notamment car il fallait lier énormément de méthodes aux centaines de boutons qu'il y avait. J'ai donc passé un peu moins de temps sur les tests.</p>


</article>

        </main>


        <footer class="min-h-[50px] border-t-2 border-gray-200 mt-4">
            <div class="max-w-[1000px] mx-auto px-4">
                <div class="min-h-[50px] flex justify-center items-center">
                    <p class="text-center">
                        <span style="font-family: Consolas, sans-serif;">Do_<span style="color: #4a86e8">It</span></span> : Développement et Organisation en IT
                    </p>
                </div>
            </div>
        </footer>

        <script>
        MathJax
            .startup
            .document
            .getMathItemsWithin(document.body);
        </script>
        <script src="/do-it/assets/node_modules/prismjs/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
    </body>
</html>
