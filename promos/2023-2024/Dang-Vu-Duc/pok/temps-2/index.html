
<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Implémentation d&#39;un jeu d&#39;échecs sur Python</title>

        <link href="/do-it/assets/node_modules/prismjs/themes/prism-solarizedlight.min.css" rel="stylesheet">
        <link href="/do-it/assets/node_modules/prismjs/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet">

        <link href="/do-it/assets/stylesheets/main.css" rel="stylesheet">
    </head>
    <body>
        <script>
        window.MathJax = {
            tex: {
            inlineMath: [
                [
                '$', '$'
                ],
                [
                '\\(', '\\)'
                ]
            ]
            },
            svg: {
            fontCache: 'global'
            }
        };
        </script>
        <script type="text/javascript" id="MathJax-script" src="/do-it/assets/node_modules/mathjax/es5/tex-svg-full.js"></script>

        <header class="border-b-2 border-gray-200 mb-4">
        <div class="max-w-[1000px] mx-auto px-4">
            <div class="min-h-[50px] flex justify-between items-center">
                <a class="mx-2" href="/do-it/">Home</a>
                <div class="flex items-center gap-4 sm:gap-6 ">
                    <a class="" href="/do-it/cs">CS</a>
                    <a class="" href="/do-it/pok">POK</a>
                    <a class="" href="/do-it/mon">MON</a>
                    <a class="" href="/do-it/projets">Projets</a>
                    <a class="hidden sm:block" href="/do-it/promos">Promos</a>
                    <a href="/do-it/search">
                        <svg class="h-5 aspect-square" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path>
                        </svg>
                    </a>
                    <a class="hidden sm:block" href="https://github.com/FrancoisBrucker/do-it" target="_blank">
                        <svg class="h-5 aspect-square" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg>
                    </a>
                </div>
            </div>
        </div>
        </header>

        <main class="max-w-[1000px] mx-auto px-4" data-pagefind-body="">
            
<article class="relative">
<h1 class="mb-1">Implémentation d&#39;un jeu d&#39;échecs sur Python</h1>
<div class="mb-4">
    
        <div class="px-4 flex flex-wrap items-center">
            
                <div class="font-bold">Tags : </div>
            
            <ul class="flex flex-wrap overflow-auto not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Tags">
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">POK</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">2023-2024</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">temps 2</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">Pygame</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">Jeux</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">Échecs</li>
                

            </ul>
            
            
            <div class="hidden" data-pagefind-meta="Type">
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </div>
        </div>
    

    
        <div class="px-4 flex flex-wrap items-center">
            <div class="font-bold">Auteurs : </div>
            <ul class="flex flex-wrap not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Auteurs">
                
                    <li class="bg-blue-200 rounded-full px-2" data-pagefind-filter="Auteurs">Duc DANG VU</li>
                
            </ul>
        </div>
    

    
</div>

        <p class="mb-4 text-lg">

                Ce POK a pour objectif d'implémenter un jeu d'échecs sur Python et de créer un code qui peut résoudre des problèmes simples.

        </p>



    
<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-purple-500 bg-purple-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-purple-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"></path>
</svg>
<div class="pl-8 mr-8">

<a href="/do-it/promos/">Promotions</a><span class="px-1">/</span><a href="/do-it/promos/2023-2024/">2023-2024</a><span class="px-1">/</span><a href="/do-it/promos/2023-2024/Dang-Vu-Duc/">Duc DANG VU</a><span class="px-1">/</span><a href="/do-it/promos/2023-2024/Dang-Vu-Duc/pok/">POK de Duc DANG VU</a><span class="px-1">/</span><a href="/do-it/promos/2023-2024/Dang-Vu-Duc/pok/temps-2/">Implémentation d&#39;un jeu d&#39;échecs sur Python</a>

</div></div>




<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-pink-500 bg-pink-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-pink-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
</svg>
<div class="pl-8  mb-2 mr-8">
<p>Prérequis</p>
</div><div class="pl-8 mr-8">
<p>Connaissance basique de la programmation objet avec Python et des règles du jeu d'échecs.</p>
</div></div>
<div class="quote relative drop-shadow  py-2 pr-2 rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-amber-800 bg-amber-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-amber-800" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Tout les codes présentés sont disponibles dans le dossier Git du POK2: <a href="https://github.com/FrancoisBrucker/do-it/tree/main/src/promos/2023-2024/Dang-Vu-Duc/pok/temps-2">codes du POK2</a></p>
</div></div>
<h2>Introduction</h2>
<p>Le jeu d'échecs est un jeu classique, mais relativement complexe à implémenter. Ce POK utilisera les connaissances acquises lors du premier MON du temps 2, pour implémenter l'interface du jeu. Afin d'éviter tout chevauchement entre le MON et ce POK, cette partie du POK sera réalisée lors du deuxième sprint. Le premier sprint sera dédié à l'implémentation du code pour résoudre des problèmes simples.</p>
<h2>Backlog du premier sprint</h2>
<p>Ce premier sprint aura donc pour objectif d'implémenter le code de résolution de problèmes simples. Voici les fonctionnalités que devront être développées, ainsi que leurs complexités:</p>
<ul>
<li>Implémentation de la représentation d'un plateau d'échecs (<strong>3</strong>)</li>
<li>Implémentation des classes de chaque pièce ainsi que leur mouvements (<strong>8</strong>)</li>
<li>Implémentation d'une méthode pour représenter n'importe quelle position dans le code (<strong>2</strong>)</li>
<li>Implémentation d'une méthode pour vérifier si une pièce peut être capturée ou non (<strong>3</strong>)</li>
<li>Implémentation d'une méthode pour vérifier si un joueur est en échec et mat ou non (<strong>13</strong>)</li>
<li>Implémentation d'une méthode pour résoudre des problèmes simples, en utilisant les méthodes précédentes. (<strong>13</strong>)</li>
</ul>
<h2>Implémentation du code permettant de résoudre des problèmes simples</h2>
<p>La première partie de ce POK a pour objectif de créer une méthode qui permettra de résoudre des problèmes simples du jeu des échecs. Autrement dit, pour une position donnée, le programme devra donner le coup gagnant qui mène à un échec et mat (en 1, 2, 3 voire 4 coups). Avant d'arriver à cette méthode, plusieurs étapes intermédiaires sont nécessaires, notamment pour représenter le plateau d'échecs et ses pièces.</p>
<div class="quote relative drop-shadow  py-2 pr-2 rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-amber-800 bg-amber-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-amber-800" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Toute la suite de ce POK considérera que le lecteur connaît les règles des échecs, ainsi que son vocabulaire de base. Les termes un peu plus techniques (clouages, pat etc...) seront expliqués lorsqu'ils seront introduits.</p>
</div></div>
<h3>Représentation des éléments du plateau d'échecs</h3>
<h4>Implémentation des cases</h4>
<p>Les premiers éléments à implémenter sont les 64 cases du plateau. On crée une classe <strong>Cell</strong>, qui contient les attributs suivants:</p>
<ul>
<li><em>row</em> et <em>column</em>: entiers correspondant à la ligne et à la colonne de la case (en commençant par l'indice 0).</li>
<li><em>name</em>: chaîne de caractère correspondant au nom de la case. Par exemple, la case à la ligne d'indice 3 et à la colonne d'indice 5 aura comme nom &quot;D6&quot;.</li>
<li><em>promote</em>: correspond au cas particulier de la promotion, qui sera expliquée plus en détail plus tard.</li>
</ul>
<p>Ces cases vont être incluses dans la liste représentant le plateau d'échecs.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block">
<p>Cliquer pour voir le code de la classe <strong>Cell</strong></p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2">
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Cell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> row<span class="token punctuation">,</span> column<span class="token punctuation">,</span> promote <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token builtin">chr</span><span class="token punctuation">(</span>column <span class="token operator">+</span> <span class="token number">97</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>row<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span></span><span class="token string">"</span></span>
        self<span class="token punctuation">.</span>row <span class="token operator">=</span> row
        self<span class="token punctuation">.</span>column <span class="token operator">=</span> column
        self<span class="token punctuation">.</span>promote <span class="token operator">=</span> promote
</code></pre>
</div>
</details>     
</div>
<h4>Implémentations des pièces</h4>
<p>Il faut maintenant implémenter les différentes pièces du jeu, ainsi que leurs mouvements. On crée une classe <strong>Piece</strong> qui contient les attributs suivants:</p>
<ul>
<li><em>possible_moves</em>: liste d'objets de la classe <strong>Cell</strong> qui contiendra toutes les cases vers lesquelles la pièce pourra aller.</li>
<li><em>current_cell</em>: objet de la classe <strong>Cell</strong> qui correspond à la case sur laquelle se trouve la pièce.</li>
<li><em>IsWhite</em>: booléen indiquant si la pièce est blanche (<em>True</em>) ou noire (<em>False</em>)</li>
<li><em>value</em>: entier correspondant à la valeur de la pièce (1 pour un Pion, 3 pour un Cavalier et un Fou, 5 pour une Tour, 9 pour une Dame et 1000 pour un Roi).</li>
<li><em>letter</em>: chaîne de caractère correspondant à la lettre de la pièce (en notation anglaise). Cette lettre sera en majuscule si la pièce est blanche et en minuscule si la pièce est noire.</li>
</ul>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block">
<p>Cliquer pour voir le code de la classe <strong>Piece</strong></p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2">
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Piece</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> IsWhite<span class="token punctuation">,</span> value<span class="token punctuation">,</span> letter<span class="token punctuation">,</span> current_cell<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>possible_moves <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>current_cell <span class="token operator">=</span> current_cell
        self<span class="token punctuation">.</span>IsWhite <span class="token operator">=</span> IsWhite
        self<span class="token punctuation">.</span>value <span class="token operator">=</span> value
        self<span class="token punctuation">.</span>letter <span class="token operator">=</span> letter
</code></pre>
</div>
</details>     
</div>
<p>A présent, il faut implémenter chaque pièce. On crée donc 6 classes qui correspond à chaque pièce (Pawn, Bishop, Knight, Rook, Queen, King). Ces classes héritent de la classe <strong>Piece</strong>, et ont une méthode <em>get_possible_moves</em>. Cette méthode va ajouter à l'attribut <em>possible_moves</em> toutes les cases vers lesquelles la pièce peut aller. Voilà comment fonctionnent ces méthodes:</p>
<ul>
<li>Pour les pièces à &quot;longue portée&quot; (Fou, Tour, Dame), on démarre avec les coordonnées de la pièce et on part dans les 4 directions, jusqu'à qu'on sorte des limites du plateau ou qu'on rencontre une autre pièce. Dans ce dernier cas, si la couleur de cette pièce n'est pas la même que la pièce en cours, alors on inclut cette dernière case (c'est une prise!). Sinon, on n'inclut pas cette case (on ne peut pas prendre une pièce de notre équipe).</li>
<li>Pour le Cavalier et le Roi, on génère les 8 coordonnées que ces pièces peuvent attendre (déplacement en &quot;L&quot; pour le Cavalier). Si une coordonnée sort du plateau, on ne l'inclut pas. Si une pièce se trouve sur la case et que sa couleur est opposée, on inclut cette case (c'est une prise!)</li>
<li>Pour le Pion, on doit vérifier si la case en face (ou en dessous, suivant la couleur) est vide. Si c'est le cas, on inclut cette case. Si le pion se trouve sur la deuxième ligne (ou la septième ligne, suivant la couleur), on ajoute une case supplémentaire si possible. On vérifie aussi les deux cases en diagonale, ainsi que la couleur de l'éventuelle pièce qui s'y trouve. Si cette pièce est une pièce de l'adversaire, on inclut cette case (c'est une prise!).</li>
</ul>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block">
<p>Cliquer pour voir le code des 6 classes correspondantes au pièces du jeu</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2">
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">King</span><span class="token punctuation">(</span>Piece<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> IsWhite<span class="token punctuation">,</span> current_cell<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> IsWhite<span class="token punctuation">:</span>
            <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>IsWhite<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">"K"</span><span class="token punctuation">,</span> current_cell<span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>IsWhite<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">"k"</span><span class="token punctuation">,</span> current_cell<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">get_possible_moves</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> board<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>possible_moves <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        column <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column
        row <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row
        <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> l <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> <span class="token keyword">not</span> <span class="token punctuation">(</span>k <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">and</span> l <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                    new_column <span class="token operator">=</span> column <span class="token operator">+</span> k
                    new_row <span class="token operator">=</span> row <span class="token operator">+</span> l
                    <span class="token keyword">if</span> new_row <span class="token operator">&lt;=</span> <span class="token number">7</span> <span class="token keyword">and</span> new_column <span class="token operator">&lt;=</span> <span class="token number">7</span> <span class="token keyword">and</span> new_row <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> new_column <span class="token operator">>=</span> <span class="token number">0</span> <span class="token punctuation">:</span>
                        <span class="token keyword">if</span> board<span class="token punctuation">[</span>new_row<span class="token punctuation">]</span><span class="token punctuation">[</span>new_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span> 
                            new_cell <span class="token operator">=</span> Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">)</span>
                            self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_cell<span class="token punctuation">)</span>
                        <span class="token keyword">else</span><span class="token punctuation">:</span>
                            obstacle_color <span class="token operator">=</span> board<span class="token punctuation">[</span>new_row<span class="token punctuation">]</span><span class="token punctuation">[</span>new_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>IsWhite
                            <span class="token keyword">if</span> obstacle_color <span class="token operator">^</span> self<span class="token punctuation">.</span>IsWhite<span class="token punctuation">:</span>
                                new_cell <span class="token operator">=</span> Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">)</span>
                                self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_cell<span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">Rook</span><span class="token punctuation">(</span>Piece<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> IsWhite<span class="token punctuation">,</span> current_cell<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> IsWhite<span class="token punctuation">:</span>
            <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>IsWhite<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">"R"</span><span class="token punctuation">,</span> current_cell<span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>IsWhite<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">,</span> current_cell<span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">get_possible_moves</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> board<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>possible_moves <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            new_column <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column <span class="token operator">+</span> k
            new_row <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row
            <span class="token keyword">while</span> new_column <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> new_column <span class="token operator">&lt;=</span> <span class="token number">7</span> <span class="token keyword">and</span> new_row <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> new_row <span class="token operator">&lt;=</span> <span class="token number">7</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> board<span class="token punctuation">[</span>new_row<span class="token punctuation">]</span><span class="token punctuation">[</span>new_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span> 
                        new_cell <span class="token operator">=</span> Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">)</span>
                        self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_cell<span class="token punctuation">)</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    obstacle_color <span class="token operator">=</span> board<span class="token punctuation">[</span>new_row<span class="token punctuation">]</span><span class="token punctuation">[</span>new_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>IsWhite
                    <span class="token keyword">if</span> obstacle_color <span class="token operator">^</span> self<span class="token punctuation">.</span>IsWhite<span class="token punctuation">:</span>
                        new_cell <span class="token operator">=</span> Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">)</span>
                        self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_cell<span class="token punctuation">)</span>
                    <span class="token keyword">break</span>
                new_column <span class="token operator">=</span> new_column <span class="token operator">+</span> k
        <span class="token keyword">for</span> l <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            new_column <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column
            new_row <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">+</span> l
            <span class="token keyword">while</span> new_column <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> new_column <span class="token operator">&lt;=</span> <span class="token number">7</span> <span class="token keyword">and</span> new_row <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> new_row <span class="token operator">&lt;=</span> <span class="token number">7</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> board<span class="token punctuation">[</span>new_row<span class="token punctuation">]</span><span class="token punctuation">[</span>new_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span> 
                        new_cell <span class="token operator">=</span> Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">)</span>
                        self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_cell<span class="token punctuation">)</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    obstacle_color <span class="token operator">=</span> board<span class="token punctuation">[</span>new_row<span class="token punctuation">]</span><span class="token punctuation">[</span>new_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>IsWhite
                    <span class="token keyword">if</span> obstacle_color <span class="token operator">^</span> self<span class="token punctuation">.</span>IsWhite<span class="token punctuation">:</span>
                        new_cell <span class="token operator">=</span> Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">)</span>
                        self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_cell<span class="token punctuation">)</span>
                    <span class="token keyword">break</span>
                new_row <span class="token operator">=</span> new_row <span class="token operator">+</span> l

<span class="token keyword">class</span> <span class="token class-name">Knight</span><span class="token punctuation">(</span>Piece<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> IsWhite<span class="token punctuation">,</span> current_cell<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> IsWhite<span class="token punctuation">:</span>
            <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>IsWhite<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"N"</span><span class="token punctuation">,</span> current_cell<span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>IsWhite<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"n"</span><span class="token punctuation">,</span> current_cell<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">get_possible_moves</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> board<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>possible_moves <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        column <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column
        row <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row
        L <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> k <span class="token keyword">in</span> L<span class="token punctuation">:</span>
            temp_L <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
            temp_L<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>k<span class="token punctuation">)</span>
            temp_L<span class="token punctuation">.</span>remove<span class="token punctuation">(</span><span class="token operator">-</span>k<span class="token punctuation">)</span>
            <span class="token keyword">for</span> l <span class="token keyword">in</span> temp_L<span class="token punctuation">:</span>
                new_column <span class="token operator">=</span> column <span class="token operator">+</span> k
                new_row <span class="token operator">=</span> row <span class="token operator">+</span> l
                <span class="token keyword">if</span> new_row <span class="token operator">&lt;=</span> <span class="token number">7</span> <span class="token keyword">and</span> new_column <span class="token operator">&lt;=</span> <span class="token number">7</span> <span class="token keyword">and</span> new_row <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> new_column <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">:</span>
                    <span class="token keyword">if</span> board<span class="token punctuation">[</span>new_row<span class="token punctuation">]</span><span class="token punctuation">[</span>new_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span> 
                            new_cell <span class="token operator">=</span> Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">)</span>
                            self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_cell<span class="token punctuation">)</span>
                    <span class="token keyword">else</span><span class="token punctuation">:</span>
                        obstacle_color <span class="token operator">=</span> board<span class="token punctuation">[</span>new_row<span class="token punctuation">]</span><span class="token punctuation">[</span>new_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>IsWhite
                        <span class="token keyword">if</span> obstacle_color <span class="token operator">^</span> self<span class="token punctuation">.</span>IsWhite<span class="token punctuation">:</span>
                            new_cell <span class="token operator">=</span> Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">)</span>
                            self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_cell<span class="token punctuation">)</span>
        
<span class="token keyword">class</span> <span class="token class-name">Bishop</span><span class="token punctuation">(</span>Piece<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> IsWhite<span class="token punctuation">,</span> current_cell<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> IsWhite<span class="token punctuation">:</span>
            <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>IsWhite<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"B"</span><span class="token punctuation">,</span> current_cell<span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>IsWhite<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> current_cell<span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">get_possible_moves</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> board<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>possible_moves <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> l <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                new_column <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column <span class="token operator">+</span> k
                new_row <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">+</span> l
                <span class="token keyword">while</span> new_column <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> new_column <span class="token operator">&lt;=</span> <span class="token number">7</span> <span class="token keyword">and</span> new_row <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> new_row <span class="token operator">&lt;=</span> <span class="token number">7</span><span class="token punctuation">:</span>
                    <span class="token keyword">if</span> board<span class="token punctuation">[</span>new_row<span class="token punctuation">]</span><span class="token punctuation">[</span>new_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span> 
                            new_cell <span class="token operator">=</span> Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">)</span>
                            self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_cell<span class="token punctuation">)</span>
                    <span class="token keyword">else</span><span class="token punctuation">:</span>
                        obstacle_color <span class="token operator">=</span> board<span class="token punctuation">[</span>new_row<span class="token punctuation">]</span><span class="token punctuation">[</span>new_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>IsWhite
                        <span class="token keyword">if</span> obstacle_color <span class="token operator">^</span> self<span class="token punctuation">.</span>IsWhite<span class="token punctuation">:</span>
                            new_cell <span class="token operator">=</span> Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">)</span>
                            self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_cell<span class="token punctuation">)</span>
                        <span class="token keyword">break</span>
                    new_column <span class="token operator">=</span> new_column <span class="token operator">+</span> k
                    new_row <span class="token operator">=</span> new_row <span class="token operator">+</span> l

<span class="token keyword">class</span> <span class="token class-name">Queen</span><span class="token punctuation">(</span>Piece<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> IsWhite<span class="token punctuation">,</span> current_cell<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> IsWhite<span class="token punctuation">:</span>
            <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>IsWhite<span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token string">"Q"</span><span class="token punctuation">,</span> current_cell<span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>IsWhite<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token string">"q"</span><span class="token punctuation">,</span> current_cell<span class="token punctuation">)</span>
    
    <span class="token keyword">def</span> <span class="token function">get_possible_moves</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> board<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>possible_moves <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            new_column <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column <span class="token operator">+</span> k
            new_row <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row
            <span class="token keyword">while</span> new_column <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> new_column <span class="token operator">&lt;=</span> <span class="token number">7</span> <span class="token keyword">and</span> new_row <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> new_row <span class="token operator">&lt;=</span> <span class="token number">7</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> board<span class="token punctuation">[</span>new_row<span class="token punctuation">]</span><span class="token punctuation">[</span>new_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span> 
                        new_cell <span class="token operator">=</span> Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">)</span>
                        self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_cell<span class="token punctuation">)</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    obstacle_color <span class="token operator">=</span> board<span class="token punctuation">[</span>new_row<span class="token punctuation">]</span><span class="token punctuation">[</span>new_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>IsWhite
                    <span class="token keyword">if</span> obstacle_color <span class="token operator">^</span> self<span class="token punctuation">.</span>IsWhite<span class="token punctuation">:</span>
                        new_cell <span class="token operator">=</span> Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">)</span>
                        self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_cell<span class="token punctuation">)</span>
                    <span class="token keyword">break</span>
                new_column <span class="token operator">=</span> new_column <span class="token operator">+</span> k
        <span class="token keyword">for</span> l <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            new_column <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column
            new_row <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">+</span> l
            <span class="token keyword">while</span> new_column <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> new_column <span class="token operator">&lt;=</span> <span class="token number">7</span> <span class="token keyword">and</span> new_row <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> new_row <span class="token operator">&lt;=</span> <span class="token number">7</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> board<span class="token punctuation">[</span>new_row<span class="token punctuation">]</span><span class="token punctuation">[</span>new_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span> 
                        new_cell <span class="token operator">=</span> Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">)</span>
                        self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_cell<span class="token punctuation">)</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    obstacle_color <span class="token operator">=</span> board<span class="token punctuation">[</span>new_row<span class="token punctuation">]</span><span class="token punctuation">[</span>new_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>IsWhite
                    <span class="token keyword">if</span> obstacle_color <span class="token operator">^</span> self<span class="token punctuation">.</span>IsWhite<span class="token punctuation">:</span>
                        new_cell <span class="token operator">=</span> Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">)</span>
                        self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_cell<span class="token punctuation">)</span>
                    <span class="token keyword">break</span>
                new_row <span class="token operator">=</span> new_row <span class="token operator">+</span> l
        <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> l <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                new_column <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column <span class="token operator">+</span> k
                new_row <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">+</span> l
                <span class="token keyword">while</span> new_column <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> new_column <span class="token operator">&lt;=</span> <span class="token number">7</span> <span class="token keyword">and</span> new_row <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> new_row <span class="token operator">&lt;=</span> <span class="token number">7</span><span class="token punctuation">:</span>
                    <span class="token keyword">if</span> board<span class="token punctuation">[</span>new_row<span class="token punctuation">]</span><span class="token punctuation">[</span>new_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span> 
                            new_cell <span class="token operator">=</span> Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">)</span>
                            self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_cell<span class="token punctuation">)</span>
                    <span class="token keyword">else</span><span class="token punctuation">:</span>
                        obstacle_color <span class="token operator">=</span> board<span class="token punctuation">[</span>new_row<span class="token punctuation">]</span><span class="token punctuation">[</span>new_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>IsWhite
                        <span class="token keyword">if</span> obstacle_color <span class="token operator">^</span> self<span class="token punctuation">.</span>IsWhite<span class="token punctuation">:</span>
                            new_cell <span class="token operator">=</span> Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">)</span>
                            self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_cell<span class="token punctuation">)</span>
                        <span class="token keyword">break</span>
                    new_column <span class="token operator">=</span> new_column <span class="token operator">+</span> k
                    new_row <span class="token operator">=</span> new_row <span class="token operator">+</span> l

<span class="token keyword">class</span> <span class="token class-name">Pawn</span><span class="token punctuation">(</span>Piece<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> IsWhite<span class="token punctuation">,</span> current_cell<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> IsWhite<span class="token punctuation">:</span>
            <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>IsWhite<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> current_cell<span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>IsWhite<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> current_cell<span class="token punctuation">)</span>
    
    
    <span class="token keyword">def</span> <span class="token function">get_possible_moves</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> board<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>IsWhite<span class="token punctuation">:</span>
            move <span class="token operator">=</span> <span class="token number">1</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            move <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>
        self<span class="token punctuation">.</span>possible_moves <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">==</span> <span class="token number">6</span> <span class="token keyword">and</span> self<span class="token punctuation">.</span>IsWhite<span class="token punctuation">:</span>
            new_column <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column <span class="token operator">+</span> <span class="token number">0</span>
            new_row <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">+</span> move
            <span class="token keyword">if</span> new_column <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> new_column <span class="token operator">&lt;=</span> <span class="token number">7</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">,</span> <span class="token string">"Q"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">,</span> <span class="token string">"N"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">,</span> <span class="token string">"B"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">,</span> <span class="token string">"R"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                new_column <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column <span class="token operator">+</span> k
                new_row <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">+</span> move
                <span class="token keyword">if</span> new_column <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> new_column <span class="token operator">&lt;=</span> <span class="token number">7</span><span class="token punctuation">:</span>
                    <span class="token keyword">if</span> board<span class="token punctuation">[</span>new_row<span class="token punctuation">]</span><span class="token punctuation">[</span>new_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
                        obstacle_color <span class="token operator">=</span> board<span class="token punctuation">[</span>new_row<span class="token punctuation">]</span><span class="token punctuation">[</span>new_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>IsWhite
                        <span class="token keyword">if</span> obstacle_color <span class="token operator">^</span> self<span class="token punctuation">.</span>IsWhite<span class="token punctuation">:</span>
                            self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">,</span> <span class="token string">"Q"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                            self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">,</span> <span class="token string">"N"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                            self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">,</span> <span class="token string">"B"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                            self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">,</span> <span class="token string">"R"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token keyword">elif</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">==</span> <span class="token number">1</span> <span class="token keyword">and</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span>IsWhite<span class="token punctuation">:</span>
            new_column <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column <span class="token operator">+</span> <span class="token number">0</span>
            new_row <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">+</span> move
            <span class="token keyword">if</span> new_column <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> new_column <span class="token operator">&lt;=</span> <span class="token number">7</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">,</span> <span class="token string">"q"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">,</span> <span class="token string">"n"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                new_column <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column <span class="token operator">+</span> k
                new_row <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">+</span> move
                <span class="token keyword">if</span> new_column <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> new_column <span class="token operator">&lt;=</span> <span class="token number">7</span><span class="token punctuation">:</span>
                    <span class="token keyword">if</span> board<span class="token punctuation">[</span>new_row<span class="token punctuation">]</span><span class="token punctuation">[</span>new_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
                        obstacle_color <span class="token operator">=</span> board<span class="token punctuation">[</span>new_row<span class="token punctuation">]</span><span class="token punctuation">[</span>new_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>IsWhite
                        <span class="token keyword">if</span> obstacle_color <span class="token operator">^</span> self<span class="token punctuation">.</span>IsWhite<span class="token punctuation">:</span>
                            self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">,</span> <span class="token string">"q"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                            self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">,</span> <span class="token string">"n"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                            self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                            self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">==</span> <span class="token number">1</span> <span class="token keyword">or</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">==</span> <span class="token number">6</span><span class="token punctuation">:</span>
                <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                    new_row <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">+</span> k <span class="token operator">*</span> move
                    new_column <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column <span class="token operator">+</span> <span class="token number">0</span>
                    <span class="token keyword">if</span> new_row <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> new_row <span class="token operator">&lt;=</span> <span class="token number">7</span><span class="token punctuation">:</span>
                        <span class="token keyword">if</span> board<span class="token punctuation">[</span>new_row<span class="token punctuation">]</span><span class="token punctuation">[</span>new_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span> 
                            new_cell <span class="token operator">=</span> Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">)</span>
                            self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_cell<span class="token punctuation">)</span>
                        <span class="token keyword">else</span><span class="token punctuation">:</span>
                            <span class="token keyword">break</span>
                    <span class="token keyword">else</span><span class="token punctuation">:</span>
                        <span class="token keyword">break</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                new_row <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">+</span> move
                new_column <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column <span class="token operator">+</span> <span class="token number">0</span>
                <span class="token keyword">if</span> new_row <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> new_row <span class="token operator">&lt;=</span> <span class="token number">7</span><span class="token punctuation">:</span>
                    <span class="token keyword">if</span> board<span class="token punctuation">[</span>new_row<span class="token punctuation">]</span><span class="token punctuation">[</span>new_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span> 
                        new_cell <span class="token operator">=</span> Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">)</span>
                        self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_cell<span class="token punctuation">)</span>
            new_row <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">+</span> move
            new_column <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column <span class="token operator">-</span> <span class="token number">1</span>
            <span class="token keyword">if</span> new_column <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> new_row <span class="token operator">&lt;=</span> <span class="token number">7</span> <span class="token keyword">and</span> new_row <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> board<span class="token punctuation">[</span>new_row<span class="token punctuation">]</span><span class="token punctuation">[</span>new_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
                    obstacle_color <span class="token operator">=</span> board<span class="token punctuation">[</span>new_row<span class="token punctuation">]</span><span class="token punctuation">[</span>new_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>IsWhite
                    <span class="token keyword">if</span> obstacle_color <span class="token operator">^</span> self<span class="token punctuation">.</span>IsWhite<span class="token punctuation">:</span>
                        new_cell <span class="token operator">=</span> Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">)</span>
                        self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_cell<span class="token punctuation">)</span>

            new_column <span class="token operator">=</span> self<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column <span class="token operator">+</span> <span class="token number">1</span>
            <span class="token keyword">if</span> new_column <span class="token operator">&lt;=</span> <span class="token number">7</span> <span class="token keyword">and</span> new_row <span class="token operator">&lt;=</span> <span class="token number">7</span> <span class="token keyword">and</span> new_row <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> board<span class="token punctuation">[</span>new_row<span class="token punctuation">]</span><span class="token punctuation">[</span>new_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
                    obstacle_color <span class="token operator">=</span> board<span class="token punctuation">[</span>new_row<span class="token punctuation">]</span><span class="token punctuation">[</span>new_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>IsWhite
                    <span class="token keyword">if</span> obstacle_color <span class="token operator">^</span> self<span class="token punctuation">.</span>IsWhite<span class="token punctuation">:</span>
                        new_cell <span class="token operator">=</span> Cell<span class="token punctuation">(</span>new_row<span class="token punctuation">,</span> new_column<span class="token punctuation">)</span>
                        self<span class="token punctuation">.</span>possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>new_cell<span class="token punctuation">)</span>
</code></pre>
</div>
</details>     
</div>
<h3>Implémentation de la classe Chessboard</h3>
<p>Il faut maintenant implémenter une classe qui va permettre de représenter et manipuler un plateau d'échecs. Ce plateau sera un attribut de cette classe, et sera un tableau de 8 lignes et 8 colonnes. Chaque élément de ce tableau sera une liste contenant un objet de la classe <strong>Cell</strong>, correspondant à la case de l'échiquier, et une objet de la classe <strong>Piece</strong>, qui sera le contenu de cette case. Si la case est vide, il y aura un objet <em>None</em>.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block">
<p>Cliquer pour voir l'initialisation de la classe <strong>Chessboard</strong></p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2">
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Chessboard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>board <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token punctuation">[</span><span class="token boolean">None</span> <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token punctuation">]</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>Cell<span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">]</span>
</code></pre>
</div>
</details>     
</div>
<h4>Récupérer une position quelconque</h4>
<p>Implémentons à présent une méthode qui permettra de récupérer n'importe quelle position d'échecs. Pour cela, on va utiliser une notation appelée la <a href="https://fr.wikipedia.org/wiki/Notation_Forsyth-Edwards">Notation de Forsyth-Edwards</a>. Cette notation est celle utilisée dans le monde des échecs pour représenter une position. Pour faire court, chaque rangée de l'échiquier est décrite de haut en bas, et chaque pièce est représentée par sa lettre. En lisant les lettres une par une, il n'est pas difficile de représenter la position dans notre code.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block">
<p>Cliquer pour voir le code de la méthode <em>get_position_from_fen</em></p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2">
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python"><span class="token keyword">def</span> <span class="token function">get_position_from_fen</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> fen_position<span class="token punctuation">)</span><span class="token punctuation">:</span>
        new_board <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token punctuation">[</span><span class="token boolean">None</span> <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token punctuation">]</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                new_board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>Cell<span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">]</span>
        row_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        word <span class="token operator">=</span> <span class="token string">''</span>
        count <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">for</span> char <span class="token keyword">in</span> fen_position<span class="token punctuation">:</span>
            <span class="token keyword">if</span> char <span class="token operator">!=</span> <span class="token string">"/"</span> <span class="token keyword">and</span> char <span class="token operator">!=</span> <span class="token string">' '</span><span class="token punctuation">:</span>
                word <span class="token operator">+=</span> char
            <span class="token keyword">elif</span> char <span class="token operator">==</span> <span class="token string">"/"</span><span class="token punctuation">:</span>
                row_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>word<span class="token punctuation">)</span>
                word <span class="token operator">=</span> <span class="token string">''</span>
            <span class="token keyword">elif</span> char <span class="token operator">==</span> <span class="token string">' '</span><span class="token punctuation">:</span>
                row_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>word<span class="token punctuation">)</span>
                <span class="token keyword">if</span> fen_position<span class="token punctuation">[</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'w'</span><span class="token punctuation">:</span>
                    IsWhiteToPlay <span class="token operator">=</span> <span class="token boolean">True</span>
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    IsWhiteToPlay <span class="token operator">=</span> <span class="token boolean">False</span>
                <span class="token keyword">break</span>
            count <span class="token operator">+=</span> <span class="token number">1</span>
        nb_row <span class="token operator">=</span> <span class="token number">7</span>
        <span class="token keyword">for</span> row <span class="token keyword">in</span> row_list<span class="token punctuation">:</span>
            counter <span class="token operator">=</span> <span class="token number">0</span>
            <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> row<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>isdigit<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                    digit <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>row<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span>
                    counter <span class="token operator">+=</span> digit
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    <span class="token keyword">if</span> row<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'r'</span> <span class="token keyword">or</span> row<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'R'</span><span class="token punctuation">:</span>
                        new_board<span class="token punctuation">[</span>nb_row<span class="token punctuation">]</span><span class="token punctuation">[</span>counter<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Rook<span class="token punctuation">(</span>row<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>isupper<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Cell<span class="token punctuation">(</span>nb_row<span class="token punctuation">,</span> counter<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token keyword">elif</span> row<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'n'</span> <span class="token keyword">or</span> row<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'N'</span><span class="token punctuation">:</span>
                        new_board<span class="token punctuation">[</span>nb_row<span class="token punctuation">]</span><span class="token punctuation">[</span>counter<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Knight<span class="token punctuation">(</span>row<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>isupper<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Cell<span class="token punctuation">(</span>nb_row<span class="token punctuation">,</span> counter<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token keyword">elif</span> row<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'b'</span> <span class="token keyword">or</span> row<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'B'</span><span class="token punctuation">:</span>
                        new_board<span class="token punctuation">[</span>nb_row<span class="token punctuation">]</span><span class="token punctuation">[</span>counter<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Bishop<span class="token punctuation">(</span>row<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>isupper<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Cell<span class="token punctuation">(</span>nb_row<span class="token punctuation">,</span> counter<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token keyword">elif</span> row<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'k'</span> <span class="token keyword">or</span> row<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'K'</span><span class="token punctuation">:</span>
                        new_board<span class="token punctuation">[</span>nb_row<span class="token punctuation">]</span><span class="token punctuation">[</span>counter<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> King<span class="token punctuation">(</span>row<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>isupper<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Cell<span class="token punctuation">(</span>nb_row<span class="token punctuation">,</span> counter<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token keyword">elif</span> row<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'q'</span> <span class="token keyword">or</span> row<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'Q'</span><span class="token punctuation">:</span>
                        new_board<span class="token punctuation">[</span>nb_row<span class="token punctuation">]</span><span class="token punctuation">[</span>counter<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Queen<span class="token punctuation">(</span>row<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>isupper<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Cell<span class="token punctuation">(</span>nb_row<span class="token punctuation">,</span> counter<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token keyword">elif</span> row<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'p'</span> <span class="token keyword">or</span> row<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'P'</span><span class="token punctuation">:</span>
                        new_board<span class="token punctuation">[</span>nb_row<span class="token punctuation">]</span><span class="token punctuation">[</span>counter<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Pawn<span class="token punctuation">(</span>row<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>isupper<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Cell<span class="token punctuation">(</span>nb_row<span class="token punctuation">,</span> counter<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    counter <span class="token operator">+=</span> <span class="token number">1</span>
            nb_row <span class="token operator">-=</span> <span class="token number">1</span>
        <span class="token keyword">return</span><span class="token punctuation">(</span>new_board<span class="token punctuation">,</span> IsWhiteToPlay<span class="token punctuation">)</span>
</code></pre>
</div>
</details>     
</div>
<h4>Effectuer un mouvement sur l'échiquier</h4>
<p>La méthode <em>move</em> prend en argument une case de départ et une case d'arrivée, et modifie l'échiquier en conséquence. Pour cela, on récupère la pièce sur la case de départ et on vérifie si elle peut aller dans sa case d'arrivée grâce à l'attribut <em>possible_moves</em>. Ensuite, on supprime la pièce de la case de départ et on la place sur la case d'arrivée. Enfin, on actualise les attributs <em>possible_moves</em> de chaque pièce en utilisant les méthodes <em>get_possible_moves</em>.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block">
<p>Cliquer pour voir les codes des méthodes <em>move</em> et <em>update_possible_moves</em></p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2">
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python"><span class="token keyword">def</span> <span class="token function">move</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> current_cell<span class="token punctuation">,</span> final_cell<span class="token punctuation">)</span><span class="token punctuation">:</span>
    piece <span class="token operator">=</span> self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>current_cell<span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>current_cell<span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token keyword">if</span> piece <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Il n'y a pas de pièce dans la case indiquée"</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>final_cell<span class="token punctuation">.</span>row<span class="token punctuation">,</span> final_cell<span class="token punctuation">.</span>column<span class="token punctuation">)</span> <span class="token keyword">not</span> <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token punctuation">(</span>cell<span class="token punctuation">.</span>row<span class="token punctuation">,</span> cell<span class="token punctuation">.</span>column<span class="token punctuation">)</span> <span class="token keyword">for</span> cell <span class="token keyword">in</span> piece<span class="token punctuation">.</span>possible_moves<span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"La pièce ne peut pas aller jusqu'à la case indiquée"</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>current_cell<span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>current_cell<span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
    <span class="token keyword">if</span> piece<span class="token punctuation">.</span>letter <span class="token operator">==</span> <span class="token string">""</span> <span class="token keyword">and</span> <span class="token punctuation">(</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">==</span> <span class="token number">6</span> <span class="token keyword">and</span> piece<span class="token punctuation">.</span>IsWhite<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> final_cell<span class="token punctuation">.</span>promote <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Problème : pas de promotion"</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> final_cell<span class="token punctuation">.</span>promote <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"Q"</span><span class="token punctuation">,</span> <span class="token string">"q"</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Queen<span class="token punctuation">(</span>piece<span class="token punctuation">.</span>IsWhite<span class="token punctuation">,</span> final_cell<span class="token punctuation">)</span>
        <span class="token keyword">elif</span> final_cell<span class="token punctuation">.</span>promote <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"N"</span><span class="token punctuation">,</span> <span class="token string">"n"</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Knight<span class="token punctuation">(</span>piece<span class="token punctuation">.</span>IsWhite<span class="token punctuation">,</span> final_cell<span class="token punctuation">)</span>
        <span class="token keyword">elif</span> final_cell<span class="token punctuation">.</span>promote <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"B"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Bishop<span class="token punctuation">(</span>piece<span class="token punctuation">.</span>IsWhite<span class="token punctuation">,</span> final_cell<span class="token punctuation">)</span>
        <span class="token keyword">elif</span> final_cell<span class="token punctuation">.</span>promote <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"R"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Rook<span class="token punctuation">(</span>piece<span class="token punctuation">.</span>IsWhite<span class="token punctuation">,</span> final_cell<span class="token punctuation">)</span>

    <span class="token keyword">elif</span> piece<span class="token punctuation">.</span>letter <span class="token operator">==</span> <span class="token string">""</span> <span class="token keyword">and</span> <span class="token punctuation">(</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">==</span> <span class="token number">1</span> <span class="token keyword">and</span> <span class="token keyword">not</span> piece<span class="token punctuation">.</span>IsWhite<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> final_cell<span class="token punctuation">.</span>promote <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Problème : pas de promotion"</span><span class="token punctuation">,</span> piece<span class="token punctuation">.</span>letter<span class="token punctuation">,</span> current_cell<span class="token punctuation">.</span>name<span class="token punctuation">,</span> final_cell<span class="token punctuation">.</span>name<span class="token punctuation">,</span> final_cell<span class="token punctuation">.</span>promote<span class="token punctuation">)</span>
            <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> final_cell<span class="token punctuation">.</span>promote <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"Q"</span><span class="token punctuation">,</span> <span class="token string">"q"</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Queen<span class="token punctuation">(</span>piece<span class="token punctuation">.</span>IsWhite<span class="token punctuation">,</span> final_cell<span class="token punctuation">)</span>
        <span class="token keyword">elif</span> final_cell<span class="token punctuation">.</span>promote <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"N"</span><span class="token punctuation">,</span> <span class="token string">"n"</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Knight<span class="token punctuation">(</span>piece<span class="token punctuation">.</span>IsWhite<span class="token punctuation">,</span> final_cell<span class="token punctuation">)</span>
        <span class="token keyword">elif</span> final_cell<span class="token punctuation">.</span>promote <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"B"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Bishop<span class="token punctuation">(</span>piece<span class="token punctuation">.</span>IsWhite<span class="token punctuation">,</span> final_cell<span class="token punctuation">)</span>
        <span class="token keyword">elif</span> final_cell<span class="token punctuation">.</span>promote <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"R"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Rook<span class="token punctuation">(</span>piece<span class="token punctuation">.</span>IsWhite<span class="token punctuation">,</span> final_cell<span class="token punctuation">)</span> 
    <span class="token keyword">elif</span> piece<span class="token punctuation">.</span>letter <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"K"</span><span class="token punctuation">,</span> <span class="token string">"k"</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> King<span class="token punctuation">(</span>piece<span class="token punctuation">.</span>IsWhite<span class="token punctuation">,</span> final_cell<span class="token punctuation">)</span>
    <span class="token keyword">elif</span> piece<span class="token punctuation">.</span>letter <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"R"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Rook<span class="token punctuation">(</span>piece<span class="token punctuation">.</span>IsWhite<span class="token punctuation">,</span> final_cell<span class="token punctuation">)</span>
    <span class="token keyword">elif</span> piece<span class="token punctuation">.</span>letter <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"B"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Bishop<span class="token punctuation">(</span>piece<span class="token punctuation">.</span>IsWhite<span class="token punctuation">,</span> final_cell<span class="token punctuation">)</span>
    <span class="token keyword">elif</span> piece<span class="token punctuation">.</span>letter <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"N"</span><span class="token punctuation">,</span> <span class="token string">"n"</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Knight<span class="token punctuation">(</span>piece<span class="token punctuation">.</span>IsWhite<span class="token punctuation">,</span> final_cell<span class="token punctuation">)</span>
    <span class="token keyword">elif</span> piece<span class="token punctuation">.</span>letter <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"Q"</span><span class="token punctuation">,</span> <span class="token string">"q"</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Queen<span class="token punctuation">(</span>piece<span class="token punctuation">.</span>IsWhite<span class="token punctuation">,</span> final_cell<span class="token punctuation">)</span>
    <span class="token keyword">elif</span> piece<span class="token punctuation">.</span>letter <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">""</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>final_cell<span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Pawn<span class="token punctuation">(</span>piece<span class="token punctuation">.</span>IsWhite<span class="token punctuation">,</span> final_cell<span class="token punctuation">)</span>
    self<span class="token punctuation">.</span>update_possible_moves<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">update_possible_moves</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> row <span class="token keyword">in</span> self<span class="token punctuation">.</span>board<span class="token punctuation">:</span>
        <span class="token keyword">for</span> cell <span class="token keyword">in</span> row<span class="token punctuation">:</span>
            <span class="token keyword">if</span> cell<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
                cell<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>get_possible_moves<span class="token punctuation">(</span>self<span class="token punctuation">.</span>board<span class="token punctuation">)</span>
</code></pre>
</div>
</details>     
</div>
<p>Le cas de la promotion sera expliqué plus tard, car c'est un cas qui a été traité en dernier lors de ce sprint.</p>
<h4>Déterminer si une pièce peut être capturée par ou pas</h4>
<p>Cette méthode est très importante, car elle est utilisée dans beaucoup de méthodes ci-après. Pour cela, on récupère tout les mouvements possibles du plateau, et on vérifie si les coordonnées de la pièce en question est dans cette liste.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block">
<p>Cliquer pour voir le code de la méthode <em>CanBeCaptured</em></p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2">
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python"><span class="token keyword">def</span> <span class="token function">CanBeCaptured</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> piece<span class="token punctuation">)</span><span class="token punctuation">:</span>
    captured_by <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    opponent_moves <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>cell<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> cell<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token keyword">for</span> cell <span class="token keyword">in</span> self<span class="token punctuation">.</span>get_all_possible_moves2<span class="token punctuation">(</span><span class="token keyword">not</span> piece<span class="token punctuation">.</span>IsWhite<span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>opponent_moves<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>opponent_moves<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            current_cell <span class="token operator">=</span> opponent_moves<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span>
            <span class="token keyword">if</span> piece<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>name <span class="token operator">==</span> current_cell<span class="token punctuation">.</span>name<span class="token punctuation">:</span>
                captured_by<span class="token punctuation">.</span>append<span class="token punctuation">(</span>opponent_moves<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span>
    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>captured_by<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">,</span> captured_by<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">,</span> captured_by<span class="token punctuation">)</span>
</code></pre>
</div>
</details>     
</div>
<h4>Récupérer tout les mouvements possibles d'une position</h4>
<p>Il faut ensuite récupérer tout les coups possibles d'une position. Pour cela, on parcourt le plateau et quand on rencontre une pièce, on rajoute dans une liste la case de départ et les cases d'arrivée. Une chose importante à faire est de trier cette liste finale. On place en premier les mouvements qui résultent en un échec. Ceci est important car ces mouvements sont plus susceptibles de résoudre le problème, et cela va considérablement réduire le temps d'exécution de l'algorithme.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block">
<p>Cliquer pour voir le code de la méthode <em>get_all_possible_moves</em></p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2">
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python"><span class="token keyword">def</span> <span class="token function">get_all_possible_moves</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> IsWhiteToPlay<span class="token punctuation">)</span><span class="token punctuation">:</span>
    all_possible_moves <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    initial_board <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>self<span class="token punctuation">.</span>board<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> row <span class="token keyword">in</span> self<span class="token punctuation">.</span>board<span class="token punctuation">:</span>
        <span class="token keyword">for</span> cell <span class="token keyword">in</span> row<span class="token punctuation">:</span>
            <span class="token keyword">if</span> cell<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>board <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>initial_board<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                piece <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>cell<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> piece<span class="token punctuation">.</span>IsWhite <span class="token operator">==</span> IsWhiteToPlay<span class="token punctuation">:</span>
                    current_moves <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
                    index <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>
                    <span class="token comment"># killer_moves = []</span>
                    <span class="token keyword">for</span> move <span class="token keyword">in</span> piece<span class="token punctuation">.</span>possible_moves<span class="token punctuation">:</span>
                        piece_opponent <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>move<span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>move<span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                        self<span class="token punctuation">.</span>move<span class="token punctuation">(</span>piece<span class="token punctuation">.</span>current_cell<span class="token punctuation">,</span> move<span class="token punctuation">)</span>
                        <span class="token keyword">if</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span>IsCheck<span class="token punctuation">(</span>IsWhiteToPlay<span class="token punctuation">)</span><span class="token punctuation">:</span>
                            <span class="token keyword">if</span> self<span class="token punctuation">.</span>IsCheck<span class="token punctuation">(</span><span class="token keyword">not</span> IsWhiteToPlay<span class="token punctuation">)</span><span class="token punctuation">:</span>
                                current_moves <span class="token operator">=</span> <span class="token punctuation">[</span>move<span class="token punctuation">]</span> <span class="token operator">+</span> current_moves
                            <span class="token keyword">elif</span> piece_opponent <span class="token operator">!=</span> <span class="token boolean">None</span> <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>piece_opponent<span class="token punctuation">.</span>IsWhite<span class="token punctuation">)</span> <span class="token operator">^</span> <span class="token punctuation">(</span>piece<span class="token punctuation">.</span>IsWhite<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                                current_moves <span class="token operator">=</span> <span class="token punctuation">[</span>move<span class="token punctuation">]</span> <span class="token operator">+</span> current_moves
                            <span class="token keyword">elif</span> piece<span class="token punctuation">.</span>letter <span class="token keyword">not</span> <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">""</span><span class="token punctuation">]</span> <span class="token keyword">and</span> index <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span>
                                current_moves <span class="token operator">=</span> current_moves<span class="token punctuation">[</span><span class="token punctuation">:</span>index<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">[</span>move<span class="token punctuation">]</span> <span class="token operator">+</span> current_moves<span class="token punctuation">[</span>index<span class="token punctuation">:</span><span class="token punctuation">]</span>
                            <span class="token keyword">else</span><span class="token punctuation">:</span>
                                current_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span>move<span class="token punctuation">)</span>
                            self<span class="token punctuation">.</span>board <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>initial_board<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                            index <span class="token operator">+=</span> <span class="token number">1</span>
                        <span class="token keyword">else</span><span class="token punctuation">:</span>
                            self<span class="token punctuation">.</span>board <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>initial_board<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                    <span class="token comment"># current_moves = killer_moves + current_moves</span>
                    all_possible_moves<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span>piece<span class="token punctuation">.</span>current_cell<span class="token punctuation">,</span> current_moves<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span>all_possible_moves<span class="token punctuation">)</span>
</code></pre>
</div>
</details>     
</div>
<p>Notons que cette méthode gère les &quot;clouages&quot;. Ce concept a lieu quand une pièce ne peut pas bouger car si elle bouge, son roi serait en échec.</p>
<h4>Déterminer si la position est un échec et mat ou pas</h4>
<p>Cette méthode a été la plus longue à implémenter. Ceci est dû au fait que qu'il y a plusieurs cas à vérifier. En effet, pour parer un échec, il y a plusieurs possibilités:</p>
<ul>
<li>Le roi en échec peut simplement bouger vers une case où il n'est pas en échec,</li>
<li>Capturer la pièce qui met en échec,</li>
<li>Interposer une pièce entre le roi est la pièce qui met en échec.</li>
</ul>
<p>La méthode <em>IsCheckmate</em> gère ces cas un par un, et renvoie un booléen qui indique s'il y a uun échec et mat ou pas.<br>
Il est inutile d'expliquer en détail comment cette fonction gère ces cas, mais il est intéressant de noter que cette méthode utilise la plupart des méthodes ci-avant.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block">
<p>Cliquer pour voir le code de la méthode <em>IsCheckmate</em></p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2">
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python"><span class="token keyword">def</span> <span class="token function">IsCheckmate</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> IsWhiteToPlay<span class="token punctuation">)</span><span class="token punctuation">:</span>
    initial_board <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>self<span class="token punctuation">.</span>board<span class="token punctuation">)</span>
    count <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> row <span class="token keyword">in</span> self<span class="token punctuation">.</span>board<span class="token punctuation">:</span>
        <span class="token keyword">for</span> cell <span class="token keyword">in</span> row<span class="token punctuation">:</span>
            <span class="token keyword">if</span> cell<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
                piece2 <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>cell<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token comment"># print(piece2.letter, piece2.current_cell.name)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>piece2<span class="token punctuation">.</span>value <span class="token operator">==</span> <span class="token number">1000</span> <span class="token keyword">or</span> piece2<span class="token punctuation">.</span>value <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1000</span><span class="token punctuation">)</span> <span class="token keyword">and</span> <span class="token punctuation">(</span>piece2<span class="token punctuation">.</span>IsWhite <span class="token operator">==</span> IsWhiteToPlay<span class="token punctuation">)</span><span class="token punctuation">:</span>
                    list_captured <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>self<span class="token punctuation">.</span>CanBeCaptured<span class="token punctuation">(</span>piece2<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                    <span class="token keyword">if</span> self<span class="token punctuation">.</span>CanBeCaptured<span class="token punctuation">(</span>piece2<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token comment">#Vérifie si le roi est en échec</span>
                        current_row <span class="token operator">=</span> piece2<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row
                        current_column <span class="token operator">=</span> piece2<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column
                        current_cell <span class="token operator">=</span> Cell<span class="token punctuation">(</span>current_row<span class="token punctuation">,</span>current_column<span class="token punctuation">)</span>
                        <span class="token keyword">for</span> move <span class="token keyword">in</span> piece2<span class="token punctuation">.</span>possible_moves<span class="token punctuation">:</span>
                            self<span class="token punctuation">.</span>move<span class="token punctuation">(</span>current_cell<span class="token punctuation">,</span> move<span class="token punctuation">)</span>
                            new_piece <span class="token operator">=</span> self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>move<span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>move<span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
                            can_be_captured <span class="token operator">=</span> self<span class="token punctuation">.</span>CanBeCaptured<span class="token punctuation">(</span>new_piece<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
                            <span class="token comment"># print(new_piece.current_cell.name, [cell.name for cell in self.CanBeCaptured(new_piece)[1]])</span>
                            <span class="token keyword">if</span> can_be_captured<span class="token punctuation">:</span>
                                count <span class="token operator">+=</span> <span class="token number">1</span>
                            self<span class="token punctuation">.</span>board <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>initial_board<span class="token punctuation">)</span>
                            self<span class="token punctuation">.</span>update_possible_moves<span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token keyword">if</span> count <span class="token operator">!=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>piece2<span class="token punctuation">.</span>possible_moves<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment">#Vérifie si le roi peut s'échapper ou pas</span>
                            <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>
                        <span class="token keyword">else</span><span class="token punctuation">:</span> <span class="token comment">#Le roi ne peut pas s'échapper</span>
                            <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>list_captured<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span> <span class="token comment">#Une pièce met en échec</span>
                                cell <span class="token operator">=</span> list_captured<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
                                piece_opponent <span class="token operator">=</span> self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>cell<span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>cell<span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
                                <span class="token punctuation">(</span>can_be_captured2<span class="token punctuation">,</span> list_captured2<span class="token punctuation">)</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>CanBeCaptured<span class="token punctuation">(</span>piece_opponent<span class="token punctuation">)</span>
                                <span class="token keyword">if</span> can_be_captured2 <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>list_captured2<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">1</span> <span class="token keyword">or</span> self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>list_captured2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>list_captured2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>letter <span class="token keyword">not</span> <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"k"</span><span class="token punctuation">,</span> <span class="token string">"K"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment">#La pièce peut être prise par une pièce autre que le roi</span>
                                    index <span class="token operator">=</span> <span class="token boolean">None</span>
                                    <span class="token keyword">for</span> m <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>list_captured2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                                        <span class="token keyword">if</span> self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>list_captured2<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>list_captured2<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>letter <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"K"</span><span class="token punctuation">,</span> <span class="token string">"k"</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                                            index <span class="token operator">=</span> m
                                            <span class="token keyword">break</span>
                                    <span class="token keyword">if</span> index <span class="token operator">!=</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
                                        list_captured2<span class="token punctuation">.</span>pop<span class="token punctuation">(</span>index<span class="token punctuation">)</span>
                                    c <span class="token operator">=</span> <span class="token number">0</span>
                                    <span class="token keyword">for</span> cell_opponent <span class="token keyword">in</span> list_captured2<span class="token punctuation">:</span>
                                        c <span class="token operator">+=</span> <span class="token number">1</span>
                                        self<span class="token punctuation">.</span>move<span class="token punctuation">(</span>cell_opponent<span class="token punctuation">,</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">)</span>
                                        <span class="token keyword">if</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span>IsCheck<span class="token punctuation">(</span>IsWhiteToPlay<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># Au moins une pièce peut prendre la pièce qui met en échec</span>
                                            self<span class="token punctuation">.</span>board <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>initial_board<span class="token punctuation">)</span>
                                            <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>
                                        self<span class="token punctuation">.</span>board <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>initial_board<span class="token punctuation">)</span>
                                    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
                                <span class="token keyword">else</span><span class="token punctuation">:</span> <span class="token comment">#La pièce ne peut pas être prise par une pièce autre que le roi</span>
                                    cells_inbetween <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
                                    piece_opponent <span class="token operator">=</span> self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>list_captured<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>list_captured<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
                                    row_king <span class="token operator">=</span> piece2<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row
                                    column_king <span class="token operator">=</span> piece2<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column
                                    <span class="token keyword">if</span> piece_opponent<span class="token punctuation">.</span>letter <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"R"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">,</span> <span class="token string">"q"</span><span class="token punctuation">,</span> <span class="token string">"Q"</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                                        <span class="token keyword">if</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column <span class="token operator">==</span> column_king <span class="token keyword">and</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">></span> row_king<span class="token punctuation">:</span> <span class="token comment">#la Tour est au-dessus du roi</span>
                                            current_column <span class="token operator">=</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column
                                            current_row <span class="token operator">=</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">-</span> <span class="token number">1</span>
                                            <span class="token keyword">while</span> current_row <span class="token operator">!=</span> row_king <span class="token keyword">and</span> current_row <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">:</span>
                                                cells_inbetween<span class="token punctuation">.</span>append<span class="token punctuation">(</span>self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>current_row<span class="token punctuation">]</span><span class="token punctuation">[</span>current_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                                                current_row <span class="token operator">-=</span> <span class="token number">1</span>
                                        <span class="token keyword">elif</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column <span class="token operator">==</span> column_king <span class="token keyword">and</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">&lt;</span> row_king<span class="token punctuation">:</span> <span class="token comment">#la Tour est en dessous du roi</span>
                                            current_column <span class="token operator">=</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column
                                            current_row <span class="token operator">=</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">+</span> <span class="token number">1</span>
                                            <span class="token keyword">while</span> current_row <span class="token operator">!=</span> row_king <span class="token keyword">and</span> current_row <span class="token operator">&lt;=</span> <span class="token number">7</span><span class="token punctuation">:</span>
                                                cells_inbetween<span class="token punctuation">.</span>append<span class="token punctuation">(</span>self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>current_row<span class="token punctuation">]</span><span class="token punctuation">[</span>current_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                                                current_row <span class="token operator">+=</span> <span class="token number">1</span>
                                        <span class="token keyword">elif</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">==</span> row_king <span class="token keyword">and</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column <span class="token operator">></span> column_king<span class="token punctuation">:</span> <span class="token comment">#la Tour est à droite du roi</span>
                                            current_column <span class="token operator">=</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column <span class="token operator">-</span> <span class="token number">1</span>
                                            current_row <span class="token operator">=</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row
                                            <span class="token keyword">while</span> current_column <span class="token operator">!=</span> column_king <span class="token keyword">and</span> current_column <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">:</span>
                                                cells_inbetween<span class="token punctuation">.</span>append<span class="token punctuation">(</span>self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>current_row<span class="token punctuation">]</span><span class="token punctuation">[</span>current_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                                                current_column <span class="token operator">-=</span> <span class="token number">1</span>
                                        <span class="token keyword">elif</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">==</span> row_king <span class="token keyword">and</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column <span class="token operator">&lt;</span> column_king<span class="token punctuation">:</span> <span class="token comment">#la Tour est à gauche du roi</span>
                                            current_column <span class="token operator">=</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column <span class="token operator">+</span> <span class="token number">1</span>
                                            current_row <span class="token operator">=</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row
                                            <span class="token keyword">while</span> current_column <span class="token operator">!=</span> column_king <span class="token keyword">and</span> current_column <span class="token operator">&lt;=</span> <span class="token number">7</span><span class="token punctuation">:</span>
                                                cells_inbetween<span class="token punctuation">.</span>append<span class="token punctuation">(</span>self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>current_row<span class="token punctuation">]</span><span class="token punctuation">[</span>current_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                                                current_column <span class="token operator">+=</span> <span class="token number">1</span>
                                    <span class="token keyword">if</span> piece_opponent<span class="token punctuation">.</span>letter <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"B"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"Q"</span><span class="token punctuation">,</span> <span class="token string">"q"</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                                        <span class="token keyword">if</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column <span class="token operator">></span> column_king <span class="token keyword">and</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">></span> row_king<span class="token punctuation">:</span> <span class="token comment">#le Fou est en haut à droite du roi</span>
                                            current_column <span class="token operator">=</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column <span class="token operator">-</span> <span class="token number">1</span>
                                            current_row <span class="token operator">=</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">-</span> <span class="token number">1</span>
                                            <span class="token keyword">while</span> current_row <span class="token operator">!=</span> row_king <span class="token keyword">and</span> current_column <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> current_row <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">:</span>
                                                cells_inbetween<span class="token punctuation">.</span>append<span class="token punctuation">(</span>self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>current_row<span class="token punctuation">]</span><span class="token punctuation">[</span>current_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                                                current_row <span class="token operator">-=</span> <span class="token number">1</span>
                                                current_column <span class="token operator">-=</span> <span class="token number">1</span>
                                        <span class="token keyword">elif</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column <span class="token operator">&lt;</span> column_king <span class="token keyword">and</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">&lt;</span> row_king<span class="token punctuation">:</span> <span class="token comment">#le Fou est en bas à gauche du roi</span>
                                            current_column <span class="token operator">=</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column <span class="token operator">+</span> <span class="token number">1</span>
                                            current_row <span class="token operator">=</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">+</span> <span class="token number">1</span>
                                            <span class="token keyword">while</span> current_row <span class="token operator">!=</span> row_king <span class="token keyword">and</span> current_row <span class="token operator">&lt;=</span> <span class="token number">7</span> <span class="token keyword">and</span> current_column <span class="token operator">&lt;=</span> <span class="token number">7</span><span class="token punctuation">:</span>
                                                cells_inbetween<span class="token punctuation">.</span>append<span class="token punctuation">(</span>self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>current_row<span class="token punctuation">]</span><span class="token punctuation">[</span>current_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                                                current_row <span class="token operator">+=</span> <span class="token number">1</span>
                                                current_column <span class="token operator">+=</span> <span class="token number">1</span>
                                        <span class="token keyword">elif</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column <span class="token operator">></span> column_king <span class="token keyword">and</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">&lt;</span> row_king<span class="token punctuation">:</span> <span class="token comment">#le Fou est en bas à droite du roi</span>
                                            current_column <span class="token operator">=</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column <span class="token operator">-</span> <span class="token number">1</span>
                                            current_row <span class="token operator">=</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">+</span> <span class="token number">1</span>
                                            <span class="token keyword">while</span> current_row <span class="token operator">!=</span> row_king <span class="token keyword">and</span> current_row <span class="token operator">&lt;=</span> <span class="token number">7</span> <span class="token keyword">and</span> current_column <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">:</span>
                                                cells_inbetween<span class="token punctuation">.</span>append<span class="token punctuation">(</span>self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>current_row<span class="token punctuation">]</span><span class="token punctuation">[</span>current_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                                                current_row <span class="token operator">+=</span> <span class="token number">1</span>
                                                current_column <span class="token operator">-=</span> <span class="token number">1</span>
                                        <span class="token keyword">elif</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column <span class="token operator">&lt;</span> column_king <span class="token keyword">and</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">></span> row_king<span class="token punctuation">:</span> <span class="token comment">#le Fou est en haut à gauche du roi</span>
                                            current_column <span class="token operator">=</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>column <span class="token operator">+</span> <span class="token number">1</span>
                                            current_row <span class="token operator">=</span> piece_opponent<span class="token punctuation">.</span>current_cell<span class="token punctuation">.</span>row <span class="token operator">-</span> <span class="token number">1</span>
                                            <span class="token keyword">while</span> current_row <span class="token operator">!=</span> row_king <span class="token keyword">and</span> current_row <span class="token operator">>=</span> <span class="token number">0</span> <span class="token keyword">and</span> current_column <span class="token operator">&lt;=</span> <span class="token number">7</span><span class="token punctuation">:</span>
                                                cells_inbetween<span class="token punctuation">.</span>append<span class="token punctuation">(</span>self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>current_row<span class="token punctuation">]</span><span class="token punctuation">[</span>current_column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                                                current_row <span class="token operator">-=</span> <span class="token number">1</span>
                                                current_column <span class="token operator">+=</span> <span class="token number">1</span>
                                    <span class="token keyword">if</span> piece_opponent<span class="token punctuation">.</span>letter <span class="token keyword">not</span> <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"R"</span><span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">,</span> <span class="token string">"B"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"Q"</span><span class="token punctuation">,</span> <span class="token string">"q"</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token comment">#La pièce qui met en échec n'est ni un fou, ni une tour, ni une Dame</span>
                                        <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
                                    cells_inbetween <span class="token operator">=</span> <span class="token punctuation">[</span>cell<span class="token punctuation">.</span>name <span class="token keyword">for</span> cell <span class="token keyword">in</span> cells_inbetween<span class="token punctuation">]</span>
                                    all_possible_moves <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>self<span class="token punctuation">.</span>get_all_possible_moves<span class="token punctuation">(</span>IsWhiteToPlay<span class="token punctuation">)</span><span class="token punctuation">)</span>
                                    ending_cells <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
                                    <span class="token keyword">for</span> n <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>all_possible_moves<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                                        current_cell <span class="token operator">=</span> all_possible_moves<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
                                        <span class="token keyword">if</span> self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>current_cell<span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>current_cell<span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>letter <span class="token keyword">not</span> <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">'k'</span><span class="token punctuation">,</span> <span class="token string">'K'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                                            ending_cells <span class="token operator">+=</span> all_possible_moves<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
                                    ending_cells <span class="token operator">=</span> <span class="token punctuation">[</span>cell<span class="token punctuation">.</span>name <span class="token keyword">for</span> cell <span class="token keyword">in</span> ending_cells<span class="token punctuation">]</span>
                                    <span class="token keyword">for</span> cell <span class="token keyword">in</span> ending_cells<span class="token punctuation">:</span>
                                        <span class="token keyword">if</span> cell <span class="token keyword">in</span> cells_inbetween<span class="token punctuation">:</span>
                                            <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>
                                    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
                            <span class="token keyword">else</span><span class="token punctuation">:</span> <span class="token comment">#2 pièces ou plus mettent en échec</span>
                                <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
                    <span class="token keyword">else</span><span class="token punctuation">:</span>
                        <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>
</code></pre>
</div>
</details>     
</div>
<h4>Fonction d'évaluation</h4>
<p>Il faut maintenant une méthode qui évalue la position d'une position donnée. Nous allons faire très simple, étant donné que l'objectif est simplement de résoudre des échecs et mat en quelques coups: l'évaluation d'une position sera donc la somme des valeurs des pièces présentes dans le plateau. S'il y a un échec et mat, on renvoie un score de 1000000.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block">
<p>Cliquer pour voir le code de la méthode <em>evaluate</em></p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2">
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python"><span class="token keyword">def</span> <span class="token function">evaluation</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">eval</span> <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">if</span> self<span class="token punctuation">.</span>IsCheckmate<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1000000</span><span class="token punctuation">)</span>
    <span class="token keyword">elif</span> self<span class="token punctuation">.</span>IsCheckmate<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">1000000</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> row <span class="token keyword">in</span> self<span class="token punctuation">.</span>board<span class="token punctuation">:</span>
        <span class="token keyword">for</span> cell <span class="token keyword">in</span> row<span class="token punctuation">:</span>
            <span class="token keyword">if</span> cell<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
                <span class="token builtin">eval</span> <span class="token operator">+=</span> cell<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>value
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token builtin">eval</span><span class="token punctuation">)</span>
</code></pre>
</div>
</details>     
</div>
<div class="quote relative drop-shadow  py-2 pr-2 rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-amber-800 bg-amber-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-amber-800" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Notons que cette fonction d'évaluation est centrale dans les meilleurs robots d'échecs. Elle est ici loin d'être complète, mais comme on s'intéresse seulement à des échecs et mat, il est inutile de pousser plus loin cette méthode.</p>
</div></div>
<h4>L'algorithme de résolution</h4>
<p>Nous arrivons enfin à l'algorithme de résolution. Cet algorithme va utiliser toutes les méthodes précédemment présentées pour trouver un échec et mat en quelques coups. Cette méthode prend en entrée une position en notation FEN, un nombre de coups à explorer (qui est la profondeur de calcul) et renvoie une liste de coups qui correspond à l'échec et mat trouvé.<br>
Cet algorithme, bien connu dans la théorie des jeux, s'appelle <a href="https://fr.wikipedia.org/wiki/Algorithme_minimax">l'algorithme Minimax</a>. Il est inutiles d'expliquer comment fonctionne cet algorithme en détail car beaucoup de documentation est disponible sur ce sujet, mais le principe général repose sur le fait que l'algorithme trouve les mouvements qui permet de minimiser le score pour un joueur et maximiser ce même score pour l'autre joueur. Ce score est trouvé grâce à la méthode <em>evaluate</em>. Notons également que j'ai également implémenter <a href="https://fr.wikipedia.org/wiki/%C3%89lagage_alpha-b%C3%AAta">l'élagage &quot;Alpha-Beta&quot;</a> qui permet de réduire considérablement le temps d'exécution, en coupant les branches de l'arbre qui sont inutiles à explorer.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block">
<p>Cliquer pour voir le code de la méthode <em>solve</em></p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2">
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python"><span class="token keyword">def</span> <span class="token function">solve</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> fen_position<span class="token punctuation">,</span> IsWhiteToPlay<span class="token punctuation">,</span> depth<span class="token punctuation">)</span><span class="token punctuation">:</span>
    self<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token number">0</span> 
    self<span class="token punctuation">.</span>tot <span class="token operator">=</span> <span class="token number">0</span>
    self<span class="token punctuation">.</span>best_moves <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token boolean">None</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>depth<span class="token punctuation">)</span><span class="token punctuation">]</span>
    variations <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">(</span>self<span class="token punctuation">.</span>board<span class="token punctuation">,</span> IsWhiteToPlay<span class="token punctuation">)</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>get_position_from_fen<span class="token punctuation">(</span>fen_position<span class="token punctuation">)</span>
    self<span class="token punctuation">.</span>update_possible_moves<span class="token punctuation">(</span><span class="token punctuation">)</span>
    time_begin <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>
    result <span class="token operator">=</span> self<span class="token punctuation">.</span>solve_assist<span class="token punctuation">(</span>IsWhiteToPlay<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">9999999999</span><span class="token punctuation">,</span> <span class="token number">9999999999</span><span class="token punctuation">,</span> depth<span class="token punctuation">)</span>
    time_final <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>
    tot_time <span class="token operator">=</span> <span class="token builtin">round</span><span class="token punctuation">(</span>time_final <span class="token operator">-</span> time_begin<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    tot_min <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token punctuation">(</span>tot_time <span class="token operator">//</span> <span class="token number">60</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">60</span><span class="token punctuation">)</span>
    tot_hours <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>tot_time <span class="token operator">//</span> <span class="token number">3600</span><span class="token punctuation">)</span>
    tot_sec <span class="token operator">=</span> <span class="token builtin">round</span><span class="token punctuation">(</span>tot_time <span class="token operator">%</span> <span class="token number">60</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Durée de l'exécution: </span><span class="token interpolation"><span class="token punctuation">{</span>tot_hours<span class="token punctuation">}</span></span><span class="token string"> heures, </span><span class="token interpolation"><span class="token punctuation">{</span>tot_min<span class="token punctuation">}</span></span><span class="token string"> minutes et </span><span class="token interpolation"><span class="token punctuation">{</span>tot_sec<span class="token punctuation">}</span></span><span class="token string"> secondes"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">solve_assist</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> IsWhiteToPlay<span class="token punctuation">,</span> alpha<span class="token punctuation">,</span> beta<span class="token punctuation">,</span> depth<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># print(depth, self.IsCheckmate(True))</span>
    self<span class="token punctuation">.</span>c <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>c<span class="token punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>tot<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>evaluation<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> depth <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">or</span> self<span class="token punctuation">.</span>IsCheckmate<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token keyword">or</span> self<span class="token punctuation">.</span>IsCheckmate<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>evaluation<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>best_moves<span class="token punctuation">)</span>
    <span class="token keyword">if</span> IsWhiteToPlay<span class="token punctuation">:</span>
        best <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">99999999999</span>
        all_possible_moves <span class="token operator">=</span> self<span class="token punctuation">.</span>get_all_possible_moves<span class="token punctuation">(</span>IsWhiteToPlay<span class="token punctuation">)</span>
        flag <span class="token operator">=</span> <span class="token boolean">False</span>
        IsStalemate <span class="token operator">=</span> <span class="token boolean">True</span>
        <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>all_possible_moves<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>tot <span class="token operator">+=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>all_possible_moves<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> move <span class="token keyword">in</span> all_possible_moves<span class="token punctuation">:</span>
            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                initial_board <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>self<span class="token punctuation">.</span>board<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                initial_best_moves <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>self<span class="token punctuation">.</span>best_moves<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                self<span class="token punctuation">.</span>move<span class="token punctuation">(</span>move<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
                IsStalemate <span class="token operator">=</span> <span class="token boolean">False</span>
                val <span class="token operator">=</span> self<span class="token punctuation">.</span>solve_assist<span class="token punctuation">(</span><span class="token keyword">not</span> IsWhiteToPlay<span class="token punctuation">,</span> alpha<span class="token punctuation">,</span> beta<span class="token punctuation">,</span> depth <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
                self<span class="token punctuation">.</span>board <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>initial_board<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> val <span class="token operator">></span> best<span class="token punctuation">:</span>
                    best <span class="token operator">=</span> val
                    next_move <span class="token operator">=</span> <span class="token string">""</span>
                    <span class="token keyword">if</span> move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>promote <span class="token operator">!=</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
                        <span class="token keyword">if</span> self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
                            next_move <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">chr</span><span class="token punctuation">(</span>move<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>column <span class="token operator">+</span> <span class="token number">97</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span> <span class="token operator">+</span> <span class="token string">"x"</span> <span class="token operator">+</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">"</span></span> <span class="token operator">+</span> <span class="token string">"="</span> <span class="token operator">+</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>promote<span class="token punctuation">}</span></span><span class="token string">"</span></span>
                        <span class="token keyword">else</span><span class="token punctuation">:</span>
                            next_move <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">"</span></span> <span class="token operator">+</span> <span class="token string">"="</span> <span class="token operator">+</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>promote<span class="token punctuation">}</span></span><span class="token string">"</span></span>
                    <span class="token keyword">else</span><span class="token punctuation">:</span>
                        <span class="token keyword">if</span> self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>letter <span class="token operator">==</span> <span class="token string">""</span> <span class="token keyword">and</span> self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
                            next_move <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">chr</span><span class="token punctuation">(</span>move<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>column <span class="token operator">+</span> <span class="token number">97</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span> <span class="token operator">+</span> next_move
                        <span class="token keyword">if</span> self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
                            next_move <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>letter<span class="token punctuation">}</span></span><span class="token string">"</span></span> <span class="token operator">+</span> <span class="token string">"x"</span> <span class="token operator">+</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">"</span></span>
                        <span class="token keyword">else</span><span class="token punctuation">:</span>
                            next_move <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>letter<span class="token punctuation">}</span></span><span class="token string">"</span></span> <span class="token operator">+</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">"</span></span>
                        <span class="token keyword">if</span> self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>letter <span class="token operator">==</span> <span class="token string">""</span> <span class="token keyword">and</span> self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
                            next_move <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">chr</span><span class="token punctuation">(</span>move<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>column <span class="token operator">+</span> <span class="token number">97</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span> <span class="token operator">+</span> next_move
                    self<span class="token punctuation">.</span>move<span class="token punctuation">(</span>move<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
                    <span class="token keyword">if</span> self<span class="token punctuation">.</span>IsCheckmate<span class="token punctuation">(</span><span class="token keyword">not</span> IsWhiteToPlay<span class="token punctuation">)</span><span class="token punctuation">:</span>
                        next_move <span class="token operator">=</span> next_move <span class="token operator">+</span> <span class="token string">"#"</span>
                    <span class="token keyword">elif</span> self<span class="token punctuation">.</span>IsCheck<span class="token punctuation">(</span><span class="token keyword">not</span> IsWhiteToPlay<span class="token punctuation">)</span><span class="token punctuation">:</span>
                        next_move <span class="token operator">=</span> next_move <span class="token operator">+</span> <span class="token string">"+"</span>
                    self<span class="token punctuation">.</span>board <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>initial_board<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                    self<span class="token punctuation">.</span>best_moves<span class="token punctuation">[</span><span class="token operator">-</span>depth<span class="token punctuation">]</span> <span class="token operator">=</span> next_move
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    self<span class="token punctuation">.</span>best_moves <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>initial_best_moves<span class="token punctuation">)</span>
                alpha <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>alpha<span class="token punctuation">,</span> val<span class="token punctuation">)</span>
                <span class="token keyword">if</span> beta <span class="token operator">&lt;=</span> alpha<span class="token punctuation">:</span>
                    flag <span class="token operator">=</span> <span class="token boolean">True</span>
                    <span class="token keyword">break</span>
            <span class="token keyword">if</span> flag<span class="token punctuation">:</span>
                <span class="token keyword">break</span>
        <span class="token keyword">if</span> IsStalemate<span class="token punctuation">:</span>
            <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>best_moves<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        best <span class="token operator">=</span> <span class="token number">9999999999</span>
        all_possible_moves <span class="token operator">=</span> self<span class="token punctuation">.</span>get_all_possible_moves<span class="token punctuation">(</span>IsWhiteToPlay<span class="token punctuation">)</span>
        flag <span class="token operator">=</span> <span class="token boolean">False</span>
        IsStalemate <span class="token operator">=</span> <span class="token boolean">True</span>
        <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>all_possible_moves<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>tot <span class="token operator">+=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>all_possible_moves<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> move <span class="token keyword">in</span> all_possible_moves<span class="token punctuation">:</span>
            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                initial_board <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>self<span class="token punctuation">.</span>board<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                initial_best_moves <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>self<span class="token punctuation">.</span>best_moves<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                self<span class="token punctuation">.</span>move<span class="token punctuation">(</span>move<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
                IsStalemate <span class="token operator">=</span> <span class="token boolean">False</span>
                val <span class="token operator">=</span> self<span class="token punctuation">.</span>solve_assist<span class="token punctuation">(</span><span class="token keyword">not</span> IsWhiteToPlay<span class="token punctuation">,</span> alpha<span class="token punctuation">,</span> beta<span class="token punctuation">,</span> depth <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
                self<span class="token punctuation">.</span>board <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>initial_board<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> val <span class="token operator">&lt;</span> best<span class="token punctuation">:</span>
                    best <span class="token operator">=</span> val
                    next_move <span class="token operator">=</span> <span class="token string">""</span>
                    <span class="token keyword">if</span> move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>promote <span class="token operator">!=</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
                        <span class="token keyword">if</span> self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
                            next_move <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">chr</span><span class="token punctuation">(</span>move<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>column <span class="token operator">+</span> <span class="token number">97</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span> <span class="token operator">+</span> <span class="token string">"x"</span> <span class="token operator">+</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">"</span></span> <span class="token operator">+</span> <span class="token string">"="</span> <span class="token operator">+</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>promote<span class="token punctuation">}</span></span><span class="token string">"</span></span>
                        <span class="token keyword">else</span><span class="token punctuation">:</span>
                            next_move <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">"</span></span> <span class="token operator">+</span> <span class="token string">"="</span> <span class="token operator">+</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>promote<span class="token punctuation">}</span></span><span class="token string">"</span></span>
                    <span class="token keyword">else</span><span class="token punctuation">:</span>
                        <span class="token keyword">if</span> self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>letter <span class="token operator">==</span> <span class="token string">""</span> <span class="token keyword">and</span> self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
                            next_move <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">chr</span><span class="token punctuation">(</span>move<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>column <span class="token operator">+</span> <span class="token number">97</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span> <span class="token operator">+</span> next_move
                        <span class="token keyword">if</span> self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
                            next_move <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>letter<span class="token punctuation">}</span></span><span class="token string">"</span></span> <span class="token operator">+</span> <span class="token string">"x"</span> <span class="token operator">+</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">"</span></span>
                        <span class="token keyword">else</span><span class="token punctuation">:</span>
                            next_move <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>letter<span class="token punctuation">}</span></span><span class="token string">"</span></span> <span class="token operator">+</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">"</span></span>
                        <span class="token keyword">if</span> self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>letter <span class="token operator">==</span> <span class="token string">""</span> <span class="token keyword">and</span> self<span class="token punctuation">.</span>board<span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>column<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
                            next_move <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">chr</span><span class="token punctuation">(</span>move<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>column <span class="token operator">+</span> <span class="token number">97</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span> <span class="token operator">+</span> next_move
                    self<span class="token punctuation">.</span>move<span class="token punctuation">(</span>move<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> move<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
                    <span class="token keyword">if</span> self<span class="token punctuation">.</span>IsCheckmate<span class="token punctuation">(</span><span class="token keyword">not</span> IsWhiteToPlay<span class="token punctuation">)</span><span class="token punctuation">:</span>
                        next_move <span class="token operator">=</span> next_move <span class="token operator">+</span> <span class="token string">"#"</span>
                    <span class="token keyword">elif</span> self<span class="token punctuation">.</span>IsCheck<span class="token punctuation">(</span><span class="token keyword">not</span> IsWhiteToPlay<span class="token punctuation">)</span><span class="token punctuation">:</span>
                        next_move <span class="token operator">=</span> next_move <span class="token operator">+</span> <span class="token string">"+"</span>
                    self<span class="token punctuation">.</span>board <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>initial_board<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                    self<span class="token punctuation">.</span>best_moves<span class="token punctuation">[</span><span class="token operator">-</span>depth<span class="token punctuation">]</span> <span class="token operator">=</span> next_move
                <span class="token keyword">else</span><span class="token punctuation">:</span>
                    self<span class="token punctuation">.</span>best_moves <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>initial_best_moves<span class="token punctuation">)</span>
                beta <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>beta<span class="token punctuation">,</span> val<span class="token punctuation">)</span>
                <span class="token keyword">if</span> beta <span class="token operator">&lt;=</span> alpha<span class="token punctuation">:</span>
                    flag <span class="token operator">=</span> <span class="token boolean">True</span>
                    <span class="token keyword">break</span>
            <span class="token keyword">if</span> flag<span class="token punctuation">:</span>
                <span class="token keyword">break</span>
        <span class="token keyword">if</span> IsStalemate<span class="token punctuation">:</span>
            <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>best_moves<span class="token punctuation">)</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span>best<span class="token punctuation">,</span> self<span class="token punctuation">.</span>best_moves<span class="token punctuation">)</span>
</code></pre>
</div>
</details>     
</div>
<h2>Démonstration du code</h2>
<p>Pour vérifier si ce code fonctionne correctement, j'ai cherché des problèmes de mat en 2 et de mat en 3 sur Internet, et j'ai fait tourner l'algorithme sur ces positions. Voici un exemple sur cette position:</p>
<p><img src="Image1.png" alt="Image1"></p>
<p>L'exécution de l'algorithme sur cette position donne la ligne suivante: <code>['Qd5+', 'nxd5', 'Rxc6#']</code> en 55.5 secondes. D'après l'ordinateur le plus puissant du monde &quot;Stockfish&quot;, c'est bien la solution! (Notons le brillant sacrifice de Dame). Plusieurs lignes sont possibles, celle qui est donnée n'en est qu'un exemple.<br>
Voici un autre exemple d'un mat en 3 sur la position suivante:</p>
<p><img src="Image2.png" alt="Image2"></p>
<p>L'algorithme fournit la ligne suivante: <code>['Ke2', 'nc1+', 'Ke3', 'na2', 'd4#']</code> en 24 minutes. Encore une fois, c'est la bonne réponse. On remarque cependant que la résolution a été bien plus longue. Ceci est dû au fait qu'il y a beaucoup plus de pièces sur l'échiquier, et le nombre de mouvements explorés est également beaucoup plus élevé que le cas précédent.<br>
Pour finir, voici l'exemple de résolution d'un mat en 4 sur la position suivante:</p>
<p><img src="Image3.png" alt="Image3"></p>
<p>L'algorithme résout ce problème en 12 minutes et 57 secondes: <code>['Bh5', 'kxh5', 'Kg7', 'h6', 'Kf6', 'kh4', 'Kg6#']</code>. Notons que l'exécution est gérable grâce au fait qu'il y ait peu de pièces sur l'échiquier, et que les coups des Noirs soient forcés après le mouvement Fou H5. En réalité, j'ai essayé de faire tourner l'algorithme sur d'autres problèmes de Mat en 4 pendant plusieurs heures, sans avoir de résultat. Le mat en 4 est donc la limite, ce qui traduit le manque d'optimisation de l'algorithme.</p>
<h3>Gestion de la promotion des pions</h3>
<p>De nombreux problèmes repose sur une règle des échecs, nommée la &quot;promotion&quot;. Cette règle stipule qu'un pion a le droit de se transformer en n'importe quelle pièce lorsqu'elle arrive au bout du plateau. Pour implémenter cela dans le code, on crée un attribut <em>promote</em> dans la classe <strong>Cell</strong>. Cet attribut est par défaut <em>None</em>. Si un pion se trouve sur les rangées d'indice 1 ou 6, on change cet attribue en une pièce (Tour, Dame, Fou ou Cavalier). Ensuite, dans la méthode move, lorsque l'attribut <em>promote</em> n'est pas <em>None</em> on avance le pion et on le change en la pièce correspondante.</p>
<p>Pour tester cette implémentation, on fait tourner l'algorithme sur le problème suivant, qui est un mat en 2 qui nécessite deux promotions (Trait aux noirs):</p>
<p><img src="Image4.png" alt="Image4"></p>
<p>La ligne donnée est: <code>['e1=n+', 'Kh2', 'f1=n#']</code>, qui est bien la solution. L'algorithme a bien compris qu'il fallait faire deux promotions en cavalier.</p>
<h2>Bilan du premier sprint et prévision du deuxième sprint</h2>
<p>J'ai réussi à développer tout les objectifs du backlog présenté plus haut. J'ai parfois sous estimé certaines complexités, mais finalement tout s'est bien passé. L'algorithme que j'ai créé n'est pas du tout optimal, et manque cruellement de techniques pour rendre plus rapide l'exécution. Les meilleurs robots d'échecs explorent une profondeur de plus de 15 en seulement quelques secondes, tandis que mon programme met plusieurs heures pour une profondeur de 7... Cependant, le programme marche parfaitement pour des profondeurs faibles, ce qui me contente pour l'instant.</p>
<p>Il faut à présent décrire le backlog du deuxième sprint, qui aura pour objectif d'utiliser Pygame pour implémenter le jeu d'échecs pour qu'on puisse y jouer. Voici ce backlog, avec les complexités pour chaque fonctionnalités:</p>
<ul>
<li>Représentation graphique du plateau et de ses pièces <strong>(3)</strong></li>
<li>Détection des clics du joueur sur chaque pièces, et proposition de mouvement pour chaque pièces cliquées <strong>(13)</strong></li>
<li>Vérifier si les échecs et les échecs et mat <strong>(5)</strong></li>
<li>Implémentation de sons <strong>(3)</strong></li>
<li>Implémentation de l'historique de la partie <strong>(8)</strong></li>
<li>Implémentation de la liste des pièces prises par chaque joueur <strong>(3)</strong></li>
</ul>


</article>

        </main>


        <footer class="min-h-[50px] border-t-2 border-gray-200 mt-4">
            <div class="max-w-[1000px] mx-auto px-4">
                <div class="min-h-[50px] flex justify-center items-center">
                    <p class="text-center">
                        <span style="font-family: Consolas, sans-serif;">Do_<span style="color: #4a86e8">It</span></span> : Développent et Organisation en IT
                    </p>
                </div>
            </div>
        </footer>

        <script>
        MathJax
            .startup
            .document
            .getMathItemsWithin(document.body);
        </script>

    </body>
</html>
