
<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Gestion, analyse et présentations de données</title>

        <link href="/do-it/assets/node_modules/prismjs/themes/prism-solarizedlight.min.css" rel="stylesheet">
        <link href="/do-it/assets/node_modules/prismjs/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet">

        <link href="/do-it/assets/stylesheets/main.css" rel="stylesheet">
    </head>
    <body>
        <script>
        window.MathJax = {
            tex: {
            inlineMath: [
                [
                '$', '$'
                ],
                [
                '\\(', '\\)'
                ]
            ]
            },
            svg: {
            fontCache: 'global'
            }
        };
        </script>
        <script type="text/javascript" id="MathJax-script" src="/do-it/assets/node_modules/mathjax/es5/tex-svg-full.js"></script>

        <header class="border-b-2 border-gray-200 mb-4">
        <div class="max-w-[1000px] mx-auto px-4">
            <div class="min-h-[50px] flex justify-between items-center">
                <a class="mx-2" href="/do-it/">Home</a>
                <div class="flex items-center gap-4 sm:gap-6 ">
                    <a class="" href="/do-it/cs">CS</a>
                    <a class="" href="/do-it/pok">POK</a>
                    <a class="" href="/do-it/mon">MON</a>
                    <a class="" href="/do-it/projets">Projets</a>
                    <a class="hidden sm:block" href="/do-it/promos">Promos</a>
                    <a href="/do-it/search">
                        <svg class="h-5 aspect-square" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path>
                        </svg>
                    </a>
                    <a class="hidden sm:block" href="https://github.com/FrancoisBrucker/do-it" target="_blank">
                        <svg class="h-5 aspect-square" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg>
                    </a>
                </div>
            </div>
        </div>
        </header>

        <main class="max-w-[1000px] mx-auto px-4" data-pagefind-body="">
            
<article class="relative">
<h1 class="mb-1">Gestion, analyse et présentations de données</h1>
<div class="mb-4">
    
        <div class="px-4 flex flex-wrap items-center">
            
                <div class="font-bold">Tags : </div>
            
            <ul class="flex flex-wrap overflow-auto not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Tags">
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">POK</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">2024-2025</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">temps 2</li>
                

            </ul>
            
            
            <div class="hidden" data-pagefind-meta="Type">
                
                    
                
                    
                
                    
                
            </div>
        </div>
    

    
        <div class="px-4 flex flex-wrap items-center">
            <div class="font-bold">Auteurs : </div>
            <ul class="flex flex-wrap not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Auteurs">
                
                    <li class="bg-blue-200 rounded-full px-2" data-pagefind-filter="Auteurs">Charles Cook</li>
                
            </ul>
        </div>
    

    
</div>

        <p class="mb-4 text-lg">

                L'objectif de ce POK est d'apprendre comment on nettoie et on gère de la donnée, mais également de montrer comment on présente et traite cette donnée.

        </p>



    
<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-purple-500 bg-purple-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-purple-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"></path>
</svg>
<div class="pl-8 mr-8">

<a href="/do-it/promos/">Promotions</a><span class="px-1">/</span><a href="/do-it/promos/2024-2025/">2024-2025</a><span class="px-1">/</span><a href="/do-it/promos/2024-2025/Charles-Cook/">Charles Cook</a><span class="px-1">/</span><a href="/do-it/promos/2024-2025/Charles-Cook/pok/">POK de Charles Cook</a><span class="px-1">/</span><a href="/do-it/promos/2024-2025/Charles-Cook/pok/temps-2/">Gestion, analyse et présentations de données</a>

</div></div>




<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-pink-500 bg-pink-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-pink-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
</svg>
<div class="pl-8 mr-8">
<p>Aucun pré-requis</p>
</div></div>
<div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-emerald-500 bg-emerald-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-emerald-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
  <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"></path>
</svg>
<div class="pl-8 mr-8">
<ul>
<li><a href="https://www.w3schools.com/sql/default.asp">Cours SQL</a></li>
<li><a href="https://sql.sh/exercices-sql/villes-de-france">Base de données : Villes de France</a></li>
<li><a href="https://www.data.gouv.fr/fr/organizations/534fff99a3a7292c64a78016/#/datasets">data.gouv</a></li>
</ul>
</div></div>

<p>Lors de mes stages, j'ai pu constater que les données constituent un atout majeur pour une entreprise. Les données vont permettre de pouvoir faire une analyse des performances de l'entreprise, mais également de faire des prévisions afin d'ajuster les processus. L'enjeu majeur que constituent les données est également visible lorsque celles-ci sont incomplètes ou erronées, faussant voir paralysant certaines analyses et donc processus. C'est pourquoi j'ai décidé de m'intéresser à la gestion, la manipulation, l'analyse et la présentation de données. Ce sujet est très vaste mais je vais le découper en sous-thématiques :</p>
<ul>
<li>Manipulation et navigation de bases de données relationnelles (SQL)</li>
<li>Création d'une base de données et analyse de son contenu en SQL</li>
</ul>
<h2>Tâches</h2>
<h3>Sprints</h3>
<p>Le but final est la compréhension de la gestion des données, depuis la création d'une base de données, jusqu'à l aprésentation de celles-ci, en passant par leur analyse.</p>
<h4>Sprint 1</h4>
<ul>
<li>[x] Apprentissage du langage SQL pour naviguer au sein d'une base de données</li>
<li>[x] Application à une base de données</li>
<li>[x] Création d'une base de données</li>
<li>[x] Analyse et tests sur la données de cette table</li>
</ul>
<h4>Sprint 2</h4>
<ul>
<li>[ ] Apprentissage d'une méthode d'analyse de données (Python ?)</li>
<li>[ ] Application afin d'analyser les données d'une table</li>
<li>[ ] Présentation de cette données</li>
</ul>
<h3>Horodatage</h3>
<table>
<thead>
<tr>
<th>Date</th>
<th>Heures passées</th>
<th>Indications</th>
</tr>
</thead>
<tbody>
<tr>
<td>Mardi 12/11</td>
<td>1H</td>
<td>Apprentissage SQL</td>
</tr>
<tr>
<td>Mercredi 13/11 AM</td>
<td>2H15</td>
<td>Apprentissage SQL</td>
</tr>
<tr>
<td>Mercredi 13/11 PM</td>
<td>1H45</td>
<td>Application aux villes de France</td>
</tr>
<tr>
<td>Jeudi 14/11 AM</td>
<td>2H</td>
<td>Création d'une base de données pour les JO (une tentative a été faite pour la réaliser seul, mais le temps de mise en forme était trop important, je me suis donc rabattu sur une base de données gouvernementale existante pour laquelle la mise en forme était plus rapide)</td>
</tr>
<tr>
<td>Jeudi 14/11 PM</td>
<td>1H30</td>
<td>Manipulation de la base de données créée et définition des questions d'analyse</td>
</tr>
<tr>
<td>Vendredi 15/11 PM</td>
<td>1H45</td>
<td>Réponses aux questions d'analyse</td>
</tr>
<tr>
<td>Samedi 16/11 PM</td>
<td>1H</td>
<td>Rédaction Sprint 1</td>
</tr>
<tr>
<td>Dimanche 17/11 PM</td>
<td>1H</td>
<td>Rédaction Sprint 1</td>
</tr>
</tbody>
</table>
<h2>Premier Sprint</h2>
<h3>Gestion de bases de données et de tables en SQL</h3>
<p><em>Afin d'illustrer les différentes fonctions que nous allons présenter, nous utiliserons deux tables :</em></p>
<ul>
<li><em>villes_france_free</em> comprenant les villes de France et leurs informations (nom, numéro de département, canton, population en 1999, 2010 et 2012, densité, longitude et latitude, surface,...).</li>
<li><em>departement</em> comprenant les départements de France et leurs numéros associés.</li>
</ul>
<h4>Extraire des données d'une table</h4>
<p>Afin d'extraire des données d'une base de données relationnelle, on utilise des fonctions SQL :</p>
<table>
<thead>
<tr>
<th>Fonction</th>
<th>Explications</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SELECT</code></td>
<td>Renvoie une sous table contenant les éléments selectionnés</td>
</tr>
<tr>
<td><code>DISTINCT</code></td>
<td>Retourne seulement les valeurs uniques</td>
</tr>
<tr>
<td><code>WHERE</code></td>
<td>Permet de réaliser un filtre</td>
</tr>
<tr>
<td><code>ORDER BY</code></td>
<td>Permet de trier les lignes extraites</td>
</tr>
<tr>
<td><code>GROUP BY</code></td>
<td>Permet de grouper les données par catégories</td>
</tr>
<tr>
<td><code>LIKE</code></td>
<td>Utilisé dans un WHERE, pour spécifier ce que l’on cherche</td>
</tr>
<tr>
<td><code>IN</code></td>
<td>Permet de spécifier plusieurs caractères dans un même WHERE</td>
</tr>
<tr>
<td><code>BETWEEN</code></td>
<td>Sélectionne les valeurs comprises dans une plage de valeurs donnée</td>
</tr>
<tr>
<td><code>AS</code></td>
<td>Crée un alias donnant à une table ou une colonne un nom temporaire, tant que la requête est en cours</td>
</tr>
</tbody>
</table>
<p><strong>Quelles sont les villes du Vaucluse (84) ?</strong></p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Code et Résultats</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<p><strong>Code</strong></p>
<pre><code>SELECT * FROM villes_france_free WHERE ville_departement=84;
</code></pre>
<p>Ce code permet de créer un table temporaire des villes vauclusiennes dans l'odre alphabétique.</p>
<p><strong>Résultats</strong>
<img src="Images/Villes%20Vaucluse%20Tri%C3%A9es.png" alt="Villes Vaucluse Triées"></p>
</div>
</details>     
</div>
<table>
<thead>
<tr>
<th>Fonction</th>
<th>Explications</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>AND</code></td>
<td>Combine plusieurs conditions pour réaliser une intersection</td>
</tr>
<tr>
<td><code>OR</code></td>
<td>Combine plusieurs conditions pour réaliser une réunion</td>
</tr>
<tr>
<td><code>NOT</code></td>
<td>Permet de réaliser une exclusion</td>
</tr>
<tr>
<td><code>LIMIT</code></td>
<td>Permet de préciser le nombre de lignes que l'on veut extraire</td>
</tr>
<tr>
<td><code>UNION</code></td>
<td>Permet de combiner les résultats de deux ou plusieurs instructions <code>SELECT</code></td>
</tr>
</tbody>
</table>
<p><strong>Quelles sont les 10 villes les moins peuplées de France en 2012 ?</strong></p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Code et Résultats</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<p><strong>Code</strong></p>
<pre><code>SELECT * FROM villes_france_free
ORDER BY ville_population_2010 ASC
LIMIT 10;
</code></pre>
<p>Ce code permet d'extraire les 10 villes les moins peuplées, dans l'ordre croissant du nombre d'habitants.</p>
<p><strong>Résultats</strong>
<img src="Images/TOP%2010%20des%20villes%20les%20moins%20peupl%C3%A9es%20en%202010.png" alt="TOP 10 villes les moins peuplées"></p>
</div>
</details>     
</div>
<h5>Fonctions d'aggrégation</h5>
<p>Une fonction d'aggrégation est une fonction qui réalise des calculs sur un groupe de données et qui renvoie une valeur unique.</p>
<table>
<thead>
<tr>
<th>Fonction</th>
<th>Explications</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>MAX</code></td>
<td>Renvoie la plus grande valeur d'une colonne</td>
</tr>
<tr>
<td><code>MIN</code></td>
<td>Renvoie la plus petite valeur d'une fonction</td>
</tr>
</tbody>
</table>
<p><strong>Quelles est la population de la ville la plus peuplée du Vaucluse (84) ?</strong></p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Code et Résultats</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<p><strong>Code</strong></p>
<pre><code>SELECT MAX(ville_population_2012)
FROM villes_france_free
WHERE ville_departement=84;
</code></pre>
<p><strong>Résultats</strong>
Cette requête renvoie 90100, correspondant à la population d'Avignon en 2012.</p>
</div>
</details>     
</div>
<table>
<thead>
<tr>
<th>Fonction</th>
<th>Explications</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>COUNT</code></td>
<td>Renvoie le nombre de ligne de la table qui respectent un critère donné</td>
</tr>
<tr>
<td><code>SUM</code></td>
<td>Renvoie la somme d'une colonne spécifiée</td>
</tr>
<tr>
<td><code>AVG</code></td>
<td>Renvoie la moyenne</td>
</tr>
<tr>
<td><code>HAVING</code></td>
<td>Permet de mettre une condition sur les lignes que l’on extrait avec des fonctions d’aggrégation (car WHERE ne le permet pas)</td>
</tr>
</tbody>
</table>
<p><strong>Combien de villes en France possède un nom débutant par 'Saint' ?</strong></p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Code et Résultats</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<p><strong>Code</strong></p>
<pre><code>SELECT COUNT(ville_nom)
FROM villes_france_free
WHERE ville_nom LIKE 'SAINT%';
</code></pre>
<p><strong>Résultats</strong>
Cette requête renvoie 4260, ce qui signifie que 4260 villes commencent par 'Saint' en France.</p>
</div>
</details>     
</div>
<p><strong>Quels sont les noms de ville donnés plusieurs fois, du plus au moins rare ?</strong></p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Code et Résultats</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<p><strong>Code</strong></p>
<pre><code>SELECT ville_nom AS 'NOM VILLE', COUNT(ville_nom) AS 'NOMBRE DE VILLE'
FROM villes_france_free
GROUP BY ville_nom
HAVING COUNT(ville_nom)&gt;1
ORDER BY COUNT(ville_nom) DESC;
</code></pre>
<p><strong>Résultats</strong>
<img src="Images/Doublon%20noms%20de%20ville.png" alt="Doublons noms de villes"></p>
<p>La première colonne donne les noms de ville donnés plusieurs fois et la seconde fait apparaître combien de fois le nom a été donné.</p>
</div>
</details>     
</div>
<h4>Modifier une table</h4>
<p>Il peut être nécessaire de modifier les données d'une table afin de la mettre à jour. Plusieurs fonctions peuvent être utiles :</p>
<h5>Ajouter des données</h5>
<table>
<thead>
<tr>
<th>Fonction</th>
<th>Explications</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>INSERT INTO</code></td>
<td>Permet d'ajouter une ligne dans une table</td>
</tr>
</tbody>
</table>
<p>La syntaxe à adopoter est dans ce cas la suivante :</p>
<pre><code>INSERT INTO nom_de_la_table (colonne 1, colonne 2, colonne 3, ...)
VALUES 
(Value 1.1, Value 1.2, Value 1.3, ...),
(Value 2.1, Value 2.2, Value 2.3, ...);
</code></pre>
<p><em>NB: Si on ajoute une valeur pour chaque colonne, il n’est pas nécessaire de préciser le nom de chaque colonne dans les parenthèses après le nom de la table, mais il faut bien respecter l’ordre des données.</em></p>
<p><strong>Ajouter la ville de New-York à la table <em>villes_france_free.</em></strong></p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Code et Résultats</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<p><strong>Code</strong>
Afin d'ajouter une ligne pour la ville de New-York dans la table <em>villes_france_free</em>, le code est le suivant :</p>
<pre><code>INSERT INTO villes_france_free(ville_id,ville_code_commune,ville_nom) VALUES(000, 000, 'NEW YORK');
SELECT * FROM villes_france_free;
</code></pre>
<p><strong>Résultats</strong>
<img src="Images/Ajout%20NEW%20YORK.png" alt="Ajout NY"></p>
<p>On remarque qu'une ligne a été ajouté à la fin de la table, pour la ville de New-York.</p>
</div>
</details>     
</div>
<h6>Supprimer des données</h6>
<table>
<thead>
<tr>
<th>Fonction</th>
<th>Explications</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DELETE</code></td>
<td>Permet de supprimer un élément, une ligne ou même tous les éléments d'une table</td>
</tr>
</tbody>
</table>
<p><em><strong>Exemple</strong> : Supprimer tous les éléments de la table <strong>villes_france_free</strong> se ferait avec la requête <code>DELETE FROM villes_france_free;</code></em></p>
<table>
<thead>
<tr>
<th>Fonction</th>
<th>Explications</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DROP TABLE</code></td>
<td>Permet de supprimer une table (pas seulement son contenu)</td>
</tr>
</tbody>
</table>
<h5>Modifier des données</h5>
<table>
<thead>
<tr>
<th>Fonction</th>
<th>Explications</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>UPDATE</code></td>
<td>Mise à jour de la donnée</td>
</tr>
</tbody>
</table>
<p><strong>Mise à jour des données concernant la population de New-York</strong></p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Code et Résultats</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<p><strong>Code</strong></p>
<pre><code>UPDATE villes_france_free 
SET ville_population_2012=8347000, ville_population_2010=819000, ville_population_1999=7428000
WHERE ville_nom='NEW YORK';
</code></pre>
<p>Ce code permet de mettre à jour la ligne de la ville de New-York avec les populations en 1999, 2010 et 2012.</p>
</div>
</details>     
</div>
<h4>Combiner plusieurs tables</h4>
<p>En entreprise, tous les employés n’ont pas accès à toutes les données, certaines étant classifiée sensibles. Ainsi, différentes bases de données (ou tables) peuvent être crées avec des niveaux de confidentialité différents. Afin d’extraire des données complètes, il peut être utile d’extraire des données provenant de différentes tables, c’est-ce qu’on appelle des jointures.</p>
<h5>Jointures</h5>
<p>Il existe différents types de jointure :</p>
<ul>
<li>(INNER) JOIN : renvoie les lignes ayant correspondances dans les deux tables</li>
<li>LEFT (OUTER) JOIN : renvoie toutes les lignes de la table de gauche, et les données correspondantes dans la table de droite</li>
<li>RIGHT (OUTER) JOIN : renvoie toutes les lignes de la table de droite, et les données correspondantes dans la table de gauche</li>
<li>FULL (OUTER) JOIN : renvoie toutes les lignes quand il y a une correspondance dans la table de gauche ou de droite</li>
<li>SELF JOIN : réalise une jointure d’une table avec elle-même</li>
</ul>
<p><img src="Images/types%20de%20jointures.png" alt="Types de jointures">
<em><a href="https://www.w3schools.com/sql/sql_join.asp">Source : w3schools</a></em></p>
<p><strong>Dans notre exemple, nous avons dans la table <em>villes_france_free</em> les départements uniquement renseignés par numéro. Nous allons tenter de réaliser une jointure avec la table <em>departement</em> pour renseigner également le nom du département.</strong></p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Code et Résultats</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<p><strong>Code</strong></p>
<pre><code>SELECT t1.ville_departement, t1.ville_nom, t2.departement_nom
FROM villes_france_free.villes_france_free AS t1
JOIN departement.departement AS t2 
ON t1.ville_departement = t2.departement_code
ORDER BY t1.ville_nom;
</code></pre>
<p><strong>Résultats</strong>
<img src="Images/Jointure%20d%C3%A9partement.png" alt="Jointure départements">
Le résultat ci-dessus montre que nous pouvons à présent, grâce à la jointure réalisée entre les deux tables, faire apparaître le nom complet du département auquel appartient la ville et non plus seulement son numéro.</p>
</div>
</details>     
</div>
<h4>Création d'une base de données, d'une table</h4>
<h5>Fonctions pour créer une base de données, une table</h5>
<table>
<thead>
<tr>
<th>Fonction</th>
<th>Explications</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CREATE DATABASE</code></td>
<td>Création d'une base de données</td>
</tr>
<tr>
<td><code>CREATE TABLE</code></td>
<td>Création d'une table dans une base de données</td>
</tr>
<tr>
<td><code>DROP DATABASE</code></td>
<td>Suppression d'une base de données</td>
</tr>
<tr>
<td><code>DROP TABLE</code></td>
<td>Suppression d'une table dans une base de données</td>
</tr>
<tr>
<td><code>ALTER TABLE</code></td>
<td>Permet de modifier une table, en ajoutant une colonne, supprimant une colonne, modifiant le type de donnée d’une colonne, changer le nom du colonne</td>
</tr>
</tbody>
</table>
<h5>Contraintes</h5>
<p>Il est possible d’ajouter des contrainte sur une colonne lors de la création d’une table. Les contraintes possibles sont les suivantes :</p>
<table>
<thead>
<tr>
<th>Contrainte</th>
<th>Explications</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>NOT NULL</code></td>
<td>Permet de s’assurer qu’une colonne ne possède pas de valeur <code>NULL</code></td>
</tr>
<tr>
<td><code>UNIQUE</code></td>
<td>Permet de s’assurer que toutes les valeurs d’une colonne sont différentes</td>
</tr>
<tr>
<td><code>PRIMARY KEY</code></td>
<td>Une combinaison de <code>NOT NULL</code> et <code>UNIQUE</code></td>
</tr>
<tr>
<td><code>FOREIGN KEY</code></td>
<td>Prévient des actions qui détruirait les liens entre différentes tables</td>
</tr>
<tr>
<td><code>CHECK</code></td>
<td>S’assure que les valeurs d’une colonne respectent bien une condition donnée</td>
</tr>
<tr>
<td><code>DEFAULT</code></td>
<td>Attribue une valeur par défaut pour une colonne si aucune valeur n’est spécifiée</td>
</tr>
</tbody>
</table>
<h4>Application : Création et analyse du contenu d'une base de données</h4>
<p>Nous allons tenter de créer une base de données afin de pouvoir réaliser une manipulation des données en langage SQL. Pour cela, nous allons nous intéresser aux médailles remportées par pays, durant les jeux Olympiques d'hiver entre 1924 et 2010. Pour cela, nous allons tout d'abord créer un base de données et un table vide.</p>
<h5>Création de la base de données et la table</h5>
<p>Nous allons créer une base de données intitulée <em>winter_medals</em>, dans laquelle nous allons créer une table <em>medals</em> contenant les informations suivantes :</p>
<ul>
<li>Identifiant <em>id</em></li>
<li>Année de l'édition pendant laquelle la médaille a été obtenue, <em>years</em></li>
<li>Nom de la discipline, <em>sport</em></li>
<li>La couleur de la médaille, <em>medal</em></li>
<li>Le code du pays, <em>country</em></li>
<li>Le nom complet du pays, <em>pays</em></li>
<li>un boolen indiquant si le pays accueillait les jeux lorsqu'il a obtenu la médaille ou non, <em>host</em></li>
</ul>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Code</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<pre><code>CREATE DATABASE winter_medals;
CREATE TABLE medals (
    id INT,
    years INT,
    sport VARCHAR(255),
    medal VARCHAR(255),
    country VARCHAR(255),
    pays VARCHAR(255),
    host VARCHAR(255)
);
</code></pre>
<p>On voit que pour chaque colonne créée, on précise le type de données qu'elle contient.</p>
</div>
</details>     
</div>
<h5>Chargement des données</h5>
<p>Afin de récolter les données, j'ai utilisé le site <a href="https://www.data.gouv.fr/fr/organizations/534fff99a3a7292c64a78016/#/datasets">Data Gouv</a> permattant d'accéder à un certain nombre de données. J'ai ensuite modifié quelques typographies sur Excel afin de pouvoir charger les données dans la table <em>medals</em></p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Code</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<pre><code>INSERT INTO medals (id, years, sport, medal, country, pays, host) VALUES
(131666,1924,'biathlon','gold','SUI','Switzerland','FALSE'),
(231666,1924,'biathlon','silver','FIN','Finland','FALSE'),
(331666,1924,'biathlon','bronze','FRA','France','TRUE'),
(431666,1960,'biathlon','gold','SWE','Sweden','FALSE'),
(531666,1960,'biathlon','silver','FIN','Finland','FALSE'),
(631666,1960,'biathlon','bronze','URS','USSR','FALSE'),
(731666,1964,'biathlon','gold','URS','USSR','FALSE'),
(831666,1964,'biathlon','silver','URS','USSR','FALSE'),
(931666,1964,'biathlon','bronze','NOR','Norway','FALSE'),
[…]
(256732514,2010,'snowboard','silver','RUS','Russian Federation','FALSE'),
(256832514,2010,'snowboard','bronze','AUT','Austria','FALSE'),
(256932514,2010,'snowboard','gold','CAN','Canada','TRUE'),
(257032514,2010,'snowboard','silver','FRA','France','FALSE'),
(257132514,2010,'snowboard','bronze','SUI','Switzerland','FALSE');
</code></pre>
</div>
</details>     
</div>
<p>On obtient ainsi une table contenant 2571 lignes.</p>
<p>On remarque que le la colonne id est en fait une clé primaire, dont les 5 derniers chiffres renvoient au type d’épreuve, et les chiffres avant correspond au numéro de la ligne. Il est donc intéressant de changer le type de la première colonne pour indiquer que c’est une clé primaire :</p>
<pre><code>ALTER TABLE medals ADD PRIMARY KEY (id);
</code></pre>
<h5>Etude des données</h5>
<p>Grâce à la création de cette base de données, nous allons pouvoir répondre de manière plus simple aux questions suivantes, qui nous permettent de débuter une analyse de la donnée :</p>
<ul>
<li>Q1 : Quel est le tableau des médailles pour l'ensemble des éditions de 1924 à 2010 ?</li>
<li>Q2 : Quel pays est en tête du classement des médailles par édition ?</li>
<li>Q3 : Quel est le classement dans le tableau des médailles de chaque pays par édition ?</li>
<li>Q4 : Sur l'ensemble des éditions entre 1924 et 2010, quel pays est le meilleur dans chaque discipline ?</li>
<li>Q5 : La performance du pays organisateur (en terme de nombre de médailles) est elle supérieur que lorsque le même pays n'est pas organisateur ?</li>
</ul>
<h6>Question 1 : Quel est le tableau des éditions entre 1924 et 2010, quel pays est le meilleur dans chaque discipline ?</h6>
<p>Lors des JO, les pays sont classés selon un <em>tableau des médailles</em>, classant les pays en fonctions du nombre de médailles d'or, puis de médailes d'argent, et enfin de médailles de bronze.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Code</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<p><strong>Code</strong></p>
<pre><code>SELECT pays AS 'Pays',
       COUNT(medal) AS 'Total Médailles',
       SUM(CASE WHEN medal = 'GOLD' THEN 1 ELSE 0 END) AS 'GOLD',
       SUM(CASE WHEN medal = 'SILVER' THEN 1 ELSE 0 END) AS 'SILVER',
       SUM(CASE WHEN medal = 'BRONZE' THEN 1 ELSE 0 END) AS 'BRONZE'
FROM medals
GROUP BY pays
ORDER BY GOLD DESC, SILVER DESC, BRONZE DESC;
</code></pre>
<p><strong>Explication du code</strong>
Cette requête crée une table en faisant apparaître 5 colonnes :</p>
<ul>
<li>Une colonne <em>Pays</em></li>
<li>Une colonne comprenant le somme totale de médailles par pays (<em>Total Médailles</em>)</li>
<li>Une colonne par couleur de médaille, totalisant le nombre de médailles de chaque couleur par pays (<em>GOLD</em>, <em>SILVER</em> et <em>BRONZE</em>)</li>
</ul>
<p>Les lignes sont quant à elles classées en fonction du nombre de médailles d'or, puis d'argent, puis de bronze.</p>
</div>
</details>     
</div>
<p>Le résultat de la requête est donc le tableau des médailles suivant, réalisé sur l'ensemble des médailles reçues lors des éditions de 1924 à 2010 :
<img src="Images/Tableau%20des%20m%C3%A9dailles.png" alt="Tableau des médailles"></p>
<h6>Question 2 : Quel pays est en tête du classement des médailles par édition ?</h6>
<p>Nous avons réalisé un tableau des médailles sur l'ensemble des éditions entre 1924 et 2010, mais il est intéressant d'extraire le pays en tête du classement lors de chacune des éditions.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Code</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<p><strong>Code</strong></p>
<pre><code>SELECT m.years AS 'Année', m.pays AS 'Meilleur Pays', m.nombre_or AS 'Nombre de Titres'
FROM (
    SELECT years, pays,
           SUM(CASE WHEN medal = 'GOLD' THEN 1 ELSE 0 END) AS nombre_or
    FROM medals
    GROUP BY years, pays
) AS m
JOIN (
    SELECT years, MAX(nombre_or) AS max_or
    FROM (
        SELECT years, pays,
               SUM(CASE WHEN medal = 'GOLD' THEN 1 ELSE 0 END) AS nombre_or
        FROM medals
        GROUP BY years, pays
    ) AS subquery
    GROUP BY years
) AS max_counts ON m.years = max_counts.years AND m.nombre_or = max_counts.max_or
ORDER BY m.years;
</code></pre>
<p><strong>Explication du code</strong>
Ce code réalise la jointure de deux sous tables :</p>
<ul>
<li>La première nommée <em>m</em> est un table comprenant 3 colonnes, donnant le nombre de médailles d'or obtenu par chaque pays à chaque édition des JO d'hiver.</li>
<li>La seconde, nommée <em>max_counts</em> est une extraction de la première sous-table dans laquelle on conserve seulement la valeur maximum de nombre de médailles d'or par année.</li>
</ul>
<p>En réalisant une jointure sur les années, on obtient ainsi le résultat ci-dessous.</p>
</div>
</details>     
</div>
<p>On obtient ainsi le table suivante, donnant le meilleur pays par année en nombre de titre (médailles d'or) :
<img src="Images/Meilleur%20payspar%20ann%C3%A9e.png" alt="Meilleur pays par année">
<em>Remarque : On pourrait être plus précis en prenant en compte égalelement le nombre de médailles d'argent et de bronze</em></p>
<h6>Question 3 : Quel est le classement dans le tableau des médailles de chaque pays par édition ?</h6>
<p>Toujours afin d'étudier les performances des pays par édition, nous pouvons essayer d'extraire le classement dans le tableau des médailles par année.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Code</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<p><strong>Code</strong></p>
<pre><code>WITH classement AS (
    SELECT pays AS 'Pays',
           years AS 'Année',
           RANK() OVER (
               PARTITION BY years
               ORDER BY 
                   SUM(CASE WHEN medal = 'GOLD' THEN 1 ELSE 0 END) DESC,
                   SUM(CASE WHEN medal = 'SILVER' THEN 1 ELSE 0 END) DESC,
                   SUM(CASE WHEN medal = 'BRONZE' THEN 1 ELSE 0 END) DESC
           ) AS 'Classement'
    FROM medals
    GROUP BY years, pays
)
SELECT Pays, Année, Classement
FROM classement
ORDER BY Pays, Année;
</code></pre>
<p><strong>Explication du code</strong>
Cette requête crée une sous-table <em>classement</em> créant un classement des médailles comme vu précédemment (Question 1), puis extrait le rang de chaque pays par année.</p>
<p>Le résultat obtenu, trié par Pays et par Année, est ci-dessous.</p>
</div>
</details>     
</div>
<p>Le résultat obtenu est le suivant :
<img src="Images/Classement%20des%20m%C3%A9dailles%20par%20ann%C3%A9e.png" alt="Classement par année"></p>
<h6>Question 4 : Sur l'ensemble des éditions entre 1924 et 2010, quel pays est le meilleur dans chaque discipline ?</h6>
<p>La base de données nous permet également de pouvoir réaliser une étude sur le pays le meilleur (en nombre de titre) en fonction du sport.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Code</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<p><strong>Code</strong></p>
<pre><code>SELECT m.sport AS 'Discipline', m.pays AS 'Meilleur Pays', m.nombre_or AS 'Nombre de Titres'
FROM (
    SELECT sport, pays,
           SUM(CASE WHEN medal = 'GOLD' THEN 1 ELSE 0 END) AS nombre_or
    FROM medals
    GROUP BY sport, pays
) AS m
JOIN (
    SELECT sport, MAX(nombre_or) AS max_or
    FROM (
        SELECT sport, pays,
               SUM(CASE WHEN medal = 'GOLD' THEN 1 ELSE 0 END) AS nombre_or
        FROM medals
        GROUP BY sport, pays
    ) AS subquery
    GROUP BY sport
) AS max_counts ON m.sport = max_counts.sport AND m.nombre_or = max_counts.max_or
ORDER BY m.sport;
</code></pre>
<p><strong>Explication du code</strong>
La méthode utilisée pour cette question est la même que pour la question 2, en remplaçant les années par les disciplines.</p>
</div>
</details>     
</div>
<p>On obtient ainsi la table suivante :
<img src="Images/Meilleure%20pays%20dans%20chaque%20discipline.png" alt="Meilleur par discipline"></p>
<h6>Question 5 : La performance du pays organisateur (en termes de nombre de médailles) est-elle supérieur que lorsque le même pays n'est pas organisateur ?</h6>
<p>Lors de différents évènements sportifs, il existe un match aller, et un match retour. Ceci est organisé car lorsqu'une équipe joue à domicile, ses performances sont souvent meilleures. Il est donc intéressant de regarder si ce phénomène est visible dans les résultats des différents pays aux JO d'hiver.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Code</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<p><strong>Code et explication</strong></p>
<p>Table donnant le nombre de médailles obtenu par un pays qlorsqu'il n'est pas organisateur :</p>
<pre><code>SELECT pays AS 'Pays', COUNT(medal) AS 'Nombre_Médailles'
FROM medals
WHERE host = 'FALSE'
GROUP BY pays
ORDER BY pays;
</code></pre>
<p>Table donnant le nombre de fois qu'un pays a organisé les jeux d'hiver et le nombre de médailles récoltées lors de ces éditions :</p>
<pre><code>SELECT pays AS 'Pays',
       COUNT(years) AS 'Nombre_Organisateur',
       SUM(nombre_medaille) AS 'Total_Médailles'
FROM (
    SELECT years, pays, COUNT(medal) AS nombre_medaille
    FROM medals
    WHERE host = 'TRUE'
    GROUP BY years, pays
    ORDER BY years
) AS sous_requete
GROUP BY pays
ORDER BY 'Nombre Organisateur' DESC;
</code></pre>
<p>Ainsi, avec ces deux tables, nous pouvons obtenir une table donnant pas pays organisateur, le nombre de médailles obtenues à domicile, le nombre de médailles obtenues à l'extérieur, et le nombre de fois que chaque pays a organisé les JO d'hiver :</p>
<pre><code>SELECT not_host.Pays AS Pays, not_host.Nombre_Médailles AS medailles_ext, host.Nombre_Organisateur AS Nbre_orga, host.Total_Médailles AS medailles_dom
FROM(
    SELECT pays AS 'Pays', COUNT(medal) AS 'Nombre_Médailles'
    FROM medals
    WHERE host = 'FALSE'
    GROUP BY pays
    ORDER BY pays) AS not_host
JOIN (
    SELECT pays AS 'Pays',
       COUNT(years) AS 'Nombre_Organisateur',
       SUM(nombre_medaille) AS 'Total_Médailles'
    FROM (
        SELECT years, pays, COUNT(medal) AS nombre_medaille
        FROM medals
        WHERE host = 'TRUE'
        GROUP BY years, pays
        ORDER BY years
    ) AS sous_requete
    GROUP BY pays
    ORDER BY 'Nombre Organisateur' DESC) AS host
ON not_host.Pays=host.Pays;
</code></pre>
<p>Finalement, en notant que la base de données recouvre les 21 éditions entre 1924 et 2010, on peut calculer les nombres moyens de médailles reçues à domicile et à l'extérieur par pays :</p>
<pre><code>SELECT Pays,
    ROUND(medailles_dom/Nbre_orga,1) AS Moyenne_médailles_domicile,
    ROUND(medailles_ext/(21-Nbre_orga),1) AS Moyenne_médailles_extérieur
FROM(
    SELECT not_host.Pays AS Pays, not_host.Nombre_Médailles AS medailles_ext, host.Nombre_Organisateur AS Nbre_orga, host.Total_Médailles AS medailles_dom
    FROM(
        SELECT pays AS 'Pays', COUNT(medal) AS 'Nombre_Médailles'
        FROM medals
        WHERE host = 'FALSE'
        GROUP BY pays
        ORDER BY pays) AS not_host
    JOIN (
        SELECT pays AS 'Pays',
        COUNT(years) AS 'Nombre_Organisateur',
        SUM(nombre_medaille) AS 'Total_Médailles'
        FROM (
            SELECT years, pays, COUNT(medal) AS nombre_medaille
            FROM medals
            WHERE host = 'TRUE'
            GROUP BY years, pays
            ORDER BY years
        ) AS sous_requete
        GROUP BY pays
        ORDER BY 'Nombre Organisateur' DESC) AS host
    ON not_host.Pays=host.Pays) AS under_query;
</code></pre>
</div>
</details>     
</div>
<p>Le résultat obtenu est la table suivante :
<img src="Images/Moyenne%20M%C3%A9dailles%20dom-ext.png" alt="Moyenne médailles"></p>
<p>On remarque à l'aide de cette table que pour la totalité des pays ayant organisé les JO d'hiver (excepté pour la Suisse et l'Allemagne), les performances à domicile sont, au pire, égales à celles à l'extérieur, mais pour la plupart, les performances à domicile sont significativement meilleures (en termes de nombre total de médailles obtenues).</p>
<h3>Conclusion Sprint 1</h3>
<p>Ce premier sprint nous a permis de comprendre comment créer une base de données relationnelles et comment extraire des tables afin de réaliser les prémices d'une analyse de données en SQL. Cependant, le langage SQL n'est pas le plus adapté pour réaliser de l'analyse de données. Nous explorerons plus en profondeur ceci lors du second sprint.</p>
<h3>Second Sprint</h3>
<p>Pour explorer l'analyse de données, nous allons nous appuyer sur les bibliothèques suivantes :</p>
<ul>
<li>Pandas</li>
<li>Matplotlib (afin de tracer des figures)</li>
<li>Seabron (une autre bibliothèque permettant de tracer des figures, que j'ai découvert un peu plus tard, mais qui est plus intuitive selon moi)</li>
</ul>
<h4>Mise en contexte</h4>
<p>L'objectif de ce second sprint est de manipuler une base de données et de &quot;la faire parler&quot;. Pour cela, nous nous placerons dans la peau d'un jeune musicien, qui énormément de talent mais qui peine à trouver de l'inspiration pour créer son premier morceau. Son objectif est de devenir viral très rapidement, avec une musique populaire. Pour cela, nous allons utiliser une base de données contenant plus de 60 000 morceaux recencés, et dont les caractéristiques suivantes sont rensignées :</p>
<ul>
<li>track_id: Spotify ID pour le morecau.</li>
<li>track_name: Nom du morceau.</li>
<li>artist_name: Noms des artistes ayant travaillés sur le morceau, séparés par une virgule s'il y en a plusieurs.</li>
<li>year: L'année de sortie du morceau.</li>
<li>popularity: indice de popularité entre 0 et 100, basé sur le nombre d'écoute et si le morceau et récent ou non.</li>
<li>artwork_url: URL du morceau.</li>
<li>album_name: L'album dans lequel le morceau apparaît.</li>
<li>acousticness: Un indice entre 0.0 et 1.0 montrant à quel point le morceau est acoustique.</li>
<li>danceability: Indice de dansibilité du morceau (0.0 = moins dansable, 1.0 = plus dansable).</li>
<li>duration_ms: Longueur du morceau en millisecondes.</li>
<li>energy: Un indice entre 0.0 et 1.0 d'énregie.</li>
<li>key: La clé musicale du morceau.</li>
<li>liveness: Une mesure indiquant la probabilité qu'un morceau soit enregistré live.</li>
<li>loudness: Le nivau sonore du morceau (dB).</li>
<li>mode: Indique le mode du morceau (1 = major, 0 = minor).</li>
<li>speechiness: Mesure la présence de mot parlé dans le morceau (proche de 1.0 signifie la présence importante de mots parlés).</li>
<li>tempo: Le tempo estimé du morceau en bpm.</li>
<li>time_signature: Le nombre de battement par minute, de 3 à 7.</li>
<li>valence: Un indice de 0.0 à 1.0 mesure la positivité d'un morceau.</li>
<li>track_url: L'URL Spotify pour le morceau.</li>
<li>language: Langue des paroles du morceau (English, Tamil, Hindi, Telugu, Malayalam, Korean).</li>
</ul>
<h4>Analyse</h4>
<p>Nous allons réaliser une analyse sur les thématiques suivantes : langue, positivité (valence), dansabilité, énergie</p>
<h5>Comment la popularité des morceaux varie-t-elle en fonction des langues ?</h5>
<p>Le premier objectif est d'estimer quelle langue permettra d'obtenir la plus grande popularité. Pour cela, nous allons estimer la popularité moyenne par langue.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Code</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<pre><code>fig, ax = plt.subplots()
popularity_by_language = spotify_tracks.groupby(&quot;language&quot;)[&quot;popularity&quot;].mean()
popularity_by_language.plot.bar(
    ax=ax,
    title=&quot;Popularité en fonction de la langue&quot;,
    xlabel=&quot;Langues&quot;,
    ylabel=&quot;Indice de popularité&quot;,
)
plt.show()
</code></pre>
</div>
</details>     
</div>
<p>Le résultat obtenu est le suivant :</p>
<p><img src="Images/Capture%20d%E2%80%99%C3%A9cran%202024-12-12%20%C3%A0%2016.33.56.png" alt="Popularité moyenne par langue V1"></p>
<p>On remarque que le Coréen est la langue avec le plus grand indice de popularité moyen, suivi par le Hindi. Pourtant, l’anglais étant la langue la plus parlé au monde, il est surprenant de voir ce résultat. Nous allons donc approfondir la recherche afin de s'assurer de la cohérence du résultat.</p>
<p>Penchons nous sur le nombre de morceaux par langue :</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Code</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<pre><code>fig, ax = plt.subplots()
repartition_language = spotify_tracks['language'].value_counts()
repartition_language.plot.bar(
    ax=ax,
    title=&quot;Nombre de morceaux par langue&quot;,
    xlabel=&quot;Langues&quot;,
    ylabel=&quot;Nombre de morceaux&quot;,
)

plt.tight_layout() #Afin que tous les titres soient bien visibles
plt.show()
</code></pre>
</div>
</details>     
</div>
<p>On obtient les résultats suivants :</p>
<p><img src="Images/Capture%20d%E2%80%99%C3%A9cran%202024-12-12%20%C3%A0%2017.16.30.png" alt="Nombre de morceaux par langue"></p>
<p>On observe alors que les morceaux en anglais sont beaucoup plus nombreux que les morceaux en Coréen ou Hindi. Il peut y aoir ainsi une fausseté dans la représentativité des données (la présence que de morceaux coréens populaires par exemple). Analysons ainsi l'écart type pour vérifier cette théorie :</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Code</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<pre><code>fig, ax = plt.subplots(figsize=(8, 6))
popularity_by_language = spotify_tracks.groupby('language')['popularity'].agg(['mean', 'std'])
popularity_by_language['mean'].plot.bar(
    yerr=popularity_by_language['std'],
    capsize=4,
    ax=ax,
    title=&quot;Popularité moyenne par langue et écart type&quot;,
    xlabel=&quot;Langues&quot;,
    ylabel=&quot;Indice de popularité moyenne&quot;,
)

plt.tight_layout() #Afin que tous les titres soient bien visibles
plt.show()
</code></pre>
</div>
</details>     
</div>
<p>On obtient le graphe suivant :</p>
<p><img src="Images/Capture%20d%E2%80%99%C3%A9cran%202024-12-12%20%C3%A0%2017.07.33.png" alt="Ecart type popularité langue"></p>
<p>On remarque ainsi au travers de l’écart type des musiques coréennes par exemple que les musiques sélectionnées ont toutes un niveau de popularité assez élevé. Ceci fausse l’analyse. Nous allons donc explorer deux hypothèses afin de minimiser cet effet sur les résultats.</p>
<p><strong>Hypothèse 1 :</strong> prendre seulement les morceaux avec un indice de popularité supérieur à 50 :</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Code</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<pre><code>popular_tracks = spotify_tracks[spotify_tracks['popularity'] &gt; 50]
fig, ax = plt.subplots()
popularity_by_language = popular_tracks.groupby(&quot;language&quot;)[&quot;popularity&quot;].mean()
popularity_by_language.plot.bar(
    ax=ax,
    title=&quot;Popularité en fonction de la langue&quot;,
    xlabel=&quot;Langues&quot;,
    ylabel=&quot;Indice de popularité&quot;,
)

plt.tight_layout() #Afin que tous les titres soient bien visibles
plt.show()
</code></pre>
</div>
</details>     
</div>
<p><img src="Images/Capture%20d%E2%80%99%C3%A9cran%202024-12-12%20%C3%A0%2017.29.48.png" alt="Hypothèse 1 popularité"></p>
<p>On note alors des résultats différents dans lesquels, parmi les morceaux ayant déjà un indice de popularité assez élevé, les morceaux en anglais sont les plus populaires.</p>
<p><strong>Hypothèse 2 :</strong> prendre les 2000 musiques les plus populaires par langue :</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Code</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<pre><code>top_2000 = spotify_tracks.groupby('language').apply(lambda x: x.nlargest(2000, 'popularity'))
top_2000_reset = top_2000.reset_index(drop=True) #Afin d'éliminer l'erreur due à l'ambiguité de 'language' en tant que colonne et indice

fig, ax = plt.subplots()
popularity_by_language = top_2000_reset.groupby('language')['popularity'].mean()
popularity_by_language.plot.bar(
    ax=ax,
    title=&quot;Popularité en fonction de la langue&quot;,
    xlabel=&quot;Langues&quot;,
    ylabel=&quot;Indice de popularité&quot;,
)

plt.tight_layout() #Afin que tous les titres soient bien visibles
plt.show()
</code></pre>
</div>
</details>     
</div>
<p><img src="Images/Capture%20d%E2%80%99%C3%A9cran%202024-12-12%20%C3%A0%2017.44.12.png" alt="Hypothèse 2 popularité"></p>
<p>Cette seconde hypothèse corrobore les résultats de l'hypothèse 1, en montrant que parmi les musiques les plus populaires par langue, les musiques en anglais ont un indice moyen de popularité plus élevé que les autres langues.</p>
<h5>Quel est le rapport entre la valence (positivité) et la dansabilité ?</h5>
<p>En tant qu'artiste, on souhaite savoir si un morceau dansable est forcément positif.</p>
<p>Pour cela, nous allons tracer la reggression permettant de mettre en lumière un éventuel lien entre ce deux éléments.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Code</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<pre><code>sns.regplot(x=spotify_tracks['danceability'], y=spotify_tracks['valence'], line_kws={'color': 'black'})

plt.title(&quot;Lien entre la dansabilité et la positivité&quot;)
plt.xlabel(&quot;Indice de dansabilité&quot;)
plt.ylabel(&quot;Indice de positivité&quot;)

plt.xlim(0, 1)
plt.ylim(0, 1)

plt.tight_layout()

plt.show()
</code></pre>
<p>Ce code est écrit avec Seaborn, car je trouve la rédaction plus intuitive. Dans la suite de la rédaction, nous alternerons entre Seaborn et MatplotLib lorsque l'on ne peut pas utiliser Seaborn.</p>
</div>
</details>     
</div>
<p>Le résultat obtenu est le suivant :</p>
<p><img src="Images/Capture%20d%E2%80%99%C3%A9cran%202024-12-12%20%C3%A0%2018.13.00.png" alt="Lien entre la positivité et la dansabilité"></p>
<p>On remarque une tendance avec ce graphique : l'indice de positivité semble augmenter avec l'indice de dansabilité. Ainsi, on peut admettre qu'un morceaux positif est de manière générale plus dansant.</p>
<h5>Existe-il un rapport entre la dansabilité et la popularité d’un morceau de musique ?</h5>
<p>On cherche alors à savoir s'il est plus intéressant de composer un morceau dansant pour devenir populaire.</p>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100 cursor-pointer select-none">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block group-open:select-text">
<p>Code</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2 cursor-auto select-text">
<pre><code>sns.regplot(y=spotify_tracks['popularity'], x=spotify_tracks['danceability'], line_kws={'color': 'black'})

plt.title(&quot;Lien entre la dansabilité et la popularité&quot;)
plt.ylabel(&quot;Indice de popularité&quot;)
plt.xlabel(&quot;Indice de dansabilité&quot;)


plt.tight_layout()

plt.show()
</code></pre>
</div>
</details>     
</div>
<p>Le résultat obtenu est le suivant :</p>
<p><img src="Images/Capture%20d%E2%80%99%C3%A9cran%202024-12-12%20%C3%A0%2018.19.33.png" alt="Lien entre dansabilité et popularité"></p>
<p>Le graphe précédent ne permet pas de mettre en lumière un lien évident entre l'indice de dansabilité d'un morceau et son indice de popularité.</p>


</article>

        </main>


        <footer class="min-h-[50px] border-t-2 border-gray-200 mt-4">
            <div class="max-w-[1000px] mx-auto px-4">
                <div class="min-h-[50px] flex justify-center items-center">
                    <p class="text-center">
                        <span style="font-family: Consolas, sans-serif;">Do_<span style="color: #4a86e8">It</span></span> : Développent et Organisation en IT
                    </p>
                </div>
            </div>
        </footer>

        <script>
        MathJax
            .startup
            .document
            .getMathItemsWithin(document.body);
        </script>

    </body>
</html>
