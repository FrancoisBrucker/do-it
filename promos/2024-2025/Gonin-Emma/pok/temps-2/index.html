
<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>POK 2 - Mise en production de mon portfolio web d&#39;art</title>

        <link href="/do-it/assets/node_modules/prismjs/themes/prism-solarizedlight.min.css" rel="stylesheet">
        <link href="/do-it/assets/node_modules/prismjs/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet">

        <link href="/do-it/assets/stylesheets/main.css" rel="stylesheet">
    </head>
    <body>
        <script>
        window.MathJax = {
            tex: {
            inlineMath: [
                [
                '$', '$'
                ],
                [
                '\\(', '\\)'
                ]
            ]
            },
            svg: {
            fontCache: 'global'
            }
        };
        </script>
        <script type="text/javascript" id="MathJax-script" src="/do-it/assets/node_modules/mathjax/es5/tex-svg-full.js"></script>

        <header class="border-b-2 border-gray-200 mb-4">
        <div class="max-w-[1000px] mx-auto px-4">
            <div class="min-h-[50px] flex justify-between items-center">
                <a class="mx-2" href="/do-it/">Home</a>
                <div class="flex items-center gap-4 sm:gap-6 ">
                    <a class="" href="/do-it/cs">CS</a>
                    <a class="" href="/do-it/pok">POK</a>
                    <a class="" href="/do-it/mon">MON</a>
                    <a class="" href="/do-it/projets">Projets</a>
                    <a class="hidden sm:block" href="/do-it/promos">Promos</a>
                    <a href="/do-it/search">
                        <svg class="h-5 aspect-square" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path>
                        </svg>
                    </a>
                    <a class="hidden sm:block" href="https://github.com/FrancoisBrucker/do-it" target="_blank">
                        <svg class="h-5 aspect-square" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg>
                    </a>
                </div>
            </div>
        </div>
        </header>

        <main class="max-w-[1000px] mx-auto px-4" data-pagefind-body="">
            
<article class="relative">
<h1 class="mb-1">POK 2 - Mise en production de mon portfolio web d&#39;art</h1>
<div class="mb-4">
    
        <div class="px-4 flex flex-wrap items-center">
            
                <div class="font-bold">Tags : </div>
            
            <ul class="flex flex-wrap overflow-auto not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Tags">
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">POK</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">2024-2025</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">temps 2</li>
                
                    <li class="bg-yellow-200 rounded-full px-2" data-pagefind-filter="Tags">vert</li>
                

            </ul>
            
            
            <div class="hidden" data-pagefind-meta="Type">
                
                    
                
                    
                
                    
                
                    
                
            </div>
        </div>
    

    
        <div class="px-4 flex flex-wrap items-center">
            <div class="font-bold">Auteurs : </div>
            <ul class="flex flex-wrap not-prose list-none my-1 mx-0 px-1 gap-1" data-pagefind-meta="Auteurs">
                
                    <li class="bg-blue-200 rounded-full px-2" data-pagefind-filter="Auteurs">Emma Gonin</li>
                
            </ul>
        </div>
    

    
</div>

        <p class="mb-4 text-lg">

                Mon objectif est la mise en production de mon site web React et d'améliorer le backend ainsi que le frontend avant son déployement.

        </p>



    
<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-purple-500 bg-purple-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-purple-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"></path>
</svg>
<div class="pl-8 mr-8">

<a href="/do-it/promos/">Promotions</a><span class="px-1">/</span><a href="/do-it/promos/2024-2025/">2024-2025</a><span class="px-1">/</span><a href="/do-it/promos/2024-2025/Gonin-Emma/">Emma Gonin</a><span class="px-1">/</span><a href="/do-it/promos/2024-2025/Gonin-Emma/pok/">POK de Emma Gonin</a><span class="px-1">/</span><a href="/do-it/promos/2024-2025/Gonin-Emma/pok/temps-2/">POK 2 - Mise en production de mon portfolio web d&#39;art</a>

</div></div>




<p>Mon objectif est de mettre en production mon site web React à l'adresse suivante : [<a href="https://balsamite.aioli.ec-m.fr">https://balsamite.aioli.ec-m.fr</a>]. Dans un premier temps lors du premier sprint je souhaite terminer le développement de mon site web et dans un second temps le déployer de deux manières différentes.</p>
<h2>Tâches</h2>
<h3>Sprints</h3>
<p>But final.</p>
<h4>Sprint 1 : Fin du développement</h4>
<ul>
<li>[x] Améliorer la page portefolio</li>
<li>[ ] Changer le système de mail si possible</li>
<li>[x] Modifier la galerie pour pouvoir visualiser le titre de la peinture lorsqu'on passe la souris dessus</li>
<li>[ ] Ajouter la navigation clavier pour le portefolio et le scroll =&gt; décalé au sprint 2 après de nombreux tatônnements</li>
<li>[x] Voir où stocker mes peintures : au lieu d'un json créer une collection sur MongoDB et faire une API avec FastAPI ou SQLite</li>
</ul>
<h4>Sprint 2 : Déployement !</h4>
<ul>
<li>[ ] Déployer le site sur aioli à la main, en créant mon serveur et en utilisant tmux pour survivre à la déconnexion.</li>
<li>[ ] Tester une seconde manière de déployer, cette fois en dockerisant mon appli en parallèle de mon MON 2.2 sur Docker.</li>
<li>[ ] Rajout post-sprint 1 : Trouver comment forcer le rafraichissement du DOM après un clic sur les flèches gauche ou droite pour enfin mettre en place la navigation clavier dans le portfolio.</li>
</ul>
<h3>Horodatage</h3>
<p>Toutes les séances et le nombre d'heure que l'on y a passé.</p>
<table>
<thead>
<tr>
<th>Date</th>
<th>Heures passées</th>
<th>Indications</th>
</tr>
</thead>
<tbody>
<tr>
<td>Lundi 11/11</td>
<td>4H</td>
<td>Amélioration de la page portefolio, rajout de deux peintures à la bdd, rajout de la fonctionnalité &quot;hovering&quot; dans la galerie photo</td>
</tr>
<tr>
<td>Mardi 12/11</td>
<td>1H</td>
<td>Essais pour la navigation clavier et débuggage, essai avec un nouveau carousel qui aurait pû être navigué avec le clavier plus facilement mais le rendu ne m'a pas plu du tout</td>
</tr>
<tr>
<td>Mercredi 13/11</td>
<td>2H</td>
<td>Essais pour la navigation clavier/Mise en pause de cette navigation là : j'ai nettoyé le code et décalé cette tâche au sprint 2, deux heures peu productives</td>
</tr>
<tr>
<td>Jeudi 14/11</td>
<td>2H30</td>
<td>Après la session peu productive de la veille et le cours de dev web sur Flask, je me suis décidée à implémenter ma propre API avec FastAPI. J'ai changé l'arborescence de mon projet pour séparer backend et frontend</td>
</tr>
<tr>
<td>Lundi 18/11</td>
<td>1H</td>
<td>J'ai créé mon nouveau repo git et j'ai push mon projet ainsi que fini de rédiger cette synthèse.</td>
</tr>
</tbody>
</table>
<h2>Contenu</h2>
<p>Le contenu du POK.</p>
<h3>Premier Sprint</h3>
<h3>Amélioration du chargement des images</h3>
<p>J'ai amélioré le carousel avec le chargement des images, ce qui m'ennuyait avec la version précédente du carousel c'était le chargement lent des images. Pour améliorer ceci, j'ai d'abord essayé de refaire le carousel de manière plus simple en faisant des tests mais je préférais le visuel que j'avais déjà, donc je suis repartie du code que j'avais à la fin du POK 1 et j'ai rajouté ces lignes de code qui chargent les images de manière asynchrone :</p>
<pre><code>useEffect(() =&gt; {
    const preloadImages = async () =&gt; {
      const visibleItemIndices = [currentIndex, (currentIndex + 1) % items.length];
      
      const preloadPromises = visibleItemIndices.map(index =&gt; 
        loadImage(items[index])
      );

      await Promise.all(preloadPromises);

      setIsLoading(false);
      setVisibleItems(visibleItemIndices.map(index =&gt; items[index]));
    };

    preloadImages();
  }, [currentIndex]);

  const loadImage = async (item) =&gt; {
    return new Promise((resolve, reject) =&gt; {
      const img = new Image();
      img.onload = () =&gt; resolve(img);
      img.onerror = () =&gt; reject(new Error(`Failed to load image: ${item.img_url}`));
      img.src = item.img_url;
    });
  };
</code></pre>
<h3>Rajout nouvelles peintures / hovering Galerie</h3>
<p>Une fois que j'étais satisfaite du résultat, j'ai rajouté deux peintures/dessins récents dans ma base de données. J'ai ensuite rajouté une fonctionnalité dans ma galerie photo qui est que lorsque l'utilisateur passe la souris sur une des images, s'affiche alors le titre et la description de l'image. Pour se faire, j'ai rajouté un state <code>hoveredItem</code> et une Box noire transparente qui se superpose à l'image.</p>
<p><img src="image.png" alt="Hovering"></p>
<h3>Séparation backend/frontend</h3>
<p>Après l'ajout de cette nouvelle fonctionnalité, j'ai voulu séparer le backend du frontend.
Avant, je stockais mes peintures et mon fichier <code>data.json</code> directement dans le dossier src de mon app React et j'importais le fichier dans mes composants : ce n'est pas propre ! Mais en faisant cela, je n'avais pas besoin de backend, mes fichiers étaient statiques.</p>
<p>Pour mon backend et préparer la migration des données à un autre endroit que directement dans mon application React, j'ai créé une API avec <strong>FastAPI</strong> afin de récupérer les données de mon fichier <code>data.json</code> qui se trouve dans le dossier backend. Pour déployer mon API sur le port <em>8000</em> et mon application React sur le port <em>3000</em> j'ai créé un script dans mon <code>package.json</code> dans mon application globale :</p>
<pre><code>&quot;scripts&quot;: {
        &quot;dev&quot;: &quot;concurrently \&quot;npm run react-dev\&quot; \&quot;npm run backend-api\&quot;&quot;,
        &quot;react-dev&quot;: &quot;cd frontend &amp;&amp; npm run start&quot;,
        &quot;backend-api&quot;: &quot;cd backend/api &amp;&amp; uvicorn main:app --reload&quot;
    },
    &quot;devDependencies&quot;: {
        &quot;concurrently&quot;: &quot;^9.1.0&quot;
    }
</code></pre>
<p>Ainsi, lorsque je lance la commande <code>npm run dev</code>, npm appelle mon script <code>concurrently \&quot;npm run react-dev\&quot; \&quot;npm run backend-api\&quot;</code>. Le script <code>react-dev</code> va permettre de lancer mon application React et le script <code>backend-api</code> va permettre de lancer l'API avec Uvicorn.</p>
<p><img src="image-1.png" alt="Déployement"></p>
<p>J'ai créé un nouveau repo Git pour mon portfolio 2.0 avec le backend et le frontend séparés : <a href="https://github.com/egonin/art-portfolio-2.0">https://github.com/egonin/art-portfolio-2.0</a>.</p>
<h3>Sprint 1 analyse post-mortem</h3>
<p>Je suis contente de mon travail, je n'ai pas fini toutes mes tâches mais j'ai fait des choses que je n'avais pas envisagé clairement dans ma to-do list. Le dimensionnement de mes tâches est peut-être trop laxiste, pas assez explicite. Pour le sprint 2, j'espère que mes tâches sont raisonnables et la tâche sur l'amélioration du système de mails va passer à la trappe pour l'instant</p>
<p>Concernant la gestion de mon temps, j'ai fait 10h30, en réalité mon horodatage de ma session du jeudi 14/11 est peut-être erroné car j'ai été prise d'un élan et je n'ai pas vu l'heure passer, sachant également que je me suis interrompue au milieu de ma session de travail. Il y a donc une part d'incertitude sur cette session là, je pense +/- 1 heure.</p>
<p>J'ai eu de très bons retours de la part de mes proches sur l'avancée de mon site et j'ai hâte de voir ce que cela peut donner une fois mis en production.</p>
<p>Pour déployer le site, j'ai plusieurs idées, si je n'avais pas créer d'API il m'aurait suffit de builder mon application React et de copier le dossier /build/ dans ma machine virtuelle et le serveur Nginx aurait servi à déployer ce build. Maintenant il faut que je me renseigne sur comment faire en ayant l'API qui tourne en arrière-plan.</p>
<h3>Second Sprint</h3>
<h3>Ressources</h3>
<ul>
<li>Pour la gestion du backend et du frontend (les faire tourner en parallèle) : Stackoverflow, how to put backend and frontend together - returning react frontend from fastapi backend endpoint, <a href="https://stackoverflow.com/questions/62928450/how-to-put-backend-and-frontend-together-returning-react-frontend-from-fastapi">https://stackoverflow.com/questions/62928450/how-to-put-backend-and-frontend-together-returning-react-frontend-from-fastapi</a></li>
<li>Pour mes questions spécifiques au code, j'utilise l'extension VSCode de <a href="https://phind.com">https://phind.com</a>
En prévision du sprint 2 :</li>
<li><a href="https://stacklima.com/comment-dockeriser-une-application-reactjs/">https://stacklima.com/comment-dockeriser-une-application-reactjs/</a></li>
<li><a href="https://www.youtube.com/watch?v=4xj8N4a36Zs&amp;ab_channel=chillotech">https://www.youtube.com/watch?v=4xj8N4a36Zs&amp;ab_channel=chillotech</a></li>
</ul>


</article>

        </main>


        <footer class="min-h-[50px] border-t-2 border-gray-200 mt-4">
            <div class="max-w-[1000px] mx-auto px-4">
                <div class="min-h-[50px] flex justify-center items-center">
                    <p class="text-center">
                        <span style="font-family: Consolas, sans-serif;">Do_<span style="color: #4a86e8">It</span></span> : Développent et Organisation en IT
                    </p>
                </div>
            </div>
        </footer>

        <script>
        MathJax
            .startup
            .document
            .getMathItemsWithin(document.body);
        </script>
    </body>
</html>
